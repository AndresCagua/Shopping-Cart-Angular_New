"use strict";(self.webpackChunkShopping_Cart_Angular=self.webpackChunkShopping_Cart_Angular||[]).push([[179],{323:(ct,Se,k)=>{var l=k(4650);let B=null;function O(){return B}const de=new l.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function me(){return(0,l.LFG)(G)}()},providedIn:"platform"}),n})();const W=new l.OlP("Location Initialized");let G=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function $e(){return new G((0,l.LFG)(de))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Qe)},providedIn:"root"}),n})();const fe=new l.OlP("appBaseHref");let Qe=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+tt(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+tt(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(le),l.LFG(fe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+tt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+tt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(le),l.LFG(fe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ee(He(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Ne,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(l.LFG(_e))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Re(){return new ke((0,l.LFG)(_e))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}const re={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Percent=1]="Percent",ae[ae.Currency=2]="Currency",ae[ae.Scientific=3]="Scientific",ae))(),se=(()=>((se=se||{})[se.Decimal=0]="Decimal",se[se.Group=1]="Group",se[se.List=2]="List",se[se.PercentSign=3]="PercentSign",se[se.PlusSign=4]="PlusSign",se[se.MinusSign=5]="MinusSign",se[se.Exponential=6]="Exponential",se[se.SuperscriptingExponent=7]="SuperscriptingExponent",se[se.PerMille=8]="PerMille",se[se.Infinity=9]="Infinity",se[se.NaN=10]="NaN",se[se.TimeSeparator=11]="TimeSeparator",se[se.CurrencyDecimal=12]="CurrencyDecimal",se[se.CurrencyGroup=13]="CurrencyGroup",se))();function Pt(n,e){const t=(0,l.cg1)(n),r=t[l.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===se.CurrencyDecimal)return t[l.wAp.NumberSymbols][se.Decimal];if(e===se.CurrencyGroup)return t[l.wAp.NumberSymbols][se.Group]}return r}const nt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Is(n,e,t,r,o){const d=function Es(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),o=r[0],u=r[1],d=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],g=d[0],v=d[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let A=0;A<v.length;A++){const N=v.charAt(A);"0"===N?t.minFrac=t.maxFrac=A+1:"#"===N?t.maxFrac=A+1:t.posSuf+=N}const C=g.split(",");if(t.gSize=C[1]?C[1].length:0,t.lgSize=C[2]||C[1]?(C[2]||C[1]).length:0,u){const A=o.length-t.posPre.length-t.posSuf.length,N=u.indexOf("#");t.negPre=u.substring(0,N).replace(/'/g,""),t.negSuf=u.slice(N+A).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function hr(n,e){return(0,l.cg1)(n)[l.wAp.NumberFormats][e]}(e,ae.Currency),Pt(e,se.MinusSign));return d.minFrac=function or(n){let e;const t=re[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),d.maxFrac=d.minFrac,function _n(n,e,t,r,o,u,d=!1){let g="",v=!1;if(isFinite(n)){let C=function Ua(n){let r,o,u,d,g,e=Math.abs(n)+"",t=0;for((o=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(o<0&&(o=u),o+=+e.slice(u+1),e=e.substring(0,u)):o<0&&(o=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],o=1;else{for(g--;"0"===e.charAt(g);)g--;for(o-=u,r=[],d=0;u<=g;u++,d++)r[d]=Number(e.charAt(u))}return o>22&&(r=r.splice(0,21),t=o-1,o=1),{digits:r,exponent:t,integerLen:o}}(n);d&&(C=function Ds(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(C));let A=e.minInt,N=e.minFrac,H=e.maxFrac;if(u){const Nt=u.match(nt);if(null===Nt)throw new Error(`${u} is not a valid digit info`);const Lt=Nt[1],Vt=Nt[3],jt=Nt[5];null!=Lt&&(A=jn(Lt)),null!=Vt&&(N=jn(Vt)),null!=jt?H=jn(jt):null!=Vt&&N>H&&(H=N)}!function Ui(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,o=r.length-n.integerLen;const u=Math.min(Math.max(e,o),t);let d=u+n.integerLen,g=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let N=d;N<r.length;N++)r[N]=0}else{o=Math.max(0,o),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let N=1;N<d;N++)r[N]=0}if(g>=5)if(d-1<0){for(let N=0;N>d;N--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;o<Math.max(0,u);o++)r.push(0);let v=0!==u;const C=e+n.integerLen,A=r.reduceRight(function(N,H,Z,te){return te[Z]=(H+=N)<10?H:H-10,v&&(0===te[Z]&&Z>=C?te.pop():v=!1),H>=10?1:0},0);A&&(r.unshift(A),n.integerLen++)}(C,N,H);let Z=C.digits,te=C.integerLen;const Fe=C.exponent;let Ve=[];for(v=Z.every(Nt=>!Nt);te<A;te++)Z.unshift(0);for(;te<0;te++)Z.unshift(0);te>0?Ve=Z.splice(te,Z.length):(Ve=Z,Z=[0]);const ut=[];for(Z.length>=e.lgSize&&ut.unshift(Z.splice(-e.lgSize,Z.length).join(""));Z.length>e.gSize;)ut.unshift(Z.splice(-e.gSize,Z.length).join(""));Z.length&&ut.unshift(Z.join("")),g=ut.join(Pt(t,r)),Ve.length&&(g+=Pt(t,o)+Ve.join("")),Fe&&(g+=Pt(t,se.Exponential)+"+"+Fe)}else g=Pt(t,se.Infinity);return g=n<0&&!v?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,d,e,se.CurrencyGroup,se.CurrencyDecimal,o).replace("\xa4",t).replace("\xa4","").trim()}function jn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ba(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}class bs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),Ts(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ts(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ts(n,e){n.context.$implicit=e.item}let Dn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Md,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Md{constructor(){this.$implicit=null,this.ngIf=null}}function Zn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}function Zr(n,e){return new l.vHH(2100,!1)}let Jo=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,o="symbol",u,d){if(!function $a(n){return!(null==n||""===n||n!=n)}(t))return null;d=d||this._locale,"boolean"==typeof o&&(o=o?"symbol":"code");let g=r||this._defaultCurrencyCode;"code"!==o&&(g="symbol"===o||"symbol-narrow"===o?function Bn(n,e,t="en"){const r=function ki(n){return(0,l.cg1)(n)[l.wAp.Currencies]}(t)[n]||re[n]||[],o=r[1];return"narrow"===e&&"string"==typeof o?o:r[0]||n}(g,"symbol"===o?"wide":"narrow",d):o);try{return Is(function Cu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),d,g,r,u)}catch(v){throw Zr()}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.soG,16),l.Y36(l.EJc,16))},n.\u0275pipe=l.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let bu=(()=>{class n{transform(t,r,o){if(null==t)return null;if(!this.supports(t))throw Zr();return t.slice(r,o)}supports(t){return"string"==typeof t||Array.isArray(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=l.Yjl({name:"slice",type:n,pure:!1,standalone:!0}),n})(),Rd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function to(n){return"server"===n}let $c=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Nd((0,l.LFG)(de),window)}),n})();class Nd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function dr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=li(this.window.history)||li(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function li(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs{}class ns extends class qc extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){B||(B=n)}(new ns)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zc(){return rs=rs||document.querySelector("base"),rs?rs.getAttribute("href"):null}();return null==t?null:function zi(n){bn=bn||document.createElement("a"),bn.setAttribute("href",n);const e=bn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ba(document.cookie,e)}}let bn,rs=null;const Tn=new l.OlP("TRANSITION_ID"),Nu=[{provide:l.ip1,useFactory:function Kc(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Tn,de,l.zs3],multi:!0}];let Ou=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=new l.OlP("EventManagerPlugins");let ku=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Pu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Wa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let uo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),co=(()=>{class n extends uo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Yc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Yc))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Yc(n){O().remove(n)}const Ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qc=/%COMP%/g;function Za(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Za(n,o,t):(o=o.replace(Qc,n),t.push(o))}return t}function Ka(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ya=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Wi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Xc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case l.ifc.ShadowDom:return new Bd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Za(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ku),l.LFG(co),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Wi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ns[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(da(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(da(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Ns[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Ns[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,o&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ka(r)):this.eventManager.addEventListener(e,t,Ka(r))}}function da(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xc extends Wi{constructor(e,t,r,o){super(e),this.component=r;const u=Za(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Nn(n){return"_ngcontent-%COMP%".replace(Qc,n)}(o+"-"+r.id),this.hostAttr=function qa(n){return"_nghost-%COMP%".replace(Qc,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Bd extends Wi{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Za(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Qn=(()=>{class n extends Wa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const jd=["alt","control","meta","shift"],is={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ha=(()=>{class n extends Wa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),jd.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=d,v}static matchEventFullKeyCode(t,r){let o=is[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),jd.forEach(d=>{d!==o&&(0,Vu[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const fa=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function tl(){ns.makeCurrent()},multi:!0},{provide:de,useFactory:function Uu(){return(0,l.RDi)(document),document},deps:[]}]),Os=new l.OlP(""),pa=[{provide:l.rWj,useClass:class Vd{addToWindow(e){l.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const o=l.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(v){d=d||v,u--,0==u&&r(d)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],ho=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function qi(){return new l.qLn},deps:[]},{provide:Pu,useClass:Qn,multi:!0,deps:[de,l.R0b,l.Lbi]},{provide:Pu,useClass:ha,multi:!0,deps:[de]},{provide:Ya,useClass:Ya,deps:[ku,co,l.AFp]},{provide:l.FYo,useExisting:Ya},{provide:uo,useExisting:co},{provide:co,useClass:co,deps:[de]},{provide:ku,useClass:ku,deps:[Pu,l.R0b]},{provide:xs,useClass:Ou,deps:[]},[]];let fo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Tn,useExisting:l.AFp},Nu]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Os,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...ho,...pa],imports:[Rd,l.hGG]}),n})(),Si=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ga(){return new Si((0,l.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Eo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):l.LFG(Wf),r},providedIn:"root"}),n})(),Wf=(()=>{class n extends Eo{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case l.q3G.NONE:return r;case l.q3G.HTML:return(0,l.qzn)(r,"HTML")?(0,l.z3N)(r):(0,l.EiD)(this._doc,String(r)).toString();case l.q3G.STYLE:return(0,l.qzn)(r,"Style")?(0,l.z3N)(r):r;case l.q3G.SCRIPT:if((0,l.qzn)(r,"Script"))return(0,l.z3N)(r);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(r,"URL")?(0,l.z3N)(r):(0,l.mCW)(String(r));case l.q3G.RESOURCE_URL:if((0,l.qzn)(r,"ResourceURL"))return(0,l.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Em(n){return new Wf(n.get(de))}(l.LFG(l.zs3)),r},providedIn:"root"}),n})();var Mi=k(7669),hn=k(8996);function st(...n){const e=(0,Mi.yG)(n);return(0,hn.D)(n,e)}var Jr=k(9751),an=k(5577),hi=k(576);function fi(n,e){return(0,hi.m)(e)?(0,an.z)(n,e,1):(0,an.z)(n,1)}var Pn=k(4482),Mn=k(5403);function Br(n,e){return(0,Pn.e)((t,r)=>{let o=0;t.subscribe((0,Mn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var yt=k(4004);class il{}class os{}class Ri{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ri?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ri;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ri?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(g=>-1===u.indexOf(g)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Tr{encodeKey(e){return ma(e)}encodeValue(e){return ma(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ni=/%(\d[a-f0-9])/gi,Hu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ma(n){return encodeURIComponent(n).replace(Ni,(e,t)=>Hu[t]??e)}function Do(n){return`${n}`}class Xr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Tr,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $u(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[d,g]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],v=t.get(d)||[];v.push(g),t.set(d,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(Do):[Do(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Xr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Do(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Do(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ya{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Gu(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function va(n){return typeof Blob<"u"&&n instanceof Blob}function _a(n){return typeof FormData<"u"&&n instanceof FormData}class Ar{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function qf(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ri),this.context||(this.context=new ya),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+d}}else this.params=new Xr,this.urlWithParams=t}serializeBody(){return null===this.body?null:Gu(this.body)||va(this.body)||_a(this.body)||function tu(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_a(this.body)?null:va(this.body)?this.body.type||null:Gu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,C=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((N,H)=>N.set(H,e.setHeaders[H]),v)),e.setParams&&(C=Object.keys(e.setParams).reduce((N,H)=>N.set(H,e.setParams[H]),C)),new Ar(t,r,u,{params:C,headers:v,context:A,reportProgress:g,responseType:o,withCredentials:d})}}var An=(()=>((An=An||{})[An.Sent=0]="Sent",An[An.UploadProgress=1]="UploadProgress",An[An.ResponseHeader=2]="ResponseHeader",An[An.DownloadProgress=3]="DownloadProgress",An[An.Response=4]="Response",An[An.User=5]="User",An))();class as{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ri,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wa extends as{constructor(e={}){super(e),this.type=An.ResponseHeader}clone(e={}){return new wa({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ei extends as{constructor(e={}){super(e),this.type=An.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ei({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class al extends as{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function pi(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ia=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof Ar)u=t;else{let v,C;v=o.headers instanceof Ri?o.headers:new Ri(o.headers),o.params&&(C=o.params instanceof Xr?o.params:new Xr({fromObject:o.params})),u=new Ar(t,r,void 0!==o.body?o.body:null,{headers:v,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=st(u).pipe(fi(v=>this.handler.handle(v)));if(t instanceof Ar||"events"===o.observe)return d;const g=d.pipe(Br(v=>v instanceof ei));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,yt.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return g.pipe((0,yt.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return g.pipe((0,yt.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return g.pipe((0,yt.U)(v=>v.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Xr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,pi(o,r))}post(t,r,o={}){return this.request("POST",t,pi(o,r))}put(t,r,o={}){return this.request("PUT",t,pi(o,r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(il))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ks{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const zu=new l.OlP("HTTP_INTERCEPTORS");let Hn=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ze=/^\)\]\}',?\n/;let Mt=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Jr.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((Z,te)=>o.setRequestHeader(Z,te.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Z=t.detectContentTypeHeader();null!==Z&&o.setRequestHeader("Content-Type",Z)}if(t.responseType){const Z=t.responseType.toLowerCase();o.responseType="json"!==Z?Z:"text"}const u=t.serializeBody();let d=null;const g=()=>{if(null!==d)return d;const Z=o.statusText||"OK",te=new Ri(o.getAllResponseHeaders()),Fe=function ht(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return d=new wa({headers:te,status:o.status,statusText:Z,url:Fe}),d},v=()=>{let{headers:Z,status:te,statusText:Fe,url:Ve}=g(),ut=null;204!==te&&(ut=typeof o.response>"u"?o.responseText:o.response),0===te&&(te=ut?200:0);let Nt=te>=200&&te<300;if("json"===t.responseType&&"string"==typeof ut){const Lt=ut;ut=ut.replace(ze,"");try{ut=""!==ut?JSON.parse(ut):null}catch(Vt){ut=Lt,Nt&&(Nt=!1,ut={error:Vt,text:ut})}}Nt?(r.next(new ei({body:ut,headers:Z,status:te,statusText:Fe,url:Ve||void 0})),r.complete()):r.error(new al({error:ut,headers:Z,status:te,statusText:Fe,url:Ve||void 0}))},C=Z=>{const{url:te}=g(),Fe=new al({error:Z,status:o.status||0,statusText:o.statusText||"Unknown Error",url:te||void 0});r.error(Fe)};let A=!1;const N=Z=>{A||(r.next(g()),A=!0);let te={type:An.DownloadProgress,loaded:Z.loaded};Z.lengthComputable&&(te.total=Z.total),"text"===t.responseType&&!!o.responseText&&(te.partialText=o.responseText),r.next(te)},H=Z=>{let te={type:An.UploadProgress,loaded:Z.loaded};Z.lengthComputable&&(te.total=Z.total),r.next(te)};return o.addEventListener("load",v),o.addEventListener("error",C),o.addEventListener("timeout",C),o.addEventListener("abort",C),t.reportProgress&&(o.addEventListener("progress",N),null!==u&&o.upload&&o.upload.addEventListener("progress",H)),o.send(u),r.next({type:An.Sent}),()=>{o.removeEventListener("error",C),o.removeEventListener("abort",C),o.removeEventListener("load",v),o.removeEventListener("timeout",C),t.reportProgress&&(o.removeEventListener("progress",N),null!==u&&o.upload&&o.upload.removeEventListener("progress",H)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Rt=new l.OlP("XSRF_COOKIE_NAME"),ft=new l.OlP("XSRF_HEADER_NAME");class kn{}let gr=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ba(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de),l.LFG(l.Lbi),l.LFG(Rt))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Fs=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(kn),l.LFG(ft))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ea=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(zu,[]);this.chain=r.reduceRight((o,u)=>new ks(o,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(os),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),qu=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Fs,useClass:Hn}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Rt,useValue:t.cookieName}:[],t.headerName?{provide:ft,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Fs,{provide:zu,useExisting:Fs,multi:!0},{provide:kn,useClass:gr},{provide:Rt,useValue:"XSRF-TOKEN"},{provide:ft,useValue:"X-XSRF-TOKEN"}]}),n})(),nu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ia,{provide:il,useClass:Ea},Mt,{provide:os,useExisting:Mt}],imports:[qu.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const{isArray:Zd}=Array,{getPrototypeOf:Dm,prototype:Zf,keys:Cm}=Object;function bo(n){if(1===n.length){const e=n[0];if(Zd(e))return{args:e,keys:null};if(function Kf(n){return n&&"object"==typeof n&&Dm(n)===Zf}(e)){const t=Cm(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ul=k(8421);const{isArray:Yf}=Array;function Kd(n){return(0,yt.U)(e=>function p0(n,e){return Yf(e)?n(...e):n(e)}(n,e))}function bm(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Qf=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),us=(()=>{class n extends Qf{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const mi=new l.OlP("NgValueAccessor"),Tm={provide:mi,useExisting:(0,l.Gpc)(()=>To),multi:!0},Sm=new l.OlP("CompositionEventMode");let To=(()=>{class n extends Qf{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Am(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Sm,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[l._Bn([Tm]),l.qOj]}),n})();const ur=new l.OlP("NgValidators"),ti=new l.OlP("NgAsyncValidators");function cl(n){return function Us(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function ll(n){return null}function tp(n){return null!=n}function np(n){return(0,l.QGY)(n)?(0,hn.D)(n):n}function dl(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function rp(n,e){return e.map(t=>t(n))}function _(n){return n.map(e=>function xm(n){return!n.validate}(e)?e:t=>e.validate(t))}function m(n){return null!=n?function p(n){if(!n)return null;const e=n.filter(tp);return 0==e.length?null:function(t){return dl(rp(t,e))}}(_(n)):null}function S(n){return null!=n?function I(n){if(!n)return null;const e=n.filter(tp);return 0==e.length?null:function(t){return function Yd(...n){const e=(0,Mi.jO)(n),{args:t,keys:r}=bo(n),o=new Jr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let v=d,C=d;for(let A=0;A<d;A++){let N=!1;(0,ul.Xf)(t[A]).subscribe((0,Mn.x)(u,H=>{N||(N=!0,C--),g[A]=H},()=>v--,void 0,()=>{(!v||!N)&&(C||u.next(r?bm(r,g):g),u.complete())}))}});return e?o.pipe(Kd(e)):o}(rp(t,e).map(np)).pipe((0,yt.U)(dl))}}(_(n)):null}function P(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function X(n){return n._rawValidators}function Ce(n){return n._rawAsyncValidators}function et(n){return n?Array.isArray(n)?n:[n]:[]}function pt(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ht(n,e){const t=et(e);return et(n).forEach(o=>{pt(t,o)||t.push(o)}),t}function In(n,e){return et(e).filter(t=>!pt(n,t))}class yi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=m(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=S(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Jn extends yi{get formDirective(){return null}get path(){return null}}class ls extends yi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hl{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let fl=(()=>{class n extends hl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ls,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),n})(),ru=(()=>{class n extends hl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Jn,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]}),n})();const Yu="VALID",rh="INVALID",Qu="PENDING",gl="DISABLED";function Om(n){return(km(n)?n.validators:n)||null}function Pm(n){return Array.isArray(n)?m(n):n||null}function sp(n,e){return(km(e)?e.asyncValidators:n)||null}function op(n){return Array.isArray(n)?S(n):n||null}function km(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Fm{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Pm(this._rawValidators),this._composedAsyncValidatorFn=op(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yu}get invalid(){return this.status===rh}get pending(){return this.status==Qu}get disabled(){return this.status===gl}get enabled(){return this.status!==gl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Pm(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=op(e)}addValidators(e){this.setValidators(Ht(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ht(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(In(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(In(e,this._rawAsyncValidators))}hasValidator(e){return pt(this._rawValidators,e)}hasAsyncValidator(e){return pt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yu,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yu||this.status===Qu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gl:Yu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qu,this._hasOwnPendingAsyncValidator=!0;const t=np(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?gl:this.errors?rh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qu)?Qu:this._anyControlsHaveStatus(rh)?rh:Yu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){km(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class ml extends Fm{constructor(e,t,r){super(Om(t),sp(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function ap(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new l.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function v0(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[t])throw new l.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Ju(n,e){ih(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function kD(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ec(n,e)})}(n,e),function FD(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function w0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ec(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function _0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Xu(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),cp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ih(n,e){const t=X(n);null!==e.validator?n.setValidators(P(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ce(n);null!==e.asyncValidator?n.setAsyncValidators(P(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();xo(e._rawValidators,o),xo(e._rawAsyncValidators,o)}function cp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=X(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Ce(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return xo(e._rawValidators,r),xo(e._rawAsyncValidators,r),t}function ec(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function I0(n,e){ih(n,e)}function UD(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const vl={provide:Jn,useExisting:(0,l.Gpc)(()=>lp)},Ca=(()=>Promise.resolve())();let lp=(()=>{class n extends Jn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new ml({},m(t),S(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ca.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ju(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ca.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ca.then(()=>{const r=this._findContainer(t.path),o=new ml({});I0(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ca.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ca.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,UD(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ur,10),l.Y36(ti,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([vl]),l.qOj]}),n})();function BD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function $m(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _l=class extends Fm{constructor(e=null,t,r){super(Om(t),sp(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),km(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=$m(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){$m(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let zm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Wm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const oh=new l.OlP("NgModelWithFormControlWarning"),ah={provide:Jn,useExisting:(0,l.Gpc)(()=>uh)};let uh=(()=>{class n extends Jn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ju(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Xu(t.control||null,t,!1),function sh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,UD(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Xu(r||null,t),(n=>n instanceof _l)(o)&&(Ju(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);I0(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function LD(n,e){return cp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ih(this.form,this),this._oldForm&&cp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ur,10),l.Y36(ti,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([ah]),l.qOj,l.TTD]}),n})();const ZD={provide:ls,useExisting:(0,l.Gpc)(()=>fp)};let fp=(()=>{class n extends ls{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function jm(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===To?t=u:function D0(n){return Object.getPrototypeOf(n.constructor)===us}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Bm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function up(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(Jn,13),l.Y36(ur,10),l.Y36(ti,10),l.Y36(mi,10),l.Y36(oh,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([ZD]),l.qOj,l.TTD]}),n})(),su=(()=>{class n{constructor(){this._validator=ll}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ll,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const k0={provide:ur,useExisting:(0,l.Gpc)(()=>Il),multi:!0};let Il=(()=>{class n extends su{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=t=>cl}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([k0]),l.qOj]}),n})(),rC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Wm]}),n})(),Ro=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[rC]}),n})(),ty=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:oh,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[rC]}),n})();var mr=k(7579);class ds extends mr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ba=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var tc=k(4671),j0=k(9672);function $0(...n){const e=(0,Mi.yG)(n),t=(0,Mi.jO)(n),{args:r,keys:o}=bo(n);if(0===r.length)return(0,hn.D)([],e);const u=new Jr.y(function ry(n,e,t=tc.y){return r=>{H0(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let v=0;v<o;v++)H0(e,()=>{const C=(0,hn.D)(n[v],e);let A=!1;C.subscribe((0,Mn.x)(r,N=>{u[v]=N,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>bm(o,d):tc.y));return t?u.pipe(Kd(t)):u}function H0(n,e,t){n?(0,j0.f)(t,n,e):e()}var ch=k(8189);function iy(...n){return function sC(){return(0,ch.J)(1)}()((0,hn.D)(n,(0,Mi.yG)(n)))}function G0(n){return new Jr.y(e=>{(0,ul.Xf)(n()).subscribe(e)})}var oC=k(9635);function Dl(n,e){const t=(0,hi.m)(n)?n:()=>n,r=o=>o.error(t());return new Jr.y(e?o=>e.schedule(r,0,o):r)}var Ta=k(515),sy=k(727);function lh(){return(0,Pn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class z0 extends Jr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new sy.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=sy.w0.EMPTY)}return e}refCount(){return lh()(this)}}function Sr(n,e){return(0,Pn.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,Mn.x)(r,v=>{o?.unsubscribe();let C=0;const A=u++;(0,ul.Xf)(n(v,A)).subscribe(o=(0,Mn.x)(r,N=>r.next(e?e(v,N,A,C++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}function Cl(n){return n<=0?()=>Ta.E:(0,Pn.e)((e,t)=>{let r=0;e.subscribe((0,Mn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function dh(...n){const e=(0,Mi.yG)(n);return(0,Pn.e)((t,r)=>{(e?iy(n,t,e):iy(n,t)).subscribe(r)})}function No(n){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,Mn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function oy(n=W0){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,Mn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function W0(){return new ba}function Aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((o,u)=>n(o,u,r)):tc.y,Cl(1),t?No(e):oy(()=>new ba))}var _i=k(8505);function Bs(n){return(0,Pn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Mn.x)(t,void 0,void 0,d=>{u=(0,ul.Xf)(n(d,Bs(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function aC(n,e,t,r,o){return(u,d)=>{let g=t,v=e,C=0;u.subscribe((0,Mn.x)(d,A=>{const N=C++;v=g?n(v,A,N):(g=!0,A),r&&d.next(v)},o&&(()=>{g&&d.next(v),d.complete()})))}}function bl(n,e){return(0,Pn.e)(aC(n,e,arguments.length>=2,!0))}function mp(n){return n<=0?()=>Ta.E:(0,Pn.e)((e,t)=>{let r=[];e.subscribe((0,Mn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ay(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((o,u)=>n(o,u,r)):tc.y,mp(1),t?No(e):oy(()=>new ba))}function Tl(n){return(0,Pn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Al=Symbol("RouteTitle");class cy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nc(n){return new cy(n)}function ly(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Oo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!dy(n[o],e[o]))return!1;return!0}function dy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Z0(n){return Array.prototype.concat.apply([],n)}function K0(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Sa(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,hn.D)(Promise.resolve(n)):st(n)}const cC={exact:function hs(n,e,t){if(!ic(n.segments,e.segments)||!yp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hs(n.children[r],e.children[r],t))return!1;return!0},subset:fy},hy={exact:function lC(n,e){return Oo(n,e)},subset:function dC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dy(n[t],e[t]))},ignored:()=>!0};function J0(n,e,t){return cC[t.paths](n.root,e.root,t.matrixParams)&&hy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fy(n,e,t){return X0(n,e,e.segments,t)}function X0(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ic(o,t)||e.hasChildren()||!yp(o,t,r))}if(n.segments.length===t.length){if(!ic(n.segments,t)||!yp(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!fy(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ic(n.segments,o)&&yp(n.segments,o,r)&&n.children[Gt])&&X0(n.children[Gt],e,u,r)}}function yp(n,e,t){return e.every((r,o)=>hy[t](n[o].parameters,r.parameters))}class rc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nc(this.queryParams)),this._queryParamMap}toString(){return ew.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fh(this)}}class Sl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nc(this.parameters)),this._parameterMap}toString(){return gC(this)}}function ic(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let kt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new vp},providedIn:"root"}),n})();class vp{parse(e){const t=new rx(e);return new rc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ph(e.root,!0)}`,r=function iw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${gh(t)}=${gh(o)}`).join("&"):`${gh(t)}=${gh(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function pC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ew=new vp;function fh(n){return n.segments.map(e=>gC(e)).join("/")}function ph(n,e){if(!n.hasChildren())return fh(n);if(e){const t=n.children[Gt]?ph(n.children[Gt],!1):"",r=[];return yr(n.children,(o,u)=>{u!==Gt&&r.push(`${u}:${ph(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fC(n,e){let t=[];return yr(n.children,(r,o)=>{o===Gt&&(t=t.concat(e(r,o)))}),yr(n.children,(r,o)=>{o!==Gt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Gt?[ph(n.children[Gt],!1)]:[`${o}:${ph(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${fh(n)}/${t[0]}`:`${fh(n)}/(${t.join("//")})`}}function tw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gh(n){return tw(n).replace(/%3B/gi,";")}function _p(n){return tw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wp(n){return decodeURIComponent(n)}function nw(n){return wp(n.replace(/\+/g,"%20"))}function gC(n){return`${_p(n.path)}${function rw(n){return Object.keys(n).map(e=>`;${_p(e)}=${_p(n[e])}`).join("")}(n.parameters)}`}const sc=/^[^\/()?;=#]+/;function Ip(n){const e=n.match(sc);return e?e[0]:""}const py=/^[^=?&#]+/,mC=/^[^&#]+/;class rx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new Yt(e,t)),r}parseSegment(){const e=Ip(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new Sl(wp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ip(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ip(this.remaining);o&&(r=o,this.capture(r))}e[wp(t)]=wp(r)}parseQueryParam(e){const t=function gy(n){const e=n.match(py);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function nx(n){const e=n.match(mC);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=nw(t),u=nw(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ip(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new l.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Gt]:new Yt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function sw(n){return n.segments.length>0?new Yt([],{[Gt]:n}):n}function Ep(n){const e={};for(const r of Object.keys(n.children)){const u=Ep(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ow(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function xl(n){return n instanceof rc}function Dp(n,e,t,r,o){if(0===t.length)return Rl(e.root,e.root,e.root,r,o);const u=function lw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cw(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return yr(u.outlets,(v,C)=>{g[C]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new cw(t,e,r)}(t);return u.toRoot()?Rl(e.root,e.root,new Yt([],{}),r,o):function d(v){const C=function vC(n,e,t,r){if(n.isAbsolute)return new Nl(e.root,!0,0);if(-1===r)return new Nl(t,t===e.root,0);return function yy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new l.vHH(4005,!1);o=r.segments.length}return new Nl(r,!1,o-u)}(t,r+(yh(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=C.processChildren?Cp(C.segmentGroup,C.index,u.commands):vh(C.segmentGroup,C.index,u.commands);return Rl(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function yh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ml(n){return"object"==typeof n&&null!=n&&n.outlets}function Rl(n,e,t,r,o){let d,u={};r&&yr(r,(v,C)=>{u[C]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),d=n===e?t:uw(n,e,t);const g=sw(Ep(d));return new rc(g,u,o)}function uw(n,e,t){const r={};return yr(n.children,(o,u)=>{r[u]=o===e?t:uw(o,e,t)}),new Yt(n.segments,r)}class cw{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yh(r[0]))throw new l.vHH(4003,!1);const o=r.find(Ml);if(o&&o!==K0(r))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vh(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return Cp(n,e,t);const r=function vy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(Ml(g))break;const v=`${g}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&C&&"object"==typeof C&&void 0===C.outlets){if(!wy(v,C,d))return u;r+=2}else{if(!wy(v,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Yt(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new Yt(n.segments.slice(r.pathIndex),n.children),Cp(u,0,o)}return r.match&&0===o.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?_y(n,e,t):r.match?Cp(n,0,o):_y(n,e,t)}function Cp(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function hw(n){return Ml(n[0])?n[0].outlets:{[Gt]:n}}(t),o={};return yr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=vh(n.children[d],e,u))}),yr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Yt(n.segments,o)}}function _y(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Ml(u)){const v=ix(u.outlets);return new Yt(r,v)}if(0===o&&yh(t[0])){r.push(new Sl(n.segments[e].path,oc(t[0]))),o++;continue}const d=Ml(u)?u.outlets[Gt]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&yh(g)?(r.push(new Sl(d,oc(g))),o+=2):(r.push(new Sl(d,{})),o++)}return new Yt(r,{})}function ix(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_y(new Yt([],{}),0,t))}),e}function oc(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function wy(n,e,t){return n==t.path&&Oo(e,t.parameters)}class Po{constructor(e,t){this.id=e,this.url=t}}class Ol extends Po{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $r extends Po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _h extends Po{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fw extends Po{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Iy extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xa extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ey extends Po{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pw extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dy extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sx{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ox{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cy{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ap{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _C{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ty(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ty(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ay(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ay(e,this._root).map(t=>t.value)}}function Ty(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ty(n,t);if(r)return r}return null}function Ay(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ay(n,t);if(r.length)return r.unshift(e),r}return[]}class Ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Sy extends _C{constructor(e,t){super(e),this.snapshot=t,yw(this,e)}toString(){return this.snapshot.toString()}}function wC(n,e){const t=function IC(n,e){const d=new Sp([],{},{},"",{},Gt,e,null,n.root,-1,{});return new xp("",new Ma(d,[]))}(n,e),r=new ds([new Sl("",{})]),o=new ds({}),u=new ds({}),d=new ds({}),g=new ds(""),v=new kl(r,o,d,g,u,Gt,e,t.root);return v.snapshot=t.root,new Sy(new Ma(v,[]),t)}class kl{constructor(e,t,r,o,u,d,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.pipe((0,yt.U)(C=>C[Al]))??st(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>nc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>nc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function mw(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Sp{constructor(e,t,r,o,u,d,g,v,C,A,N,H){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.[Al],this.routeConfig=v,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=H??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xp extends _C{constructor(e,t){super(t),this.url=e,yw(this,t)}toString(){return EC(this._root)}}function yw(n,e){e.value._routerState=n,e.children.forEach(t=>yw(n,t))}function EC(n){const e=n.children.length>0?` { ${n.children.map(EC).join(", ")} } `:"";return`${n.value}${e}`}function vw(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Oo(e.params,t.params)||n.params.next(t.params),function hh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Oo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _w(n,e){const t=Oo(n.params,e.params)&&function hC(n,e){return ic(n,e)&&n.every((t,r)=>Oo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_w(n.parent,e.parent))}function Mp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function ux(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Mp(n,r,o);return Mp(n,r)})}(n,e,t);return new Ma(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>Mp(n,g)),d}}const r=function cx(n){return new kl(new ds(n.url),new ds(n.params),new ds(n.queryParams),new ds(n.fragment),new ds(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Mp(n,u));return new Ma(r,o)}}const ww="ngNavigationCancelingError";function DC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=xl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Ra(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Ra(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ww]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Rp(n){return Iw(n)&&xl(n.url)}function Iw(n){return n&&n[ww]}class Ew{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ac,this.attachRef=null}}let ac=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ew,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wh=!1;let Ih=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=o||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,wh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,wh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,wh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,wh);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new CC(t,g,o.injector);if(r&&function ou(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,v)}else this.activated=o.createComponent(d,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ac),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class CC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===kl?this.route:e===ac?this.childContexts:this.parent.get(e,t)}}let Np=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[Ih],encapsulation:2}),n})();function Dw(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Eh(n){const e=n.children&&n.children.map(Eh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=Np),t}function wi(n){return n.outlet||Gt}function Ry(n,e){const t=n.filter(r=>wi(r)===e);return t.push(...n.filter(r=>wi(r)!==e)),t}function Ul(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Oy{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Pl(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),yr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Pl(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Pl(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Pl(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Cy(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bp(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(vw(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),vw(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=Ul(o.snapshot),v=g?.get(l._Vd)??null;d.attachRef=null,d.route=o,d.resolver=v,d.injector=g,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Py{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bl{constructor(e,t){this.component=e,this.route=t}}function TC(n,e,t){const r=n._root;return $l(r,e?e._root:null,t,[r.value])}function jl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function $l(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Pl(e);return n.children.forEach(d=>{(function AC(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function Cw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ic(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ic(n.url,e.url)||!Oo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_w(n,e)||!Oo(n.queryParams,e.queryParams);default:return!_w(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new Py(r)):(u.data=d.data,u._resolvedData=d._resolvedData),$l(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new Bl(g.outlet.component,d))}else d&&Hl(e,g,o),o.canActivateChecks.push(new Py(r)),$l(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),yr(u,(d,g)=>Hl(d,t.getContext(g),o)),o}function Hl(n,e,t){const r=Pl(n),o=n.value;yr(r,(u,d)=>{Hl(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Bl(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Dh(n){return"function"==typeof n}function Fy(n){return n instanceof ba||"EmptyError"===n?.name}const Op=Symbol("INITIAL_VALUE");function uc(){return Sr(n=>$0(n.map(e=>e.pipe(Cl(1),dh(Op)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===Op)return Op;if(!1===t||t instanceof rc)return t}return!0}),Br(e=>e!==Op),Cl(1)))}function xw(n){return(0,oC.z)((0,_i.b)(e=>{if(xl(e))throw DC(0,e)}),(0,yt.U)(e=>!0===e))}const Mw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vy(n,e,t,r,o){const u=Uy(n,e,t);return u.matched?function FC(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?st(o.map(d=>{const g=jl(d,n);return Sa(function ky(n){return n&&Dh(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(uc(),xw()):st(!0)}(r=Dw(e,r),e,t).pipe((0,yt.U)(d=>!0===d?u:{...Mw})):st(u)}function Uy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Mw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||ly)(t,n,e);if(!o)return{...Mw};const u={};yr(o.posParams,(g,v)=>{u[v]=g.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Pp(n,e,t,r,o="corrected"){if(t.length>0&&function VC(n,e,t){return t.some(r=>cc(n,e,r)&&wi(r)!==Gt)}(n,t,r)){const d=new Yt(e,function By(n,e,t,r){const o={};o[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&wi(u)!==Gt){const d=new Yt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[wi(u)]=d}return o}(n,e,r,new Yt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function UC(n,e,t){return t.some(r=>cc(n,e,r))}(n,t,r)){const d=new Yt(n.segments,function LC(n,e,t,r,o,u){const d={};for(const g of r)if(cc(n,t,g)&&!o[wi(g)]){const v=new Yt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[wi(g)]=v}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Yt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function cc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kp(n,e,t,r){return!!(wi(n)===r||r!==Gt&&cc(e,t,n))&&("**"===n.path||Uy(e,n,t).matched)}function Ch(n,e,t){return 0===e.length&&!n.children[t]}const jy=!1;class Gl{constructor(e){this.segmentGroup=e||null}}class BC{constructor(e){this.urlTree=e}}function zl(n){return Dl(new Gl(n))}function $y(n){return Dl(new BC(n))}class Na{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Pp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,yt.U)(u=>this.createUrlTree(Ep(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(u=>{if(u instanceof BC)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Gl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,yt.U)(o=>this.createUrlTree(Ep(o),e.queryParams,e.fragment))).pipe(Bs(o=>{throw o instanceof Gl?this.noMatchError(o):o}))}noMatchError(e){return new l.vHH(4002,jy)}createUrlTree(e,t,r){const o=sw(e);return new rc(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(u=>new Yt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,hn.D)(o).pipe(fi(u=>{const d=r.children[u],g=Ry(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,yt.U)(v=>({segment:v,outlet:u})))}),bl((u,d)=>(u[d.outlet]=d.segment,u),{}),ay())}expandSegment(e,t,r,o,u,d){return(0,hn.D)(r).pipe(fi(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(Bs(C=>{if(C instanceof Gl)return st(null);throw C}))),Aa(g=>!!g),Bs((g,v)=>{if(Fy(g))return Ch(t,o,u)?st(new Yt([],{})):zl(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return kp(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):zl(t):zl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$y(u):this.lineralizeSegments(r,u).pipe((0,an.z)(d=>{const g=new Yt(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:v,remainingSegments:C,positionalParamSegments:A}=Uy(t,o,u);if(!g)return zl(t);const N=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?$y(N):this.lineralizeSegments(o,N).pipe((0,an.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=Dw(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,yt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Yt(o,{})))):st(new Yt(o,{}))):Vy(t,r,o,e).pipe(Sr(({matched:d,consumedSegments:g,remainingSegments:v})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,an.z)(A=>{const N=A.injector??e,H=A.routes,{segmentGroup:Z,slicedSegments:te}=Pp(t,g,v,H),Fe=new Yt(Z.segments,Z.children);if(0===te.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,yt.U)(Lt=>new Yt(g,Lt)));if(0===H.length&&0===te.length)return st(new Yt(g,{}));const Ve=wi(r)===u;return this.expandSegment(N,Fe,H,te,Ve?Gt:u,!0).pipe((0,yt.U)(Nt=>new Yt(g.concat(Nt.segments),Nt.children)))})):zl(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ly(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?st(!0):st(o.map(d=>{const g=jl(d,n);return Sa(function bw(n){return n&&Dh(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(uc(),xw())}(e,t,r).pipe((0,an.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,_i.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Nw(n){return Dl(Ra(jy,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return st(r);if(o.numberOfChildren>1||!o.children[Gt])return Dl(new l.vHH(4e3,jy));o=o.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new rc(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return yr(t.children,(g,v)=>{d[v]=this.createSegmentGroup(e,g,r,o)}),new Yt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new l.vHH(4001,jy);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class bh{}class Ow{constructor(e,t,r,o,u,d,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=Pp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,yt.U)(t=>{if(null===t)return null;const r=new Sp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ma(r,t),u=new xp(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=xy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,hn.D)(Object.keys(r.children)).pipe(fi(o=>{const u=r.children[o],d=Ry(t,o);return this.processSegmentGroup(e,d,u,o)}),bl((o,u)=>o&&u?(o.push(...u),o):null),function uy(n,e=!1){return(0,Pn.e)((t,r)=>{let o=0;t.subscribe((0,Mn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),No(null),ay(),(0,yt.U)(o=>{if(null===o)return null;const u=Pw(o);return function $C(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,hn.D)(t).pipe(fi(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),Aa(d=>!!d),Bs(d=>{if(Fy(d))return Ch(r,o,u)?st([]):st(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!kp(t,r,o,u))return st(null);let d;if("**"===t.path){const g=o.length>0?K0(o).parameters:{},v=GC(r)+o.length;d=st({snapshot:new Sp(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lw(t),wi(t),t.component??t._loadedComponent??null,t,kw(r),v,Vw(t),v),consumedSegments:[],remainingSegments:[]})}else d=Vy(r,t,o,e).pipe((0,yt.U)(({matched:g,consumedSegments:v,remainingSegments:C,parameters:A})=>{if(!g)return null;const N=GC(r)+v.length;return{snapshot:new Sp(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lw(t),wi(t),t.component??t._loadedComponent??null,t,kw(r),N,Vw(t),N),consumedSegments:v,remainingSegments:C}}));return d.pipe(Sr(g=>{if(null===g)return st(null);const{snapshot:v,consumedSegments:C,remainingSegments:A}=g;e=t._injector??e;const N=t._loadedInjector??e,H=function HC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:te}=Pp(r,C,A,H.filter(Ve=>void 0===Ve.redirectTo),this.relativeLinkResolution);if(0===te.length&&Z.hasChildren())return this.processChildren(N,H,Z).pipe((0,yt.U)(Ve=>null===Ve?null:[new Ma(v,Ve)]));if(0===H.length&&0===te.length)return st([new Ma(v,[])]);const Fe=wi(t)===u;return this.processSegment(N,H,Z,te,Fe?Gt:u).pipe((0,yt.U)(Ve=>null===Ve?null:[new Ma(v,Ve)]))}))}}function Th(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Pw(n){const e=[],t=new Set;for(const r of n){if(!Th(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Pw(r.children);e.push(new Ma(r.value,o))}return e.filter(r=>!t.has(r))}function kw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function GC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Lw(n){return n.data||{}}function Vw(n){return n.resolve||{}}function Bw(n){return"string"==typeof n.title||null===n.title}function qy(n){return Sr(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,yt.U)(()=>e)):st(e)})}let jw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Al]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)($w)},providedIn:"root"}),n})(),$w=(()=>{class n extends jw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Si))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dc{}class Ah extends class mx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Lp=new l.OlP("",{providedIn:"root",factory:()=>({})}),Ky=new l.OlP("ROUTES");let fs=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Sa(t.loadComponent()).pipe((0,_i.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Tl(()=>{this.componentLoaders.delete(t)})),o=new z0(r,()=>new mr.x).pipe(lh());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,C,A=!1;Array.isArray(g)?C=g:(v=g.create(t).injector,C=Z0(v.get(Ky,[],l.XFs.Self|l.XFs.Optional)));return{routes:C.map(Eh),injector:v}}),Tl(()=>{this.childrenLoaders.delete(r)})),d=new z0(u,()=>new mr.x).pipe(lh());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Sa(t()).pipe((0,an.z)(r=>r instanceof l.YKP||Array.isArray(r)?st(r):(0,hn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Sh{}class ni{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Up(n){throw n}function ps(n,e,t){return e.parse("/")}const Yy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function hc(){const n=(0,l.f3M)(kt),e=(0,l.f3M)(ac),t=(0,l.f3M)(ke),r=(0,l.f3M)(l.zs3),o=(0,l.f3M)(l.Sil),u=(0,l.f3M)(Ky,{optional:!0})??[],d=(0,l.f3M)(Lp,{optional:!0})??{},g=(0,l.f3M)($w),v=(0,l.f3M)(jw,{optional:!0}),C=(0,l.f3M)(Sh,{optional:!0}),A=(0,l.f3M)(dc,{optional:!0}),N=new Fn(null,n,e,t,r,o,Z0(u));return C&&(N.urlHandlingStrategy=C),A&&(N.routeReuseStrategy=A),N.titleStrategy=v??g,function ql(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let Fn=(()=>{class n{constructor(t,r,o,u,d,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mr.x,this.errorHandler=Up,this.malformedUriErrorHandler=ps,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>st(void 0),this.urlHandlingStrategy=new ni,this.routeReuseStrategy=new Ah,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(fs),this.configLoader.onLoadEndListener=H=>this.triggerEvent(new gw(H)),this.configLoader.onLoadStartListener=H=>this.triggerEvent(new sx(H)),this.ngModule=d.get(l.h0i),this.console=d.get(l.c2e);const N=d.get(l.R0b);this.isNgZoneEnabled=N instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Q0(){return new rc(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wC(this.currentUrlTree,this.rootComponentType),this.transitions=new ds({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Br(o=>0!==o.id),(0,yt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Sr(o=>{let u=!1,d=!1;return st(o).pipe((0,_i.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sr(g=>{const v=this.browserUrlTree.toString(),C=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return fc(g.source)&&(this.browserUrlTree=g.extractedUrl),st(g).pipe(Sr(N=>{const H=this.transitions.getValue();return r.next(new Ol(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?Ta.E:Promise.resolve(N)}),function Fp(n,e,t,r){return Sr(o=>function Hy(n,e,t,r,o){return new Na(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,yt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_i.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function Uw(n,e,t,r,o,u){return(0,an.z)(d=>function Gy(n,e,t,r,o,u,d="emptyOnly",g="legacy"){return new Ow(n,e,t,r,o,d,g,u).recognize().pipe(Sr(v=>null===v?function jC(n){return new Jr.y(e=>e.error(n))}(new bh):st(v)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,yt.U)(g=>({...d,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_i.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Z,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new Iy(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Z,source:te,restoredState:Fe,extras:Ve}=g,ut=new Ol(H,this.serializeUrl(Z),te,Fe);r.next(ut);const Nt=wC(Z,this.rootComponentType).snapshot;return st(o={...g,targetSnapshot:Nt,urlAfterRedirects:Z,extras:{...Ve,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Ta.E}),(0,_i.b)(g=>{const v=new xa(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,yt.U)(g=>o={...g,guards:TC(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function NC(n,e){return(0,an.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?st({...t,guardsResult:!0}):function Tw(n,e,t,r){return(0,hn.D)(n).pipe((0,an.z)(o=>function ko(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(g=>{const v=Ul(e)??o,C=jl(g,v);return Sa(function xC(n){return n&&Dh(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):v.runInContext(()=>C(n,e,t,r))).pipe(Aa())})).pipe(uc()):st(!0)}(o.component,o.route,t,e,r)),Aa(o=>!0!==o,!0))}(d,r,o,n).pipe((0,an.z)(g=>g&&function Zi(n){return"boolean"==typeof n}(g)?function OC(n,e,t,r){return(0,hn.D)(e).pipe(fi(o=>iy(function Aw(n,e){return null!==n&&e&&e(new ox(n)),st(!0)}(o.route.parent,r),function PC(n,e){return null!==n&&e&&e(new Tp(n)),st(!0)}(o.route,r),function kC(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function fx(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>G0(()=>st(d.guards.map(v=>{const C=Ul(d.node)??t,A=jl(v,C);return Sa(function px(n){return n&&Dh(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(Aa())})).pipe(uc())));return st(u).pipe(uc())}(n,o.path,t),function Sw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const o=r.map(u=>G0(()=>{const d=Ul(e)??t,g=jl(u,d);return Sa(function SC(n){return n&&Dh(n.canActivate)}(g)?g.canActivate(e,n):d.runInContext(()=>g(e,n))).pipe(Aa())}));return st(o).pipe(uc())}(n,o.route,t))),Aa(o=>!0!==o,!0))}(r,u,n,e):st(g)),(0,yt.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,_i.b)(g=>{if(o.guardsResult=g.guardsResult,xl(g.guardsResult))throw DC(0,g.guardsResult);const v=new Ey(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),Br(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),qy(g=>{if(g.guards.canActivateChecks.length)return st(g).pipe((0,_i.b)(v=>{const C=new pw(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(C)}),Sr(v=>{let C=!1;return st(v).pipe(function zy(n,e){return(0,an.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return st(t);let u=0;return(0,hn.D)(o).pipe(fi(d=>function zC(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Bw(o)&&(u[Al]=o.title),function Wy(n,e,t,r){const o=function WC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return st({});const u={};return(0,hn.D)(o).pipe((0,an.z)(d=>function qC(n,e,t,r){const o=Ul(e)??r,u=jl(n,o);return Sa(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Aa(),(0,_i.b)(g=>{u[d]=g}))),mp(1),function q0(n){return(0,yt.U)(()=>n)}(u),Bs(d=>Fy(d)?Ta.E:Dl(d)))}(u,n,e,r).pipe((0,yt.U)(d=>(n._resolvedData=d,n.data=xy(n,t).resolve,o&&Bw(o)&&(n.data[Al]=o.title),null)))}(d.route,r,n,e)),(0,_i.b)(()=>u++),mp(1),(0,an.z)(d=>u===o.length?st(t):Ta.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_i.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,_i.b)(v=>{const C=new Dy(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(C)}))}),qy(g=>{const v=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,_i.b)(N=>{C.component=N}),(0,yt.U)(()=>{})));for(const N of C.children)A.push(...v(N));return A};return $0(v(g.targetSnapshot.root)).pipe(No(),Cl(1))}),qy(()=>this.afterPreactivation()),(0,yt.U)(g=>{const v=function ax(n,e,t){const r=Mp(n,e._root,t?t._root:void 0);return new Sy(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o={...g,targetRouterState:v}}),(0,_i.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new Oy(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,_i.b)({next(){u=!0},complete(){u=!0}}),Tl(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Bs(g=>{if(d=!0,Iw(g)){Rp(g)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new _h(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(v),Rp(g)){const C=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fc(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new fw(o.id,this.serializeUrl(o.extractedUrl),g,o.targetSnapshot??void 0);r.next(v);try{o.resolve(this.errorHandler(g))}catch(C){o.reject(C)}}return Ta.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Eh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:v}=r,C=o||this.routerState.root,A=v?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),Dp(C,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=xl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zl(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...Yy}:!1===r?{...Wl}:r,xl(t))return J0(this.currentUrlTree,t,o);const u=this.parseUrl(t);return J0(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $r(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let g,v,C;d?(g=d.resolve,v=d.reject,C=d.promise):C=new Promise((H,Z)=>{g=H,v=Z});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:v,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(H=>Promise.reject(H))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new _h(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return hc()},providedIn:"root"}),n})();function fc(n){return"imperative"!==n}let Lo=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new mr.x,this.subscription=t.events.subscribe(u=>{u instanceof $r&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Fn),l.Y36(kl),l.Y36(_e))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class Qy{}let Gw=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Br(t=>t instanceof $r),fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,l.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,hn.D)(o).pipe((0,ch.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const u=o.pipe((0,an.z)(d=>null===d?st(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,hn.D)([u,d]).pipe((0,ch.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Fn),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(Qy),l.LFG(fs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bp=new l.OlP("");let Jy=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ol?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $r&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ap&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ap(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Yl(n,e){return{\u0275kind:n,\u0275providers:e}}function jp(n){return[{provide:Ky,multi:!0,useValue:n}]}function Ww(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(Fn),o=n.get($p);1===n.get(Mh)&&r.initialNavigation(),n.get(zp,null,l.XFs.Optional)?.setUpPreloading(),n.get(Bp,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const $p=new l.OlP("",{factory:()=>new mr.x}),Mh=new l.OlP("",{providedIn:"root",factory:()=>1});const zp=new l.OlP("");function XC(n){return Yl(0,[{provide:zp,useExisting:Gw},{provide:Qy,useExisting:n}])}const ev=new l.OlP("ROUTER_FORROOT_GUARD"),tv=[ke,{provide:kt,useClass:vp},{provide:Fn,useFactory:hc},ac,{provide:kl,useFactory:function zw(n){return n.routerState.root},deps:[Fn]},fs];function qw(){return new l.PXZ("Router",Fn)}let nv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tv,[],jp(t),{provide:ev,useFactory:Kw,deps:[[Fn,new l.FiY,new l.tp0]]},{provide:Lp,useValue:r||{}},r?.useHash?{provide:_e,useClass:Ze}:{provide:_e,useClass:Qe},{provide:Bp,useFactory:()=>{const n=(0,l.f3M)(Fn),e=(0,l.f3M)($c),t=(0,l.f3M)(Lp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Jy(n,e,t)}},r?.preloadingStrategy?XC(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:qw},r?.initialNavigation?Yw(r):[],[{provide:iv,useFactory:Ww},{provide:l.tb,multi:!0,useExisting:iv}]]}}static forChild(t){return{ngModule:n,providers:[jp(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ev,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Np]}),n})();function Kw(n){return"guarded"}function Yw(n){return["disabled"===n.initialNavigation?Yl(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(Fn);return()=>{e.setUpLocationChangeListener()}}},{provide:Mh,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yl(2,[{provide:Mh,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(W,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Fn),g=e.get($p);(function o(u){e.get(Fn).events.pipe(Br(g=>g instanceof $r||g instanceof _h||g instanceof fw),(0,yt.U)(g=>g instanceof $r||g instanceof _h&&(0===g.code||1===g.code)&&null),Br(g=>null!==g),Cl(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||g.closed?st(void 0):g),d.initialNavigation()}))}}]).\u0275providers:[]]}const iv=new l.OlP("");let nb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-filters"]],decls:16,vars:0,consts:[[1,"card","filters"],[1,"card-header"],[1,"card-body"],[1,"form-group"],["for","from"],["type","number","id","from",1,"form-control"],["for","to"],["type","number","id","to",1,"form-control"],[1,"btn","btn-primary","btn-block","btn-sm",2,"font-size","10px"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"strong"),l._uU(3,"Filters"),l.qZA()(),l.TgZ(4,"div",2)(5,"form")(6,"div",3)(7,"label",4),l._uU(8,"From"),l.qZA(),l._UZ(9,"input",5),l.qZA(),l.TgZ(10,"div",3)(11,"label",6),l._uU(12,"To"),l.qZA(),l._UZ(13,"input",7),l.qZA(),l.TgZ(14,"button",8),l._uU(15,"Filter by Price"),l.qZA()()()())},dependencies:[zm,ru,lp]}),n})();var Kt=k(5813),Oa=k(5867);class uu{constructor(e){return e}}class Wp{constructor(){return(0,Oa.C6)()}}const qp=new l.OlP("angularfire2._apps"),Xw={provide:uu,useFactory:function Jw(n){return n&&1===n.length?n[0]:new uu((0,Oa.Mq)())},deps:[[new l.FiY,qp]]},eI={provide:Wp,deps:[[new l.FiY,qp]]};function tI(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new uu(r)}}let nI=(()=>{class n{constructor(t){(0,Oa.KN)("angularfire",Kt.q4.full,"core"),(0,Oa.KN)("angularfire",Kt.q4.full,"app"),(0,Oa.KN)("angular",l.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Xw,eI]}),n})();function _x(n,...e){return{ngModule:nI,providers:[{provide:qp,useFactory:tI(n),multi:!0,deps:[l.R0b,l.zs3,Kt.HU,...e]}]}}const sb=(0,Kt.u3)(Oa.ZF,!0);var Ie=k(5861),Vo=k(9681),Zp=k(4859),rn=k(2090),Pa=k(1877);const gc=new Map,ab={activated:!1,tokenObservers:[]},ub={initialized:!1,enabled:!1};function vr(n){return gc.get(n)||ab}function gs(n,e){gc.set(n,e)}function Rh(){return ub}class Bo{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new rn.BH,yield function js(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ri=new rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function oI(n){if(!vr(n).activated)throw ri.create("use-before-activation",{appName:n.name})}function uv(n,e){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,Ie.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Z=yield d.getHeartbeatsHeader();Z&&(u["X-Firebase-Client"]=Z)}const g={method:"POST",body:JSON.stringify(e),headers:u};let v,C;try{v=yield fetch(n,g)}catch(Z){throw ri.create("fetch-network-error",{originalErrorMessage:null===(r=Z)||void 0===r?void 0:r.message})}if(200!==v.status)throw ri.create("fetch-status-error",{httpStatus:v.status});try{C=yield v.json()}catch(Z){throw ri.create("fetch-parse-error",{originalErrorMessage:null===(o=Z)||void 0===o?void 0:o.message})}const A=C.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ri.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const N=1e3*Number(A[1]),H=Date.now();return{token:C.token,expireTimeMillis:H+N,issuedAtTimeMillis:H}})).apply(this,arguments)}function aI(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ql="firebase-app-check-store";let Yp=null;function cv(){return Yp||(Yp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(ri.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Ql,{keyPath:"compositeKey"})}}catch(r){e(ri.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Yp)}function Jp(){return(Jp=(0,Ie.Z)(function*(n,e){const r=(yield cv()).transaction(Ql,"readwrite"),u=r.objectStore(Ql).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var C;g(ri.create("storage-set",{originalErrorMessage:null===(C=v.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Jl=new Pa.Yd("@firebase/app-check");function gv(n,e){return(0,rn.hl)()?function lv(n,e){return function dv(n,e){return Jp.apply(this,arguments)}(function fv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hI(){return Rh().enabled}function fI(){return yv.apply(this,arguments)}function yv(){return(yv=(0,Ie.Z)(function*(){const n=Rh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fb={error:"UNKNOWN_ERROR"};function pb(n){return rn.US.encodeString(JSON.stringify(n),!1)}function eg(n){return vv.apply(this,arguments)}function vv(){return(vv=(0,Ie.Z)(function*(n,e=!1){const t=n.app;oI(t);const r=vr(t);let u,o=r.token;if(o&&!Xl(o)&&(gs(t,Object.assign(Object.assign({},r),{token:void 0})),o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(Xl(v)?o=v:yield gv(t,void 0))}if(!e&&o&&Xl(o))return{token:o.token};let g,d=!1;if(hI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uv(aI(t,yield fI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const v=yield r.exchangeTokenPromise;return yield gv(t,v),gs(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Jl.warn(v.message):Jl.error(v),u=v}return o?u?g=Xl(o)?{token:o.token,internalError:u}:Iv(u):(g={token:o.token},gs(t,Object.assign(Object.assign({},r),{token:o})),yield gv(t,o)):g=Iv(u),d&&gI(t,g),g})).apply(this,arguments)}function wv(n,e){const t=vr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),gs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function pI(n){const{app:e}=n,t=vr(e);let r=t.tokenRefresher;r||(r=function gb(n){const{app:e}=n;return new Bo((0,Ie.Z)(function*(){let r;if(r=vr(e).token?yield eg(n,!0):yield eg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=vr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),gs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gI(n,e){const t=vr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Xl(n){return n.expireTimeMillis-Date.now()>0}function Iv(n){return{token:pb(fb),error:n}}class mI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vr(this.app);for(const t of e)wv(this.app,t.next);return Promise.resolve()}}const Xn="app-check-internal";!function Tx(){(0,Vo._registerComponent)(new Zp.wA("app-check",n=>function yI(n,e){return new mI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Xn).initialize()})),(0,Vo._registerComponent)(new Zp.wA(Xn,n=>function vI(n){return{getToken:e=>eg(n,e),addTokenListener:e=>function _v(n,e,t,r){const{app:o}=n,u=vr(o),d={next:t,error:r,type:e};if(gs(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Xl(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),pI(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>pI(n))}(n,"INTERNAL",e),removeTokenListener:e=>wv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vo.registerVersion)("@firebase/app-check","0.5.15")}();class Lh{constructor(){return(0,Kt.vb)("app-check")}}typeof window<"u"&&window;var sg=k(7573);class lu{constructor(e){return e}}class AI{constructor(){return(0,Kt.vb)("auth")}}const Mv=new l.OlP("angularfire2.auth-instances");function xI(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lu(r)}}const MI={provide:AI,deps:[[new l.FiY,Mv]]},Ab={provide:lu,useFactory:function SI(n,e){const t=(0,Kt.JM)("auth",n,e);return t&&new lu(t)},deps:[[new l.FiY,Mv],uu]};let RI=(()=>{class n{constructor(){(0,Oa.KN)("angularfire",Kt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ab,MI]}),n})();function Sb(n,...e){return{ngModule:RI,providers:[{provide:Mv,useFactory:xI(n),multi:!0,deps:[l.R0b,l.zs3,Kt.HU,Wp,[new l.FiY,Lh],...e]}]}}const Mb=(0,Kt.u3)(sg.a5,!0),Nb=(0,Kt.u3)(sg.n,!0),Bb=(0,Kt.u3)(sg.a6,!0),jb=(0,Kt.u3)(sg.y,!0);var at,Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jo={},Ov=Ov||{},Ft=Nv||self;function rd(){}function ug(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function id(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cg="closure_uid_"+(1e9*Math.random()>>>0),zb=0;function sM(n,e,t){return n.call.apply(n.bind,arguments)}function kI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sM:kI).apply(null,arguments)}function lg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _r(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function du(){this.s=this.s,this.o=this.o}var Pv={};du.prototype.s=!1,du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function sd(n){return Object.prototype.hasOwnProperty.call(n,cg)&&n[cg]||(n[cg]=++zb)}(this);delete Pv[n]}},du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function dg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Fv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ug(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hr.prototype.h=function(){this.defaultPrevented=!0};var Wb=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",rd,e),Ft.removeEventListener("test",rd,e)}catch{}return n}();function hg(n){return/^[\s\xa0]*$/.test(n)}var LI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Lv(n,e){return n<e?-1:n>e?1:0}function Vh(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function ka(n){return-1!=Vh().indexOf(n)}function fg(n){return fg[" "](n),n}fg[" "]=rd;var pg,n,Zb=ka("Opera"),Uh=ka("Trident")||ka("MSIE"),Kb=ka("Edge"),Vv=Kb||Uh,VI=ka("Gecko")&&!(-1!=Vh().toLowerCase().indexOf("webkit")&&!ka("Edge"))&&!(ka("Trident")||ka("MSIE"))&&!ka("Edge"),UI=-1!=Vh().toLowerCase().indexOf("webkit")&&!ka("Edge");function BI(){var n=Ft.document;return n?n.documentMode:void 0}e:{var Uv="",Bv=(n=Vh(),VI?/rv:([^\);]+)(\)|;)/.exec(n):Kb?/Edge\/([\d\.]+)/.exec(n):Uh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UI?/WebKit\/(\S+)/.exec(n):Zb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bv&&(Uv=Bv?Bv[1]:""),Uh){var jv=BI();if(null!=jv&&jv>parseFloat(Uv)){pg=String(jv);break e}}pg=Uv}var Yb={};var Bh=Ft.document&&Uh&&(BI()||parseInt(pg,10))||void 0;function od(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(VI){e:{try{fg(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$I[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&od.X.h.call(this)}}_r(od,Hr);var $I={2:"touch",3:"pen",4:"mouse"};od.prototype.h=function(){od.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),HI=0;function GI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++HI,this.ba=this.ea=!1}function jh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Hv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Jb(n){const e={};for(const t in n)e[t]=n[t];return e}const zI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gv(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<zI.length;u++)t=zI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $h(n){this.src=n,this.g={},this.h=0}function zv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=kv(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(jh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Wv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}$h.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Wv(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new GI(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var mc="closure_lm_"+(1e6*Math.random()|0),qv={};function gg(n,e,t,r,o){if(r&&r.once)return mg(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)gg(n,e[u],t,r,o);return null}return t=Kv(t),n&&n[ad]?n.N(e,t,id(r)?!!r.capture:!!r,o):Hs(n,e,t,!1,r,o)}function Hs(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=id(o)?!!o.capture:!!o,g=cd(n);if(g||(n[mc]=g=new $h(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function Xb(){const e=eT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Wb||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(WI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function mg(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)mg(n,e[u],t,r,o);return null}return t=Kv(t),n&&n[ad]?n.O(e,t,id(r)?!!r.capture:!!r,o):Hs(n,e,t,!0,r,o)}function ud(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)ud(n,e[u],t,r,o);else r=id(r)?!!r.capture:!!r,t=Kv(t),n&&n[ad]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Wv(u=n.g[e],t,r,o))&&(jh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=cd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Wv(e,t,r,o)),(t=-1<n?e[n]:null)&&Zv(t))}function Zv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ad])zv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(WI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cd(e))?(zv(t,n),0==t.h&&(t.src=null,e[mc]=null)):jh(n)}}}function WI(n){return n in qv?qv[n]:qv[n]="on"+n}function eT(n,e){if(n.ba)n=!0;else{e=new od(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Zv(n),n=t.call(r,e)}return n}function cd(n){return(n=n[mc])instanceof $h?n:null}var ld="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kv(n){return"function"==typeof n?n:(n[ld]||(n[ld]=function(e){return n.handleEvent(e)}),n[ld])}function Rr(){du.call(this),this.i=new $h(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var o=e;Gv(e=new Hr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Hh(d,r,!0,e)&&o}if(o=Hh(d=e.g=n,r,!0,e)&&o,o=Hh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Hh(d=e.g=t[u],r,!1,e)&&o}function Hh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,v=d.ha||d.src;d.ea&&zv(n.i,d),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}_r(Rr,du),Rr.prototype[ad]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){ud(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jh(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gh=Ft.JSON.stringify;function qI(){var n=KI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vg,ZI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new oM,n=>n.reset());class oM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yv(n){Ft.setTimeout(()=>{throw n},0)}function yg(n,e){vg||function Qv(){var n=Ft.Promise.resolve(void 0);vg=function(){n.then(nT)}}(),zh||(vg(),zh=!0),KI.add(n,e)}var zh=!1,KI=new class tT{constructor(){this.h=this.g=null}add(e,t){const r=ZI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nT(){for(var n;n=qI();){try{n.h.call(n.g)}catch(t){Yv(t)}var e=ZI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zh=!1}function _g(n,e){Rr.call(this),this.h=n||1,this.g=e||Ft,this.j=Mr(this.lb,this),this.l=Date.now()}function Jv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function wg(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function Ig(n){n.g=wg(()=>{n.g=null,n.i&&(n.i=!1,Ig(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_r(_g,Rr),(at=_g.prototype).ca=!1,at.R=null,at.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nr(this,"tick"),this.ca&&(Jv(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){_g.X.M.call(this),Jv(this),delete this.g};class YI extends du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ig(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wh(n){du.call(this),this.h=n,this.g={}}_r(Wh,du);var Xv=[];function e_(n,e,t,r){Array.isArray(t)||(t&&(Xv[0]=t.toString()),t=Xv);for(var o=0;o<t.length;o++){var u=gg(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function QI(n){Hv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Zv(e)},n),n.g={}}function qh(){this.g=!0}function yc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ii(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Gh(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Wh.prototype.M=function(){Wh.X.M.call(this),QI(this)},Wh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qh.prototype.Aa=function(){this.g=!1},qh.prototype.info=function(){};var ms={},XI=null;function Eg(){return XI=XI||new Rr}function sT(n){Hr.call(this,ms.Pa,n)}function Dg(n){const e=Eg();Nr(e,new sT(e,n))}function t_(n,e){Hr.call(this,ms.STAT_EVENT,n),this.stat=e}function ii(n){const e=Eg();Nr(e,new t_(e,n))}function dd(n,e){Hr.call(this,ms.Qa,n),this.size=e}function Zh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}ms.Pa="serverreachability",_r(sT,Hr),ms.STAT_EVENT="statevent",_r(t_,Hr),ms.Qa="timingevent",_r(dd,Hr);var hd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},eE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Cg(){}function nE(){}Cg.prototype.h=null;var Tg,Kh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Yh(){Hr.call(this,"d")}function bg(){Hr.call(this,"c")}function vc(){}function _c(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Wh(this),this.O=rE,this.T=new _g(n=Vv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new oT}function oT(){this.i=null,this.g="",this.h=!1}_r(Yh,Hr),_r(bg,Hr),_r(vc,Cg),vc.prototype.g=function(){return new XMLHttpRequest},vc.prototype.i=function(){return{}},Tg=new vc;var rE=45e3,n_={},Qh={};function hu(n,e,t){n.K=1,n.v=tf($o(e)),n.s=t,n.P=!0,iE(n,null)}function iE(n,e){n.F=Date.now(),Jh(n),n.A=$o(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),sf(t.i,"t",r),n.C=0,t=n.l.H,n.h=new oT,n.g=mT(n.l,t?e:null,!n.s),0<n.N&&(n.L=new YI(Mr(n.La,n,n.g),n.N)),e_(n.S,n.g,"readystatechange",n.ib),e=n.H?Jb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Dg(1),function JI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),v=0;v<g.length;v++){var C=g[v].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function r_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ag(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=aM(n,t),o==Qh){4==e&&(n.o=4,ii(14),r=!1),yc(n.j,n.m,null,"[Incomplete Response]");break}if(o==n_){n.o=4,ii(15),yc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}yc(n.j,n.m,o,null),xg(n,o)}r_(n)&&o!=Qh&&o!=n_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ws(e),e.K=!0,ii(11))):(yc(n.j,n.m,t,"[Invalid Chunked Response]"),wc(n),Xh(n))}function aM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Qh:(t=Number(e.substring(t,r)),isNaN(t)?n_:(r+=1)+t>e.length?Qh:(e=e.substr(r,t),n.C=r+t,e))}function Jh(n){n.V=Date.now()+n.O,aT(n,n.O)}function aT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zh(Mr(n.gb,n),e)}function Sg(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Xh(n){0==n.l.G||n.I||wE(n.l,n)}function wc(n){Sg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jv(n.T),QI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Pg(t.h,n)))if(!n.J&&Pg(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;y_(t),df(t)}hf(t),ii(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Zh(Mr(t.cb,t),6e3));if(1>=Og(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Cc(t,11)}else if((n.J||t.g==n)&&y_(t),!hg(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.J=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const te=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.h;u.g||-1==te.indexOf("spdy")&&-1==te.indexOf("quic")&&-1==te.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(c_(u,u.h),u.h=null))}if(r.D){const Fe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.za=Fe,Ln(r.F,r.D,Fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=v_(r,r.H?r.ka:null,r.V),d.J){l_(r.h,d);var g=d,v=r.J;v&&g.setTimeout(v),g.B&&(Sg(g),Jh(g)),r.g=d}else m_(r);0<t.i.length&&Ug(t)}else"stop"!=C[0]&&"close"!=C[0]||Cc(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Cc(t,7):p_(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Dg(4)}catch{}}function i_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ug(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function uT(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ug(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function sE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ug(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(at=_c.prototype).setTimeout=function(n){this.O=n},at.ib=function(n){n=n.target;const e=this.L;e&&3==zs(n)?e.l():this.La(n)},at.La=function(n){try{if(n==this.g)e:{const A=zs(this.g);var e=this.g.Ea();const N=this.g.aa();if(!(3>A)&&(3!=A||Vv||this.g&&(this.h.h||this.g.fa()||gE(this.g)))){this.I||4!=A||7==e||Dg(8==e||0>=N?3:2),Sg(this);var t=this.g.aa();this.Y=t;t:if(r_(this)){var r=gE(this.g);n="";var o=r.length,u=4==zs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wc(this),Xh(this);var d="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function rT(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hg(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ii(12),wc(this),Xh(this);break e}yc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xg(this,t)}this.P?(Ag(this,A,d),Vv&&this.i&&3==A&&(e_(this.S,this.T,"tick",this.hb),this.T.start())):(yc(this.j,this.m,d,null),xg(this,d)),4==A&&wc(this),this.i&&!this.I&&(4==A?wE(this.l,this):(this.i=!1,Jh(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),wc(this),Xh(this)}}}catch{}},at.hb=function(){if(this.g){var n=zs(this.g),e=this.g.fa();this.C<e.length&&(Sg(this),Ag(this,n,e),this.i&&4!=n&&Jh(this))}},at.cancel=function(){this.I=!0,wc(this)},at.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function iT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Dg(3),ii(17)),wc(this),this.o=2,Xh(this)):aT(this,this.V-n)};var s_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ic(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ic){this.h=void 0!==e?e:n.h,Mg(this,n.j),this.s=n.s,this.g=n.g,ef(this,n.m),this.l=n.l,e=n.i;var t=new Rg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),o_(this,t),this.o=n.o}else n&&(t=String(n).match(s_))?(this.h=!!e,Mg(this,t[1]||"",!0),this.s=nf(t[2]||""),this.g=nf(t[3]||"",!0),ef(this,t[4]),this.l=nf(t[5]||"",!0),o_(this,t[6]||"",!0),this.o=nf(t[7]||"")):(this.h=!!e,this.i=new Rg(null,this.h))}function $o(n){return new Ic(n)}function Mg(n,e,t){n.j=t?nf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ef(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function o_(n,e,t){e instanceof Rg?(n.i=e,function oE(n,e){e&&!n.j&&(Ec(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(lT(this,r),sf(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=rf(e,dM)),n.i=new Rg(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function tf(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ic.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rf(e,a_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rf(e,a_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(rf(t,"/"==t.charAt(0)?lM:cM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rf(t,hM)),n.join("")};var a_=/[#\/\?@]/g,cM=/[#\?:]/g,lM=/[#\?]/g,dM=/[#\?@]/g,hM=/#/g;function Rg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ec(n){n.g||(n.g=new Map,n.h=0,n.i&&function cT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lT(n,e){Ec(n),e=af(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function dT(n,e){return Ec(n),e=af(n,e),n.g.has(e)}function sf(n,e,t){lT(n,e),0<t.length&&(n.i=null,n.g.set(af(n,e),dg(t)),n.h+=t.length)}function af(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function u_(n){this.l=n||aE,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ga&&Ft.g.Ga()&&Ft.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=Rg.prototype).add=function(n,e){Ec(this),this.i=null,n=af(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Ec(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},at.oa=function(){Ec(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},at.W=function(n){Ec(this);let e=[];if("string"==typeof n)dT(this,n)&&(e=e.concat(this.g.get(af(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Ec(this),this.i=null,dT(this,n=af(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var aE=10;function hT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Og(n){return n.h?1:n.g?n.g.size:0}function Pg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function c_(n,e){n.g?n.g.add(e):n.h=e}function l_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return dg(n.i)}function uE(){}function pT(){this.g=new uE}function gT(n,e,t){const r=t||"";try{i_(n,function(o,u){let d=o;id(o)&&(d=Gh(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Fg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Lg(n){this.l=n.ac||null,this.j=n.jb||!1}function d_(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}u_.prototype.cancel=function(){if(this.i=fT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},uE.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},uE.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},_r(Lg,Cg),Lg.prototype.g=function(){return new d_(this.l,this.j)},Lg.prototype.i=function(n){return function(){return n}}({}),_r(d_,Rr);var cE=0;function lE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function uf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cf(n)}function cf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=d_.prototype).open=function(n,e){if(this.readyState!=cE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cf(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uf(this)),this.readyState=cE},at.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cf(this)),this.g&&(this.readyState=3,cf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},at.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?uf(this):cf(this),3==this.readyState&&lE(this)}},at.Va=function(n){this.g&&(this.response=this.responseText=n,uf(this))},at.Ua=function(n){this.g&&(this.response=n,uf(this))},at.ga=function(){this.g&&uf(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(d_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var fM=Ft.JSON.parse;function ir(n){Rr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=h_,this.K=this.L=!1}_r(ir,Rr);var h_="",dE=/^https?$/i,pM=["POST","PUT"];function hE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Vg(n),Ei(n)}function Vg(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function fE(n){if(n.h&&typeof Ov<"u"&&(!n.C[1]||4!=zs(n)||2!=n.aa()))if(n.v&&4==zs(n))wg(n.Ha,0,n);else if(Nr(n,"readystatechange"),4==zs(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(s_)[1]||null;if(!o&&Ft.self&&Ft.self.location){var u=Ft.self.location.protocol;o=u.substr(0,u.length-1)}r=!dE.test(o?o.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var d=2<zs(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",Vg(n)}}finally{Ei(n)}}}function Ei(n,e){if(n.g){pE(n);const t=n.g,r=n.C[0]?rd:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch{}}}function pE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function zs(n){return n.g?n.g.readyState:0}function gE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case h_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mE(n){let e="";return Hv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function lf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=mE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function fd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function f_(n){this.Ca=0,this.i=[],this.j=new qh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=fd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=fd("baseRetryDelayMs",5e3,n),this.bb=fd("retryDelaySeedMs",1e4,n),this.$a=fd("forwardChannelMaxRetries",2,n),this.ta=fd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new u_(n&&n.concurrentRequestLimit),this.Fa=new pT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function p_(n){if(g_(n),3==n.G){var e=n.U++,t=$o(n.F);Ln(t,"SID",n.I),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),Dc(n,t),(e=new _c(n,n.j,e,void 0)).K=2,e.v=tf($o(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=mT(e.l,null),e.g.da(e.v)),e.F=Date.now(),Jh(e)}EE(n)}function df(n){n.g&&(Ws(n),n.g.cancel(),n.g=null)}function g_(n){df(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),y_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function Ug(n){hT(n.h)||n.m||(n.m=!0,yg(n.Ja,n),n.C=0)}function vE(n,e){var t;t=e?e.m:n.U++;const r=$o(n.F);Ln(r,"SID",n.I),Ln(r,"RID",t),Ln(r,"AID",n.T),Dc(n,r),n.o&&n.s&&lf(r,n.o,n.s),t=new _c(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Fa(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),c_(n.h,t),hu(t,r,e)}function Dc(n,e){n.ia&&Hv(n.ia,function(t,r){Ln(e,r,t)}),n.l&&i_({},function(t,r){Ln(e,r,t)})}function Fa(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Mr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let C=o[v].h;const A=o[v].g;if(C-=u,0>C)u=Math.max(0,o[v].h-100),g=!1;else try{gT(A,d,"req"+C+"_")}catch{r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function m_(n){n.g||n.u||(n.Z=1,yg(n.Ia,n),n.A=0)}function hf(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Zh(Mr(n.Ia,n),IE(n,n.A)),n.A++,0))}function Ws(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function _E(n){n.g=new _c(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=$o(n.sa);Ln(e,"RID","rpc"),Ln(e,"SID",n.I),Ln(e,"CI",n.L?"0":"1"),Ln(e,"AID",n.T),Ln(e,"TYPE","xmlhttp"),Dc(n,e),n.o&&n.s&&lf(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=tf($o(e)),t.s=null,t.P=!0,iE(t,n)}function y_(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function wE(n,e){var t=null;if(n.g==e){y_(n),Ws(n),n.g=null;var r=2}else{if(!Pg(n.h,e))return;t=e.D,l_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Nr(r=Eg(),new dd(r,t,e,o)),Ug(n)}else m_(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function yE(n,e){return!(Og(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Zh(Mr(n.Ja,n,e),IE(n,n.C)),n.C++,0)))}(n,e)||2==r&&hf(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Cc(n,5);break;case 4:Cc(n,10);break;case 3:Cc(n,6);break;default:Cc(n,2)}}function IE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Cc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Mr(n.kb,n);t||(t=new Ic("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||Mg(t,"https"),tf(t)),function kg(n,e){const t=new qh;if(Ft.Image){const r=new Image;r.onload=lg(Fg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lg(Fg,t,r,"TestLoadImage: error",!1,e),r.onabort=lg(Fg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lg(Fg,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.G=0,n.l&&n.l.va(e),EE(n),g_(n)}function EE(n){if(n.G=0,n.la=[],n.l){const e=fT(n.h);(0!=e.length||0!=n.i.length)&&(Fv(n.la,e),Fv(n.la,n.i),n.h.i.length=0,dg(n.i),n.i.length=0),n.l.ua()}}function v_(n,e,t){var r=t instanceof Ic?$o(t):new Ic(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ef(r,r.m);else{var o=Ft.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Ic(null,void 0);r&&Mg(u,r),e&&(u.g=e),o&&ef(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Ln(r,t,e),Ln(r,"VER",n.ma),Dc(n,r),r}function mT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Da&&!n.ra?new Lg({jb:!0}):n.ra)).Ka(n.H),e}function __(){}function Bg(){if(Uh&&!(10<=Number(Bh)))throw Error("Environmental error: no available transport.")}function Oi(n,e){Rr.call(this),this.g=new f_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!hg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new bc(this)}function yT(n){Yh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jg(){bg.call(this),this.status=1}function bc(n){this.g=n}(at=ir.prototype).Ka=function(n){this.L=n},at.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tg.g(),this.C=function tE(n){return n.h||(n.h=n.i())}(this.u?this.u:Tg),this.g.onreadystatechange=Mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void hE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ft.FormData&&n instanceof Ft.FormData,!(0<=kv(pM,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pE(this),0<this.B&&((this.K=function Gs(n){return Uh&&function Qb(){return function qb(n){var e=Yb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=LI(String(pg)).split("."),t=LI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Lv(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Lv(0==o[2].length,0==u[2].length)||Lv(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.qa,this)):this.A=wg(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){hE(this,u)}},at.qa=function(){typeof Ov<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),Ei(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ei(this,!0)),ir.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?fE(this):this.fb())},at.fb=function(){fE(this)},at.aa=function(){try{return 2<zs(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),fM(e)}},at.Ea=function(){return this.m},at.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=f_.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new _c(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Jb(u),Gv(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fa(this,o,e),Ln(t=$o(this.F),"RID",n),Ln(t,"CVER",22),this.D&&Ln(t,"X-HTTP-Session-Id",this.D),Dc(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(mE(u)))+"&"+e:this.o&&lf(t,this.o,u)),c_(this.h,o),this.Ya&&Ln(t,"TYPE","init"),this.O?(Ln(t,"$req",e),Ln(t,"SID","null"),o.Z=!0,hu(o,t,null)):hu(o,t,e),this.G=2}}else 3==this.G&&(n?vE(this,n):0==this.i.length||hT(this.h)||vE(this))},at.Ia=function(){if(this.u=null,_E(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Zh(Mr(this.eb,this),n)}},at.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ii(10),df(this),_E(this))},at.cb=function(){null!=this.v&&(this.v=null,df(this),hf(this),ii(19))},at.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ii(2)):(this.j.info("Failed to ping google.com"),ii(1))},(at=__.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Ra=function(){},Bg.prototype.g=function(n,e){return new Oi(n,e)},_r(Oi,Rr),Oi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ii(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=v_(n,null,n.V),Ug(n)},Oi.prototype.close=function(){p_(this.g)},Oi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Ug(e)},Oi.prototype.M=function(){this.g.l=null,delete this.j,p_(this.g),delete this.g,Oi.X.M.call(this)},_r(yT,Yh),_r(jg,bg),_r(bc,__),bc.prototype.xa=function(){Nr(this.g,"a")},bc.prototype.wa=function(n){Nr(this.g,new yT(n))},bc.prototype.va=function(n){Nr(this.g,new jg(n))},bc.prototype.ua=function(){Nr(this.g,"b")},Bg.prototype.createWebChannel=Bg.prototype.g,Oi.prototype.send=Oi.prototype.u,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,hd.NO_ERROR=0,hd.TIMEOUT=8,hd.HTTP_ERROR=6,eE.COMPLETE="complete",nE.EventType=Kh,Kh.OPEN="a",Kh.CLOSE="b",Kh.ERROR="c",Kh.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.Oa,ir.prototype.getLastErrorCode=ir.prototype.Ea,ir.prototype.getStatus=ir.prototype.aa,ir.prototype.getResponseJson=ir.prototype.Sa,ir.prototype.getResponseText=ir.prototype.fa,ir.prototype.send=ir.prototype.da,ir.prototype.setWithCredentials=ir.prototype.Ka;var DE=jo.createWebChannelTransport=function(){return new Bg},CE=jo.getStatEventTarget=function(){return Eg()},$g=jo.ErrorCode=hd,bE=jo.EventType=eE,Hg=jo.Event=ms,ff=jo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},TE=jo.FetchXmlHttpFactory=Lg,Gg=jo.WebChannel=nE,AE=jo.XhrIo=ir;const w_="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let pd="9.12.1";const Tc=new Pa.Yd("@firebase/firestore");function SE(){return Tc.logLevel}function je(n,...e){if(Tc.logLevel<=Pa.in.DEBUG){const t=e.map(ME);Tc.debug(`Firestore (${pd}): ${n}`,...t)}}function cr(n,...e){if(Tc.logLevel<=Pa.in.ERROR){const t=e.map(ME);Tc.error(`Firestore (${pd}): ${n}`,...t)}}function Ac(n,...e){if(Tc.logLevel<=Pa.in.WARN){const t=e.map(ME);Tc.warn(`Firestore (${pd}): ${n}`,...t)}}function ME(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function St(n,e){n||ot()}function Ye(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class RE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class Sc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class OE{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new wr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const C=d;e.enqueueRetryable((0,Ie.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},v=C=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(C=>v(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?v(C):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new wr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new RE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Or(e)}}class I_{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(St(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class E_{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new I_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D_{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,je("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.A=t.token,new PE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zg(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=zg(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function pf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function _T(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Vn(0,0))}static max(){return new bt(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gf{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends gf{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const wT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends gf{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return wT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Oe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Oe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Oe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Oe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(sn.fromString(e))}static fromName(e){return new qe(sn.fromString(e).popFirst(5))}static empty(){return new qe(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new sn(e.slice()))}}class mf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function C_(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}mf.UNKNOWN_ID=-1;class gd{constructor(e,t){this.fieldPath=e,this.kind=t}}class md{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new md(0,Ki.min())}}function Wg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new Ki(o,qe.empty(),e)}function LE(n){return new Ki(n.readTime,n.key,-1)}class Ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ki(bt.min(),qe.empty(),-1)}static max(){return new Ki(bt.max(),qe.empty(),-1)}}function VE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const IT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fu(n){return b_.apply(this,arguments)}function b_(){return b_=(0,Ie.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==IT)throw n;je("LocalStore","Unexpectedly lost primary lease")}),b_.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},v=>r(v))}),d=!0,u===o&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(o=>o?ce.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let v=0;v<u;v++){const C=v;t(e[C]).next(A=>{d[C]=A,++g,g===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new ce((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class T_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new wr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new qg(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=BE(r.target.error);this.P.reject(new qg(e,o))}}static open(e,t,r,o){try{return new T_(t,e.transaction(o,r))}catch(u){throw new qg(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vM(t)}}class Ho{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ho.D((0,rn.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),yd(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,rn.hl)())return!1;if(Ho.N())return!0;const e=(0,rn.z$)(),t=Ho.D(e),r=0<t&&t<10,o=Ho.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new qg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Oe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Oe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new qg(e,g))},u.onupgradeneeded=d=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const v=T_.open(u.db,e,d?"readonly":"readwrite",r),C=o(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),ce.reject(A))).toPromise();return C.catch(()=>{}),yield v.v,C}catch(v){const C=v,A="FirebaseError"!==C.name&&g<3;if(je("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yM{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return yd(this.U.delete())}}class qg extends Oe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pu(n){return"IndexedDbTransactionError"===n.name}class vM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yd(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),yd(this.store.add(e))}get(e){return yd(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),yd(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),yd(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ce((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ce((r,o)=>{t.onerror=u=>{const d=BE(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new ce((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const v=new yM(g),C=t(g.primaryKey,g.value,v);if(C instanceof ce){const A=C.catch(N=>(v.done(),ce.reject(N)));r.push(A)}v.isDone?o():null===v.G?g.continue():g.continue(v.G)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yd(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=BE(r.target.error);t(o)}})}let ET=!1;function BE(n){const e=Ho.D((0,rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ET||(ET=!0,setTimeout(()=>{throw r},0)),r}}return n}class _M{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;je("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{je("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){pu(r)?je("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fu(r)}yield t.nt(6e4)}))}}class wM{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ce.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return je("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(g=>(je("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=LE(u);VE(d,r)>0&&(r=d)}),new Ki(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function s(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function a(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}i.at=-1;class h{constructor(e,t){this.comparator=e,this.root=t||y.EMPTY}insert(e,t){return new h(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,y.BLACK,null,null))}remove(e){return new h(this.comparator,this.root.remove(e,this.comparator).copy(null,null,y.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new f(this.root,e,this.comparator,!1)}getReverseIterator(){return new f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new f(this.root,e,this.comparator,!0)}}class f{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class y{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??y.RED,this.left=o??y.EMPTY,this.right=u??y.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new y(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return y.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return y.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,y.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,y.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}y.EMPTY=null,y.RED=!0,y.BLACK=!1,y.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,o){return this}insert(n,e,t){return new y(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class w{constructor(e){this.comparator=e,this.data=new h(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E(this.data.getIterator())}getIteratorFrom(e){return new E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof w)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new w(this.comparator);return t.data=e,t}}class E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function T(n){return n.hasNext()?n.getNext():void 0}class M{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new M([])}unionWith(e){let t=new w(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new M(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ${constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new $(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new $(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$.EMPTY_BYTE_STRING=new $("");const ne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ve(n){if(St(!!n),"string"==typeof n){let e=0;const t=ne.exec(n);if(St(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ge(n){return"string"==typeof n?$.fromBase64String(n):$.fromUint8Array(n)}function it(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wt(n){const e=n.mapValue.fields.__previous_value__;return it(e)?wt(e):e}function xe(n){const e=ve(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class Tt{constructor(e,t,r,o,u,d,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class Qt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qt&&e.projectId===this.projectId&&e.database===this.database}}function Cn(n){return null==n}function qs(n){return 0===n&&1/n==-1/0}function Zg(n){return"number"==typeof n&&Number.isInteger(n)&&!qs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Go={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vd={nullValue:"NULL_VALUE"};function La(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?it(n)?4:DM(n)?9007199254740991:10:ot()}function ys(n,e){if(n===e)return!0;const t=La(n);if(t!==La(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xe(n).isEqual(xe(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ve(r.timestampValue),d=ve(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ge(n.bytesValue).isEqual(Ge(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Ae(r.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(r.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ae(r.integerValue)===Ae(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Ae(r.doubleValue),d=Ae(o.doubleValue);return u===d?qs(u)===qs(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return pf(n.arrayValue.values||[],e.arrayValue.values||[],ys);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(s(u)!==s(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!ys(u[g],d[g])))return!1;return!0}(n,e);default:return ot()}var o}function Mc(n,e){return void 0!==(n.values||[]).find(t=>ys(t,e))}function zo(n,e){if(n===e)return 0;const t=La(n),r=La(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Ae(o.integerValue||o.doubleValue),g=Ae(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return Kg(n.timestampValue,e.timestampValue);case 4:return Kg(xe(n),xe(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Ge(o),g=Ge(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let v=0;v<d.length&&v<g.length;v++){const C=Bt(d[v],g[v]);if(0!==C)return C}return Bt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Bt(Ae(o.latitude),Ae(u.latitude));return 0!==d?d:Bt(Ae(o.longitude),Ae(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let v=0;v<d.length&&v<g.length;++v){const C=zo(d[v],g[v]);if(C)return C}return Bt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Go.mapValue&&u===Go.mapValue)return 0;if(o===Go.mapValue)return 1;if(u===Go.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),v=u.fields||{},C=Object.keys(v);g.sort(),C.sort();for(let A=0;A<g.length&&A<C.length;++A){const N=Bt(g[A],C[A]);if(0!==N)return N;const H=zo(d[g[A]],v[C[A]]);if(0!==H)return H}return Bt(g.length,C.length)}(n.mapValue,e.mapValue);default:throw ot()}}function Kg(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=ve(n),r=ve(e),o=Bt(t.seconds,r.seconds);return 0!==o?o:Bt(t.nanos,r.nanos)}function gu(n){return DT(n)}function DT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ve(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ge(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=DT(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${DT(r.fields[g])}`;return u+"}"}(n.mapValue):ot();var e}function yf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CT(n){return!!n&&"integerValue"in n}function A_(n){return!!n&&"arrayValue"in n}function IM(n){return!!n&&"nullValue"in n}function EM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jE(n){return!!n&&"mapValue"in n}function S_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return a(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=S_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=S_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DM(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function t1(n){return"nullValue"in n?vd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yf(Qt.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function n1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yf(Qt.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Go:ot()}function CM(n,e){const t=zo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bM(n,e){const t=zo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=S_(t)}setAll(e){let t=er.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=S_(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());jE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ys(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];jE(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){a(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Di(S_(this.value))}}function TM(n){const e=[];return a(n.fields,(t,r)=>{const o=new er([t]);if(jE(r)){const u=TM(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new M(e)}class zn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new zn(e,0,bt.min(),bt.min(),Di.empty(),0)}static newFoundDocument(e,t,r){return new zn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new zn(e,2,t,bt.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,bt.min(),Di.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class r1{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ht=null}}function AM(n,e=null,t=[],r=[],o=null,u=null,d=null){return new r1(n,e,t,r,o,u,d)}function vf(n){const e=Ye(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+gu(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Cn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gu(r)).join(",")),e.ht=t}return e.ht}function x_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!h1(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ys(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NM(n.startAt,e.startAt)&&NM(n.endAt,e.endAt)}function $E(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function HE(n,e){return n.filters.filter(t=>t instanceof Ci&&t.field.isEqual(e))}function SM(n,e,t){let r=vd,o=!0;for(const u of HE(n,e)){let d=vd,g=!0;switch(u.op){case"<":case"<=":d=t1(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=vd}CM({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];CM({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function xM(n,e,t){let r=Go,o=!0;for(const u of HE(n,e)){let d=Go,g=!0;switch(u.op){case">=":case">":d=n1(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Go}bM({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];bM({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new s1(e,t,r):"array-contains"===t?new u1(e,r):"in"===t?new c1(e,r):"not-in"===t?new l1(e,r):"array-contains-any"===t?new d1(e,r):new Ci(e,t,r)}static lt(e,t,r){return"in"===t?new o1(e,r):new a1(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(zo(t,this.value)):null!==t&&La(this.value)===La(t)&&this.ft(zo(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class s1 extends Ci{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class o1 extends Ci{constructor(e,t){super(e,"in",t),this.keys=MM(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class a1 extends Ci{constructor(e,t){super(e,"not-in",t),this.keys=MM(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MM(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class u1 extends Ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return A_(t)&&Mc(t.arrayValue,this.value)}}class c1 extends Ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mc(this.value.arrayValue,t)}}class l1 extends Ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mc(this.value.arrayValue,t)}}class d1 extends Ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!A_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}}class _d{constructor(e,t){this.position=e,this.inclusive=t}}class Yg{constructor(e,t="asc"){this.field=e,this.dir=t}}function h1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function RM(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):zo(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function NM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ys(n.position[t],e.position[t]))return!1;return!0}class Rc{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=v,this._t=null,this.wt=null}}function OM(n,e,t,r,o,u,d,g){return new Rc(n,e,t,r,o,u,d,g)}function Qg(n){return new Rc(n)}function PM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function bT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function TT(n){for(const e of n.filters)if(e.dt())return e.field;return null}function AT(n){return null!==n.collectionGroup}function Jg(n){const e=Ye(n);if(null===e._t){e._t=[];const t=TT(e),r=bT(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Yg(t)),e._t.push(new Yg(er.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Yg(er.keyField(),u))}}}return e._t}function Yi(n){const e=Ye(n);if(!e.wt)if("F"===e.limitType)e.wt=AM(e.path,e.collectionGroup,Jg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Jg(e))t.push(new Yg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new _d(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new _d(e.startAt.position,e.startAt.inclusive):null;e.wt=AM(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function GE(n,e,t){return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function M_(n,e){return x_(Yi(n),Yi(e))&&n.limitType===e.limitType}function kM(n){return`${vf(Yi(n))}|lt:${n.limitType}`}function ST(n){return`Query(target=${function i1(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gu(r.value)}`;var r}).join(", ")}]`),Cn(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gu(t)).join(",")),`Target(${e})`}(Yi(n))}; limitType=${n.limitType})`}function xT(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=RM(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Jg(t),r)||t.endAt&&!function(o,u,d){const g=RM(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Jg(t),r)));var t,r}function FM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LM(n){return(e,t)=>{let r=!1;for(const o of Jg(n)){const u=f1(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function f1(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),v=d.data.field(o);return null!==g&&null!==v?zo(g,v):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function VM(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qs(e)?"-0":e}}function UM(n){return{integerValue:""+n}}function BM(n,e){return Zg(e)?UM(e):VM(n,e)}class zE{constructor(){this._=void 0}}function p1(n,e,t){return n instanceof Xg?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof _f?$M(n,e):n instanceof wf?HM(n,e):function(r,o){const u=jM(r,o),d=GM(u)+GM(r.yt);return CT(u)&&CT(r.yt)?UM(d):VM(r.It,d)}(n,e)}function g1(n,e,t){return n instanceof _f?$M(n,e):n instanceof wf?HM(n,e):t}function jM(n,e){return n instanceof em?CT(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xg extends zE{}class _f extends zE{constructor(e){super(),this.elements=e}}function $M(n,e){const t=zM(e);for(const r of n.elements)t.some(o=>ys(o,r))||t.push(r);return{arrayValue:{values:t}}}class wf extends zE{constructor(e){super(),this.elements=e}}function HM(n,e){let t=zM(e);for(const r of n.elements)t=t.filter(o=>!ys(o,r));return{arrayValue:{values:t}}}class em extends zE{constructor(e,t){super(),this.It=e,this.yt=t}}function GM(n){return Ae(n.integerValue||n.doubleValue)}function zM(n){return A_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class R_{constructor(e,t){this.field=e,this.transform=t}}class y1{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qE{}function WM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nm(n.key,sr.none()):new tm(n.key,n.data,sr.none());{const t=n.data,r=Di.empty();let o=new w(er.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Nc(n.key,r,new M(o.toArray()),sr.none())}}function v1(n,e,t){n instanceof tm?function(r,o,u){const d=r.value.clone(),g=KM(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Nc?function(r,o,u){if(!WE(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=KM(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(ZM(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function N_(n,e,t,r){return n instanceof tm?function(o,u,d,g){if(!WE(o.precondition,u))return d;const v=o.value.clone(),C=YM(o.fieldTransforms,g,u);return v.setAll(C),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nc?function(o,u,d,g){if(!WE(o.precondition,u))return d;const v=YM(o.fieldTransforms,g,u),C=u.data;return C.setAll(ZM(o)),C.setAll(v),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,WE(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function _1(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=jM(r.transform,o||null);null!=u&&(null===t&&(t=Di.empty()),t.set(r.field,u))}return t||null}function qM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&pf(t,r,(o,u)=>function m1(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _f&&r instanceof _f||t instanceof wf&&r instanceof wf?pf(t.elements,r.elements,ys):t instanceof em&&r instanceof em?ys(t.yt,r.yt):t instanceof Xg&&r instanceof Xg);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class tm extends qE{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Nc extends qE{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ZM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KM(n,e,t){const r=new Map;St(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,g1(d,g,t[o]))}return r}function YM(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,p1(u,d,e))}return r}class nm extends qE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MT extends qE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class w1{constructor(e){this.count=e}}var Pr,fn;function QM(n){switch(n){default:return ot();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function JM(n){if(void 0===n)return cr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Pr.OK:return pe.OK;case Pr.CANCELLED:return pe.CANCELLED;case Pr.UNKNOWN:return pe.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return pe.INTERNAL;case Pr.UNAVAILABLE:return pe.UNAVAILABLE;case Pr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Pr.NOT_FOUND:return pe.NOT_FOUND;case Pr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Pr.ABORTED:return pe.ABORTED;case Pr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Pr.DATA_LOSS:return pe.DATA_LOSS;default:return ot()}}(fn=Pr||(Pr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class wd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){a(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return c(this.inner)}size(){return this.innerSize}}const I1=new h(qe.comparator);function vs(){return I1}const XM=new h(qe.comparator);function O_(...n){let e=XM;for(const t of n)e=e.insert(t.key,t);return e}function eR(n){let e=XM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mu(){return P_()}function tR(){return P_()}function P_(){return new wd(n=>n.toString(),(n,e)=>n.isEqual(e))}const E1=new h(qe.comparator),D1=new w(qe.comparator);function qt(...n){let e=D1;for(const t of n)e=e.add(t);return e}const C1=new w(Bt);function ZE(){return C1}class k_{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,F_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new k_(bt.min(),o,ZE(),vs(),qt())}}class F_{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new F_(r,t,qt(),qt(),qt())}}class KE{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class nR{constructor(e,t){this.targetId=e,this.At=t}}class rR{constructor(e,t,r=$.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class iR{constructor(){this.Rt=0,this.bt=oR(),this.Pt=$.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=qt(),t=qt(),r=qt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ot()}}),new F_(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=oR()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class b1{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=vs(),this.qt=sR(),this.Kt=new w(Bt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if($E(u))if(0===r){const d=new qe(u.path);this.jt(t,d,zn.newNoDocument(d,bt.min()))}else St(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const g=this.Xt(d);if(g){if(u.current&&$E(g.target)){const v=new qe(g.target.path);null!==this.Ut.get(v)||this.ee(d,v)||this.jt(d,v,zn.newNoDocument(v,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=qt();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(v=>{const C=this.Xt(v);return!C||2===C.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new k_(e,t,this.Kt,this.Ut,r);return this.Ut=vs(),this.qt=sR(),this.Kt=new w(Bt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new iR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new w(Bt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new iR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function sR(){return new h(qe.comparator)}function oR(){return new h(qe.comparator)}const T1={asc:"ASCENDING",desc:"DESCENDING"},A1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class S1{constructor(e,t){this.databaseId=e,this.gt=t}}function L_(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aR(n,e){return n.gt?e.toBase64():e.toUint8Array()}function x1(n,e){return L_(n,e.toTimestamp())}function si(n){return St(!!n),bt.fromTimestamp(function(e){const t=ve(e);return new Vn(t.seconds,t.nanos)}(n))}function RT(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function uR(n){const e=sn.fromString(n);return St(mR(e)),e}function V_(n,e){return RT(n.databaseId,e.path)}function yu(n,e){const t=uR(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(lR(t))}function NT(n,e){return RT(n.databaseId,e)}function cR(n){const e=uR(n);return 4===e.length?sn.emptyPath():lR(e)}function U_(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lR(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dR(n,e,t){return{name:V_(n,e),fields:t.value.mapValue.fields}}function hR(n,e,t){const r=yu(n,e.name),o=si(e.updateTime),u=new Di({mapValue:{fields:e.fields}}),d=zn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function B_(n,e){let t;if(e instanceof tm)t={update:dR(n,e.key,e.value)};else if(e instanceof nm)t={delete:V_(n,e.key)};else if(e instanceof Nc)t={update:dR(n,e.key,e.data),updateMask:V1(e.fieldMask)};else{if(!(e instanceof MT))return ot();t={verify:V_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Xg)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _f)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof em)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:x1(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ot()),t;var o}function OT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?sr.updateTime(si(o.updateTime)):void 0!==o.exists?sr.exists(o.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(St("REQUEST_TIME"===d.setToServerValue),g=new Xg):"appendMissingElements"in d?g=new _f(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new wf(d.removeAllFromArray.values||[]):"increment"in d?g=new em(u,d.increment):ot();const v=er.fromServerFormat(d.fieldPath);return new R_(v,g)}(n,o)):[];var o;if(e.update){const o=yu(n,e.update.name),u=new Di({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new M((e.updateMask.fieldPaths||[]).map(C=>er.fromServerFormat(C)));return new Nc(o,u,d,t,r)}return new tm(o,u,t,r)}if(e.delete){const o=yu(n,e.delete);return new nm(o,t)}if(e.verify){const o=yu(n,e.verify);return new MT(o,t)}return ot()}function fR(n,e){return{documents:[NT(n,e.path)]}}function PT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=NT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=NT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const C=v.map(A=>function(N){if("=="===N.op){if(EM(N.value))return{unaryFilter:{field:rm(N.field),op:"IS_NAN"}};if(IM(N.value))return{unaryFilter:{field:rm(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(EM(N.value))return{unaryFilter:{field:rm(N.field),op:"IS_NOT_NAN"}};if(IM(N.value))return{unaryFilter:{field:rm(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rm(N.field),op:k1(N.op),value:N.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(C=>{return{field:rm((A=C).field),direction:P1(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||Cn(C)?C:{value:C});var C,g,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function pR(n){let e=cR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){St(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=gR(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Yg(im((N=A).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(A){let N;return N="object"==typeof A?A.value:A,Cn(N)?null:N}(t.limit));let v=null;var A;t.startAt&&(v=new _d((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new _d(A.values||[],!A.before)}(t.endAt)),OM(e,o,d,u,g,"F",v,C)}function gR(n){return n?void 0!==n.unaryFilter?[L1(n)]:void 0!==n.fieldFilter?[F1(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>gR(e)).reduce((e,t)=>e.concat(t)):ot():[]}function P1(n){return T1[n]}function k1(n){return A1[n]}function rm(n){return{fieldPath:n.canonicalString()}}function im(n){return er.fromServerFormat(n.fieldPath)}function F1(n){return Ci.create(im(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function L1(n){switch(n.unaryFilter.op){case"IS_NAN":const e=im(n.unaryFilter.field);return Ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=im(n.unaryFilter.field);return Ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=im(n.unaryFilter.field);return Ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=im(n.unaryFilter.field);return Ci.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function V1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yR(e)),e=U1(n.get(t),e);return yR(e)}function U1(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function yR(n){return n+"\x01\x01"}function vu(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&ot(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:ot()}u=d+2}return new sn(r)}const vR=["userId","batchId"];function YE(n,e){return[n,Qi(e)]}function _R(n,e,t){return[n,Qi(e),t]}const B1={},j1=["prefixPath","collectionGroup","readTime","documentId"],$1=["prefixPath","collectionGroup","documentId"],H1=["collectionGroup","readTime","prefixPath","documentId"],G1=["canonicalId","targetId"],z1=["targetId","path"],W1=["path","targetId"],q1=["collectionId","parent"],Z1=["indexId","uid"],K1=["uid","sequenceNumber"],Y1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Q1=["indexId","uid","orderedDocumentKey"],J1=["userId","collectionPath","documentId"],X1=["userId","collectionPath","largestBatchId"],eP=["userId","collectionGroup","largestBatchId"],wR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tP=[...wR,"documentOverlays"],IR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ER=IR,nP=[...ER,"indexConfiguration","indexState","indexEntries"];class kT extends UE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function oi(n,e){const t=Ye(n);return Ho.M(t.ie,e)}class FT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&v1(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=N_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=N_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tR();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const v=WM(d,g);null!==v&&r.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&pf(this.mutations,e.mutations,(t,r)=>qM(t,r))&&pf(this.baseMutations,e.baseMutations,(t,r)=>qM(t,r))}}class LT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){St(e.mutations.length===r.length);let o=E1;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new LT(e,t,r,o)}}class VT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Id{constructor(e,t,r,o,u=bt.min(),d=bt.min(),g=$.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Id(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Id(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class DR{constructor(e){this.re=e}}function CR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:V_(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:L_(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:If(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:If(e.version)}}var o,u;return r}function QE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function If(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ef(n){const e=new Vn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Df(n,e){const t=(e.baseMutations||[]).map(u=>OT(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>OT(n.re,u)),o=Vn.fromMillis(e.localWriteTimeMs);return new FT(e.batchId,o,t,r)}function j_(n){const e=Ef(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ef(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(St(1===(o=n.query).documents.length),r=Yi(Qg(cR(o.documents[0])))):r=Yi(pR(n.query)),new Id(r,n.targetId,0,n.lastListenSequenceNumber,e,t,$.fromBase64String(n.resumeToken))}function bR(n,e){const t=If(e.snapshotVersion),r=If(e.lastLimboFreeSnapshotVersion);let o;o=$E(e.target)?fR(n.re,e.target):PT(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function UT(n){const e=pR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?GE(e,e.limit,"L"):e}function BT(n,e){return new VT(e.largestBatchId,OT(n.re,e.overlayMutation))}function TR(n,e){const t=e.path.lastSegment();return[n,Qi(e.path.popLast()),t]}function AR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:If(r.readTime),documentKey:Qi(r.documentKey.path),largestBatchId:r.largestBatchId}}class iP{getBundleMetadata(e,t){return SR(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ef(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return SR(e).put({bundleId:(r=t).id,createTime:If(si(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return xR(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:UT(o.bundledQuery),readTime:Ef(o.readTime)};var o})}saveNamedQuery(e,t){return xR(e).put({name:(r=t).name,readTime:If(si(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SR(n){return oi(n,"bundles")}function xR(n){return oi(n,"namedQueries")}class JE{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new JE(e,t.uid||"")}getOverlay(e,t){return $_(e).get(TR(this.userId,t)).next(r=>r?BT(this.It,r):null)}getOverlays(e,t){const r=mu();return ce.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new VT(t,d);o.push(this.ue(e,g))}),ce.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Qi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push($_(e).Y("collectionPathOverlayIndex",g))}),ce.waitFor(u)}getOverlaysForCollection(e,t,r){const o=mu(),u=Qi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return $_(e).W("collectionPathOverlayIndex",d).next(g=>{for(const v of g){const C=BT(this.It,v);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=mu();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $_(e).Z({index:"collectionGroupOverlayIndex",range:g},(v,C,A)=>{const N=BT(this.It,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return $_(e).put(function(r,o,u){const[d,g,v]=TR(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:B_(r.re,u.mutation)}}(this.It,this.userId,t))}}function $_(n){return oi(n,"documentOverlays")}class Cf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ae(e.integerValue));else if("doubleValue"in e){const r=Ae(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),qs(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ge(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?DM(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ot()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function sP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function MR(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=sP(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Cf.Te=new Cf;class oP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=MR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=MR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class aP{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class uP{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class H_{constructor(){this.Be=new oP,this.Le=new aP(this.Be),this.Ue=new uP(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class bf{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bf(this.indexId,this.documentKey,this.arrayValue,r)}}function Tf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=RR(n.arrayValue,e.arrayValue),0!==t?t:(t=RR(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function RR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=C_(e);if(void 0!==t&&!this.ze(t))return!1;const r=xc(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lP{constructor(){this.Ye=new jT}addToCollectionParentIndex(e,t){return this.Ye.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ki.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class jT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new w(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new w(sn.comparator)).toArray()}}const XE=new Uint8Array(0);class dP{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new jT,this.Ze=new wd(r=>vf(r),(r,o)=>x_(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Qi(o)};return NR(e).put(u)}return ce.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[_T(t),""],!1,!0);return NR(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(vu(d.parent))}return r})}addFieldIndex(e,t){const r=eD(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=z_(e);return u.next(g=>{d.put(AR(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=eD(e),o=z_(e),u=G_(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=G_(e);let o=!0;const u=new Map;return ce.forEach(this.tn(t),d=>this.en(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=qt();const g=[];return ce.forEach(u,(v,C)=>{var A;je("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${vf(t)}`);const N=function(Lt,Vt){const jt=C_(Vt);if(void 0===jt)return null;for(const Jt of HE(Lt,jt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(C,v),H=function(Lt,Vt){const jt=new Map;for(const Jt of xc(Vt))for(const Gr of HE(Lt,Jt.fieldPath))switch(Gr.op){case"==":case"in":jt.set(Jt.fieldPath.canonicalString(),Gr.value);break;case"not-in":case"!=":return jt.set(Jt.fieldPath.canonicalString(),Gr.value),Array.from(jt.values())}return null}(C,v),Z=function(Lt,Vt){const jt=[];let Jt=!0;for(const Gr of xc(Vt)){const d0=0===Gr.kind?SM(Lt,Gr.fieldPath,Lt.startAt):xM(Lt,Gr.fieldPath,Lt.startAt);jt.push(d0.value),Jt&&(Jt=d0.inclusive)}return new _d(jt,Jt)}(C,v),te=function(Lt,Vt){const jt=[];let Jt=!0;for(const Gr of xc(Vt)){const d0=0===Gr.kind?xM(Lt,Gr.fieldPath,Lt.endAt):SM(Lt,Gr.fieldPath,Lt.endAt);jt.push(d0.value),Jt&&(Jt=d0.inclusive)}return new _d(jt,Jt)}(C,v),Fe=this.nn(v,C,Z),Ve=this.nn(v,C,te),ut=this.sn(v,C,H),Nt=this.rn(v.indexId,N,Fe,Z.inclusive,Ve,te.inclusive,ut);return ce.forEach(Nt,Lt=>r.J(Lt,t.limit).next(Vt=>{Vt.forEach(jt=>{const Jt=qe.fromSegments(jt.documentKey);d.has(Jt)||(d=d.add(Jt),g.push(Jt))})}))}).next(()=>g)}return ce.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),C=v/(null!=t?t.length:1),A=[];for(let N=0;N<v;++N){const H=t?this.on(t[N/C]):XE,Z=this.un(e,H,r[N%C],o),te=this.cn(e,H,u[N%C],d),Fe=g.map(Ve=>this.un(e,H,Ve,!0));A.push(...this.createRange(Z,te,Fe))}return A}un(e,t,r,o){const u=new bf(e,qe.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new bf(e,qe.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new cP(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return ce.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new w(er.comparator),v=!1;for(const C of d.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:g=g.add(A.field))}for(const C of d.orderBy)C.field.isKeyField()||(g=g.add(C.field));return g.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new H_;for(const o of xc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Cf.Te.ce(u,d)}return r.$e()}on(e){const t=new H_;return Cf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new H_;return Cf.Te.ce(yf(this.databaseId,t),r.qe(function(o){const u=xc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new H_);let u=0;for(const d of xc(e)){const g=r[u++];for(const v of o)if(this.ln(t,d.fieldPath)&&A_(g))o=this.fn(o,d,g);else{const C=v.qe(d.kind);Cf.Te.ce(g,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const v=new H_;v.seed(g.$e()),Cf.Te.ce(d,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Ci&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=eD(e),o=z_(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return ce.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{d.push(function(C,A){const N=A?new md(A.sequenceNumber,new Ki(Ef(A.readTime),new qe(vu(A.documentKey)),A.largestBatchId)):md.empty(),H=C.fields.map(([Z,te])=>new gd(er.fromServerFormat(Z),te));return new mf(C.indexId,C.collectionGroup,H,N)}(g,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=eD(e),u=z_(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ce.forEach(g,v=>u.put(AR(v.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ce.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ce.forEach(g,v=>this.wn(e,o,v).next(C=>{const A=this.mn(u,v);return C.isEqual(A)?ce.resolve():this.gn(e,u,v,C,A)}))))})}yn(e,t,r,o){return G_(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return G_(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=G_(e);let u=new w(Tf);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,g)=>{u=u.add(new bf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new w(Tf);const o=this.an(t,e);if(null==o)return r;const u=C_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(A_(d))for(const g of d.arrayValue.values||[])r=r.add(new bf(t.indexId,e.key,this.on(g),o))}else r=r.add(new bf(t.indexId,e.key,XE,o));return r}gn(e,t,r,o,u){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,v,C,A,N){const H=g.getIterator(),Z=v.getIterator();let te=T(H),Fe=T(Z);for(;te||Fe;){let Ve=!1,ut=!1;if(te&&Fe){const Nt=C(te,Fe);Nt<0?ut=!0:Nt>0&&(Ve=!0)}else null!=te?ut=!0:Ve=!0;Ve?(A(Fe),Fe=T(Z)):ut?(N(te),te=T(H)):(te=T(H),Fe=T(Z))}}(o,u,Tf,g=>{d.push(this.yn(e,t,r,g))},g=>{d.push(this.pn(e,t,r,g))}),ce.waitFor(d)}_n(e){let t=1;return z_(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Tf(d,g)).filter((d,g,v)=>!g||0!==Tf(d,v[g-1]));const o=[];o.push(e);for(const d of r){const g=Tf(d,e),v=Tf(d,t);if(0===g)o[0]=e.Ke();else if(g>0&&v<0)o.push(d),o.push(d.Ke());else if(v>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,XE,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,XE,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(OR)}getMinOffset(e,t){return ce.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||ot())).next(OR)}}function NR(n){return oi(n,"collectionParents")}function G_(n){return oi(n,"indexEntries")}function eD(n){return oi(n,"indexConfiguration")}function z_(n){return oi(n,"indexState")}function OR(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;VE(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ki(e.readTime,e.documentKey,t)}const PR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _s{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kR(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const v=r.Z({range:d},(A,N,H)=>(g++,H.delete()));u.push(v.next(()=>{St(1===g)}));const C=[];for(const A of t.mutations){const N=_R(e,A.key.path,t.batchId);u.push(o.delete(N)),C.push(A.key)}return ce.waitFor(u).next(()=>C)}function tD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(41943040,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);class nD{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){St(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new nD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ed(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=sm(e),d=Ed(e);return d.add({}).next(g=>{St("number"==typeof g);const v=new FT(g,t,r,o),C=function(H,Z,te){const Fe=te.baseMutations.map(ut=>B_(H.re,ut)),Ve=te.mutations.map(ut=>B_(H.re,ut));return{userId:Z,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Fe,mutations:Ve}}(this.It,this.userId,v),A=[];let N=new w((H,Z)=>Bt(H.canonicalString(),Z.canonicalString()));for(const H of o){const Z=_R(this.userId,H.key.path,g);N=N.add(H.key.path.popLast()),A.push(d.put(C)),A.push(u.put(Z,B1))}return N.forEach(H=>{A.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.In[g]=v.keys()}),ce.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Ed(e).get(t).next(r=>r?(St(r.userId===this.userId),Df(this.It,r)):null)}Tn(e,t){return this.In[t]?ce.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ed(e).Z({index:"userMutationsIndex",range:o},(d,g,v)=>{g.userId===this.userId&&(St(g.batchId>=r),u=Df(this.It,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ed(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ed(e).W("userMutationsIndex",t).next(r=>r.map(o=>Df(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=YE(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return sm(e).Z({range:o},(d,g,v)=>{const[C,A,N]=d,H=vu(A);if(C===this.userId&&t.path.isEqual(H))return Ed(e).get(N).next(Z=>{if(!Z)throw ot();St(Z.userId===this.userId),u.push(Df(this.It,Z))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new w(Bt);const o=[];return t.forEach(u=>{const d=YE(this.userId,u.path),g=IDBKeyRange.lowerBound(d),v=sm(e).Z({range:g},(C,A,N)=>{const[H,Z,te]=C,Fe=vu(Z);H===this.userId&&u.path.isEqual(Fe)?r=r.add(te):N.done()});o.push(v)}),ce.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=YE(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new w(Bt);return sm(e).Z({range:d},(v,C,A)=>{const[N,H,Z]=v,te=vu(H);N===this.userId&&r.isPrefixOf(te)?te.length===o&&(g=g.add(Z)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ed(e).get(u).next(d=>{if(null===d)throw ot();St(d.userId===this.userId),r.push(Df(this.It,d))}))}),ce.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return kR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ce.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return sm(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const v=vu(u[1]);o.push(v)}else g.done()}).next(()=>{St(0===o.length)})})}containsKey(e,t){return FR(e,this.userId,t)}Rn(e){return LR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FR(n,e,t){const r=YE(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return sm(n).Z({range:u,X:!0},(g,v,C)=>{const[A,N,H]=g;A===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Ed(n){return oi(n,"mutations")}function sm(n){return oi(n,"documentMutations")}function LR(n){return oi(n,"mutationQueues")}class Af{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Af(0)}static vn(){return new Af(-1)}}class hP{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Af(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>bt.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>om(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return om(e).Z((d,g)=>{const v=j_(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>ce.waitFor(u)).next(()=>o)}forEachTarget(e,t){return om(e).Z((r,o)=>{const u=j_(o);t(u)})}Vn(e){return VR(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}Sn(e,t){return VR(e).put("targetGlobalKey",t)}Dn(e,t){return om(e).put(bR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vf(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return om(e).Z({range:o,index:"queryTargetsIndex"},(d,g,v)=>{const C=j_(g);x_(t,C.target)&&(u=C,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Dd(e);return t.forEach(d=>{const g=Qi(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),ce.waitFor(o)}removeMatchingKeys(e,t,r){const o=Dd(e);return ce.forEach(t,u=>{const d=Qi(u.path);return ce.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Dd(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Dd(e);let u=qt();return o.Z({range:r,X:!0},(d,g,v)=>{const C=vu(d[1]),A=new qe(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Qi(t.path),o=IDBKeyRange.bound([r],[_T(r)],!1,!0);let u=0;return Dd(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,g],v,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return om(e).get(t).next(r=>r?j_(r):null)}}function om(n){return oi(n,"targets")}function VR(n){return oi(n,"targetGlobal")}function Dd(n){return oi(n,"targetDocuments")}function UR([n,e],[t,r]){const o=Bt(n,t);return 0===o?Bt(e,r):o}class fP{constructor(e){this.xn=e,this.buffer=new w(UR),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();UR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){pu(r)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fu(r)}yield t.Fn(3e5)}))}}class gP{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(i.at);const r=new fP(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(PR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,g,v,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),SE()<=Pa.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${N} documents in `+(C-v)+`ms\nTotal Duration: ${C-A}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class mP{constructor(e,t){this.db=e,this.garbageCollector=new gP(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return rD(e,r)}removeReference(e,t,r){return rD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rD(e,t)}Gn(e,t){return function(r,o){let u=!1;return LR(r).tt(d=>FR(r,d,o).next(g=>(g&&(u=!0),ce.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const v=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,bt.min()),Dd(e).delete([0,Qi(d.path)])))});o.push(v)}}).next(()=>ce.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rD(e,t)}Kn(e,t){const r=Dd(e);let o,u=i.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:v,sequenceNumber:C})=>{0===d?(u!==i.at&&t(new qe(vu(o)),u),u=C,o=v):u=i.at}).next(()=>{u!==i.at&&t(new qe(vu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rD(n,e){return Dd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qi(e.path),sequenceNumber:r}));var r}class BR{constructor(){this.changes=new wd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yP{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sf(e).put(r)}removeEntry(e,t,r){return Sf(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],QE(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=zn.newInvalidDocument(t);return Sf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(W_(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:zn.newInvalidDocument(t)};return Sf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(W_(t))},(o,u)=>{r={document:this.jn(t,u),size:tD(u)}}).next(()=>r)}getEntries(e,t){let r=vs();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=vs(),o=new h(qe.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),o=o.insert(u,tD(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ce.resolve();let o=new w(GR);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(W_(o.first()),W_(o.last())),d=o.getIterator();let g=d.getNext();return Sf(e).Z({index:"documentKeyIndex",range:u},(v,C,A)=>{const N=qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;g&&GR(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,C),g=d.hasNext()?d.getNext():null),g?A.j(W_(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),QE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sf(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=vs();for(const v of d){const C=this.jn(qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(C.key,C)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=vs();const d=HR(t,r),g=HR(t,Ki.max());return Sf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(v,C,A)=>{const N=this.jn(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new vP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $R(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Qn(e,t){return $R(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function rP(n,e){let t;if(e.document)t=hR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=Ef(e.noDocument.readTime);t=zn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=qe.fromSegments(e.unknownDocument.path),o=Ef(e.unknownDocument.version);t=zn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Vn(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return zn.newInvalidDocument(e)}}function jR(n){return new yP(n)}class vP extends BR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new wd(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new w((u,d)=>Bt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const v=CR(this.Yn.It,d);o=o.add(u.path.popLast()),r+=tD(v)-g.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=CR(this.Yn.It,d.convertToNoDocument(bt.min()));t.push(this.Yn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function $R(n){return oi(n,"remoteDocumentGlobal")}function Sf(n){return oi(n,"remoteDocumentsV14")}function W_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HR(n,e){const t=e.documentKey.path.toArray();return[n,QE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GR(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Bt(t[u],r[u]),o)return o;return o=Bt(t.length,r.length),o||(o=Bt(t[t.length-2],r[r.length-2]),o||Bt(t[t.length-1],r[r.length-1]))}class _P{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zR{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&N_(r.mutation,o,M.empty(),Vn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const o=mu();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=O_();return u.forEach((g,v)=>{d=d.insert(g,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=mu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=vs();const d=P_(),g=P_();return t.forEach((v,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof Nc)?u=u.insert(C.key,C):void 0!==A&&(d.set(C.key,A.mutation.getFieldMask()),N_(A.mutation,C,A.mutation.getFieldMask(),Vn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var N;return g.set(C,new _P(A,null!==(N=d.get(C))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=P_();let o=new h((d,g)=>d-g),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(v=>{const C=t.get(v);if(null===C)return;let A=r.get(v)||M.empty();A=g.applyToLocalView(C,A),r.set(v,A);const N=(o.get(g.batchId)||qt()).add(v);o=o.insert(g.batchId,N)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),C=v.key,A=v.value,N=tR();A.forEach(H=>{if(!u.has(H)){const Z=WM(t.get(H),r.get(H));null!==Z&&N.set(H,Z),u=u.add(H)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return ce.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):AT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ce.resolve(mu());let g=-1,v=u;return d.next(C=>ce.forEach(C,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?ce.resolve():this.getBaseDocument(e,A,N).next(H=>{v=v.insert(A,H)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,v,C,qt())).next(A=>({batchId:g,changes:eR(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=O_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=O_();return this.indexManager.getCollectionParents(e,o).next(d=>ce.forEach(d,g=>{const v=(C=t,A=g.child(o),new Rc(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,v)=>{const C=v.getKey();null===o.get(C)&&(o=o.insert(C,zn.newInvalidDocument(C)))});let d=O_();return o.forEach((g,v)=>{const C=u.get(g);void 0!==C&&N_(C.mutation,v,M.empty(),Vn.now()),xT(t,v)&&(d=d.insert(g,v))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(zn.newInvalidDocument(t))}}class wP{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:si(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:UT(r.bundledQuery),readTime:si(r.readTime)}),ce.resolve();var r}}class IP{constructor(){this.overlays=new h(qe.comparator),this.es=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mu();return ce.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const o=mu(),u=t.length+1,d=new qe(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,C=v.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new h((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=mu(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const g=mu(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((C,A)=>g.set(C,A)),!(g.size()>=o)););return ce.resolve(g)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new VT(t,r));let u=this.es.get(t);void 0===u&&(u=qt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class $T{constructor(){this.ns=new w(ai.ss),this.rs=new w(ai.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ai(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ai(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new sn([])),r=new ai(t,e),o=new ai(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new sn([])),r=new ai(t,e),o=new ai(t,e+1);let u=qt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new ai(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ai{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||qe.comparator(e.key,t.key)}}class EP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new w(ai.ss)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new FT(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.gs=this.gs.add(new ai(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,t){return ce.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ce.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ai(t,0),o=new ai(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const g=this.ys(d._s);u.push(g)}),ce.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new w(Bt);return t.forEach(o=>{const u=new ai(o,0),d=new ai(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),ce.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new ai(new qe(u),0);let g=new w(Bt);return this.gs.forEachWhile(v=>{const C=v.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(g=g.add(v._s)),!0)},d),ce.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){St(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ce.forEach(t.mutations,o=>{const u=new ai(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ai(t,0),o=this.gs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ce.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class DP{constructor(e){this.Es=e,this.docs=new h(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():zn.newInvalidDocument(o))}),ce.resolve(r)}getAllFromCollection(e,t,r){let o=vs();const u=new qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:v}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||VE(LE(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ot()}As(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CP(this)}getSize(e){return ce.resolve(this.size)}}class CP extends BR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class bP{constructor(e){this.persistence=e,this.Rs=new wd(t=>vf(t),x_),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new $T,this.targetCount=0,this.vs=Af.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ce.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Af(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Dn(t),ce.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ce.waitFor(u).next(()=>o)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ce.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Ps.containsKey(t))}}class WR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new i(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new bP(this),this.indexManager=new lP,this.remoteDocumentCache=new DP(r=>this.referenceDelegate.xs(r)),this.It=new DR(t),this.Ns=new wP(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new EP(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const o=new TP(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return ce.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class TP extends UE{constructor(e){super(),this.currentSequenceNumber=e}}class iD{constructor(e){this.persistence=e,this.Fs=new $T,this.$s=null}static Bs(e){return new iD(e)}get Ls(){if(this.$s)return this.$s;throw ot()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,r=>{const o=qe.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ce.or([()=>ce.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class AP{constructor(e){this.It=e}$(e,t,r,o){const u=new T_("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vR,{unique:!0}),g.createObjectStore("documentMutations"),qR(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=ce.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),qR(e)),d=d.next(()=>function(g){const v=g.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,v){return v.store("mutations").W().next(C=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vR,{unique:!0});const A=v.store("mutations"),N=C.map(H=>A.put(H));return ce.waitFor(N)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:J1});v.createIndex("collectionPathOverlayIndex",X1,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",eP,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:j1});v.createIndex("documentKeyIndex",$1),v.createIndex("collectionGroupIndex",H1)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Z1}).createIndex("sequenceNumberIndex",K1,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:Y1}).createIndex("documentKeyIndex",Q1,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=tD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ce.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>ce.forEach(g,v=>{St(v.userId===u.userId);const C=Df(this.It,v);return kR(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,g)=>{const v=new sn(d),C=[0,Qi(v)];u.push(t.get(C).next(A=>A?ce.resolve():t.put({targetId:0,path:Qi(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ce.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:q1});const r=t.store("collectionParents"),o=new jT,u=d=>{if(o.add(d)){const g=d.lastSegment(),v=d.popLast();return r.put({collectionId:g,parent:Qi(v)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const v=new sn(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,v],C)=>{const A=vu(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=j_(o),d=bR(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),v=(C=d,C.document?new qe(sn.fromString(C.document.name).popFirst(5)):C.noDocument?qe.fromSegments(C.noDocument.path):C.unknownDocument?qe.fromSegments(C.unknownDocument.path):ot()).path.toArray();var C;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(A))}).next(()=>ce.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=jR(this.It),u=new WR(iD.Bs,this.It.re);return r.W().next(d=>{const g=new Map;return d.forEach(v=>{var C;let A=null!==(C=g.get(v.userId))&&void 0!==C?C:qt();Df(this.It,v).keys().forEach(N=>A=A.add(N)),g.set(v.userId,A)}),ce.forEach(g,(v,C)=>{const A=new Or(C),N=JE.oe(this.It,A),H=u.getIndexManager(A),Z=nD.oe(A,this.It,H,u.referenceDelegate);return new zR(o,Z,N,H).recalculateAndSaveOverlaysForDocumentKeys(new kT(t,i.at),v).next()})})}}function qR(n){n.createObjectStore("targetDocuments",{keyPath:z1}).createIndex("documentTargetsIndex",W1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",G1,{unique:!0}),n.createObjectStore("targetGlobal")}const HT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GT{constructor(e,t,r,o,u,d,g,v,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=C,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=H=>Promise.resolve(),!GT.C())throw new Oe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mP(this,o),this.ii=t+"main",this.It=new DR(v),this.ri=new Ho(this.ii,this.Xs,new AP(this.It)),this.Cs=new hP(this.referenceDelegate,this.It),this.remoteDocumentCache=jR(this.It),this.Ns=new iP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(pe.FAILED_PRECONDITION,HT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new i(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(pu(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return q_(e).get("owner").next(t=>ce.resolve(this.mi(t)))}gi(e){return sD(e).delete(this.clientId)}yi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=oi(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(v=>-1===d.indexOf(v));return ce.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ce.resolve(!0):q_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Oe(pe.FAILED_PRECONDITION,HT);return!1}}return!(!this.networkEnabled||!this.inForeground)||sD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kT(t,i.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>sD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return nD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dP(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return JE.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?nP:14===d?ER:13===d?IR:12===d?tP:11===d?wR:void ot();var d;let g;return this.ri.runTransaction(e,o,u,v=>(g=new kT(v,this.Ss?this.Ss.next():i.at),"readwrite-primary"===t?this.fi(g).next(C=>!!C||this.di(g)).next(C=>{if(!C)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Oe(pe.FAILED_PRECONDITION,IT);return r(g)}).next(C=>this.wi(g).next(()=>C)):this.Vi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Vi(e){return q_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(pe.FAILED_PRECONDITION,HT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return q_(e).put("owner",t)}static C(){return Ho.C()}_i(e){const t=q_(e);return t.get("owner").next(r=>this.mi(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,rn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function q_(n){return oi(n,"owner")}function sD(n){return oi(n,"clientMetadata")}function zT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class WT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=qt(),o=qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new WT(e,t.fromCache,r,o)}}class ZR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(PM(t))return ce.resolve(null);let r=Yi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=GE(t,null,"F"),r=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=qt(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const C=this.Fi(t,g);return this.$i(t,C,d,v.readTime)?this.ki(e,GE(t,null,"F")):this.Bi(e,C,t,v)}))})))}Oi(e,t,r,o){return PM(t)||o.isEqual(bt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(SE()<=Pa.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ST(t)),this.Bi(e,d,t,Wg(o,-1)))})}Fi(e,t){let r=new w(LM(e));return t.forEach((o,u)=>{xT(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return SE()<=Pa.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",ST(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ki.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class SP{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new h(Bt),this.qi=new wd(u=>vf(u),x_),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function KR(n,e,t,r){return new SP(n,e,t,r)}function YR(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,Ie.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let v=qt();for(const C of o){d.push(C.batchId);for(const A of C.mutations)v=v.add(A.key)}for(const C of u){g.push(C.batchId);for(const A of C.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:g}))})})}),qT.apply(this,arguments)}function xP(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,v,C){const A=v.batch,N=A.keys();let H=ce.resolve();return N.forEach(Z=>{H=H.next(()=>C.getEntry(g,Z)).next(te=>{const Fe=v.docVersions.get(Z);St(null!==Fe),te.version.compareTo(Fe)<0&&(A.applyToRemoteDocument(te,v),te.isValidDocument()&&(te.setReadTime(v.commitVersion),C.addEntry(te)))})}),H.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=qt();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(g=g.add(d.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function QR(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function MP(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const g=[];e.targetChanges.forEach((A,N)=>{const H=o.get(N);if(!H)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let Z=H.withSequenceNumber(u.currentSequenceNumber);var te,Fe,Ve;e.targetMismatches.has(N)?Z=Z.withResumeToken($.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):A.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(A.resumeToken,r)),o=o.insert(N,Z),Fe=Z,Ve=A,(0===(te=H).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,Z))});let v=vs(),C=qt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(JR(u,d,e.documentUpdates).next(A=>{v=A.Wi,C=A.zi})),!r.isEqual(bt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return ce.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,C)).next(()=>v)}).then(u=>(t.Ui=o,u))}function JR(n,e,t){let r=qt(),o=qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=vs();return t.forEach((g,v)=>{const C=u.get(g);v.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(bt.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!C.isValidDocument()||v.version.compareTo(C.version)>0||0===v.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):je("LocalStore","Ignoring outdated watch update for ",g,". Current version:",C.version," Watch version:",v.version)}),{Wi:d,zi:o}})}function RP(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function am(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ce.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Id(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function um(n,e,t){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ie.Z)(function*(n,e,t){const r=Ye(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!pu(d))throw d;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),ZT.apply(this,arguments)}function oD(n,e,t){const r=Ye(n);let o=bt.min(),u=qt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,v,C){const A=Ye(g),N=A.qi.get(C);return void 0!==N?ce.resolve(A.Ui.get(N)):A.Cs.getTargetData(v,C)}(r,d,Yi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:bt.min(),t?u:qt())).next(g=>(tN(r,FM(e),g),{documents:g,Hi:u})))}function XR(n,e){const t=Ye(n),r=Ye(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function eN(n,e){const t=Ye(n),r=t.Ki.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,Wg(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(tN(t,e,o),o))}function tN(n,e,t){let r=n.Ki.get(e)||bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function KT(){return KT=(0,Ie.Z)(function*(n,e,t,r){const o=Ye(n);let u=qt(),d=vs();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,N)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),v=yield am(o,(C=r,Yi(Qg(sn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>JR(C,g,d).next(A=>(g.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,v.targetId).next(()=>o.Cs.addMatchingKeys(C,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),KT.apply(this,arguments)}function OP(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,Ie.Z)(function*(n,e,t=qt()){const r=yield am(n,Yi(UT(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=si(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken($.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),YT.apply(this,arguments)}function nN(n,e){return`firestore_clients_${n}_${e}`}function rN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function QT(n,e){return`firestore_targets_${n}_${e}`}class aD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Oe(o.error.code,o.error.message))),d?new aD(e,t,o.state,u):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Z_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Oe(r.error.code,r.error.message))),u?new Z_(e,r.state,o):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=ZE();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Zg(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new uD(e,u):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class JT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new JT(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class XT{constructor(){this.activeTargetIds=ZE()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eA{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new h(Bt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=nN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new XT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(nN(e.persistenceKey,o));if(u){const d=uD.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(QT(this.persistenceKey,e));if(r){const o=Z_.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(QT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=i.at;if(null!=u)try{const g=JSON.parse(u);St("number"==typeof g),d=g}catch(g){cr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==i.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new aD(this.currentUser,e,t,r),u=rN(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=rN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=QT(this.persistenceKey,e),u=new Z_(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return uD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return aD.Zi(new Or(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Z_.Zi(o,t)}yr(e){return JT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=ZE();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class iN{constructor(){this.Lr=new XT,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new XT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PP{qr(e){}shutdown(){}}class sN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class LP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);je("RestConnection","Sending: ",d,r);const g={};return this.lo(g,o,u),this.fo(e,d,g,r).then(v=>(je("RestConnection","Received: ",v),v),v=>{throw Ac("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${kP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const g=new AE;g.setWithCredentials(!0),g.listenOnce(bE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case $g.NO_ERROR:const C=g.getResponseJson();je("Connection","XHR received:",JSON.stringify(C)),u(C);break;case $g.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),d(new Oe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case $g.HTTP_ERROR:const A=g.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const H=function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(te)>=0?te:pe.UNKNOWN}(N.status);d(new Oe(H,N.message))}else d(new Oe(pe.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Oe(pe.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=DE(),d=CE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new TE({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=o.join("");je("Connection","Creating WebChannel: "+v,g);const C=u.createWebChannel(v,g);let A=!1,N=!1;const H=new FP({Hr:te=>{N?je("Connection","Not sending because WebChannel is closed:",te):(A||(je("Connection","Opening WebChannel transport."),C.open(),A=!0),je("Connection","WebChannel sending:",te),C.send(te))},Jr:()=>C.close()}),Z=(te,Fe,Ve)=>{te.listen(Fe,ut=>{try{Ve(ut)}catch(Nt){setTimeout(()=>{throw Nt},0)}})};return Z(C,Gg.EventType.OPEN,()=>{N||je("Connection","WebChannel transport opened.")}),Z(C,Gg.EventType.CLOSE,()=>{N||(N=!0,je("Connection","WebChannel transport closed"),H.io())}),Z(C,Gg.EventType.ERROR,te=>{N||(N=!0,Ac("Connection","WebChannel transport errored:",te),H.io(new Oe(pe.UNAVAILABLE,"The operation could not be completed")))}),Z(C,Gg.EventType.MESSAGE,te=>{var Fe;if(!N){const Ve=te.data[0];St(!!Ve);const ut=Ve,Nt=ut.error||(null===(Fe=ut[0])||void 0===Fe?void 0:Fe.error);if(Nt){je("Connection","WebChannel received error:",Nt);const Lt=Nt.status;let Vt=function(Jt){const Gr=Pr[Jt];if(void 0!==Gr)return JM(Gr)}(Lt),jt=Nt.message;void 0===Vt&&(Vt=pe.INTERNAL,jt="Unknown error status: "+Lt+" with message "+Nt.message),N=!0,H.io(new Oe(Vt,jt)),C.close()}else je("Connection","WebChannel received:",Ve),H.ro(Ve)}}),Z(d,Hg.STAT_EVENT,te=>{te.stat===ff.PROXY?je("Connection","Detected buffering proxy"):te.stat===ff.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.so()},0),H}}function oN(){return typeof window<"u"?window:null}function cD(){return typeof document<"u"?document:null}function K_(n){return new S1(n,!0)}class tA{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&je("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class aN{constructor(e,t,r,o,u,d,g,v){this.Hs=e,this.vo=r,this.Vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new tA(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ie.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Oe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.No.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}jo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VP extends aN{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function R1(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:ot(),o=e.targetChange.targetIds||[],u=function(v,C){return v.gt?(St(void 0===C||"string"==typeof C),$.fromBase64String(C||"")):(St(void 0===C||C instanceof Uint8Array),$.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const C=void 0===v.code?pe.UNKNOWN:JM(v.code);return new Oe(C,v.message||"")}(d);t=new rR(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=yu(n,r.document.name),u=si(r.document.updateTime),d=new Di({mapValue:{fields:r.document.fields}}),g=zn.newFoundDocument(o,u,d);t=new KE(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=yu(n,r.document),u=r.readTime?si(r.readTime):bt.min(),d=zn.newNoDocument(o,u);t=new KE([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=yu(n,r.document);t=new KE([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ot();{const r=e.filter,u=new w1(r.count||0);t=new nR(r.targetId,u)}}var v;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?si(u.readTime):bt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=U_(this.It),t.addTarget=function(o,u){let d;const g=u.target;return d=$E(g)?{documents:fR(o,g)}:{query:PT(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=aR(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(d.readTime=L_(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function O1(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=U_(this.It),t.removeTarget=e,this.Lo(t)}}class UP extends aN{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function N1(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,o){let u=si(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=si(o)),new y1(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.tu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=U_(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>B_(this.It,r))};this.Lo(t)}}class BP extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=o,this.su=!1}iu(){if(this.su)throw new Oe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(pe.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(pe.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class $P{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(cr(t),this.uu=!1):je("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class HP{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.qr(g=>{r.enqueueAndForget((0,Ie.Z)(function*(){var v;Oc(d)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ie.Z)(function*(C){const A=Ye(C);A.wu.add(4),yield cm(A),A.yu.set("Unknown"),A.wu.delete(4),yield Y_(A)}),function(C){return v.apply(this,arguments)})(d))}))}),this.yu=new $P(r,o)}}function Y_(n){return rA.apply(this,arguments)}function rA(){return rA=(0,Ie.Z)(function*(n){if(Oc(n))for(const e of n.mu)yield e(!0)}),rA.apply(this,arguments)}function cm(n){return iA.apply(this,arguments)}function iA(){return iA=(0,Ie.Z)(function*(n){for(const e of n.mu)yield e(!1)}),iA.apply(this,arguments)}function lD(n,e){const t=Ye(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),aA(t)?oA(t):dm(t).Oo()&&sA(t,e))}function Q_(n,e){const t=Ye(n),r=dm(t);t._u.delete(e),r.Oo()&&uN(t,e),0===t._u.size&&(r.Oo()?r.$o():Oc(t)&&t.yu.set("Unknown"))}function sA(n,e){n.pu.Mt(e.targetId),dm(n).Ho(e)}function uN(n,e){n.pu.Mt(e),dm(n).Jo(e)}function oA(n){n.pu=new b1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),dm(n).start(),n.yu.cu()}function aA(n){return Oc(n)&&!dm(n).ko()&&n._u.size>0}function Oc(n){return 0===Ye(n).wu.size}function cN(n){n.pu=void 0}function GP(n){return uA.apply(this,arguments)}function uA(){return uA=(0,Ie.Z)(function*(n){n._u.forEach((e,t)=>{sA(n,e)})}),uA.apply(this,arguments)}function zP(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,Ie.Z)(function*(n,e){cN(n),aA(n)?(n.yu.lu(e),oA(n)):n.yu.set("Unknown")}),cA.apply(this,arguments)}function WP(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,Ie.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof rR&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o._u.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o._u.delete(g),o.pu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dD(n,r)}else if(e instanceof KE?n.pu.Gt(e):e instanceof nR?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(bt.min()))try{const r=yield QR(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.te(u);return d.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const C=o._u.get(v);C&&o._u.set(v,C.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const v=o._u.get(g);if(!v)return;o._u.set(g,v.withResumeToken($.EMPTY_BYTE_STRING,v.snapshotVersion)),uN(o,g);const C=new Id(v.target,g,1,v.sequenceNumber);sA(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield dD(n,r)}var r}),lA.apply(this,arguments)}function dD(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,Ie.Z)(function*(n,e,t){if(!pu(e))throw e;n.wu.add(1),yield cm(n),n.yu.set("Offline"),t||(t=()=>QR(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Y_(n)}))}),dA.apply(this,arguments)}function lN(n,e){return e().catch(t=>dD(n,t,e))}function lm(n){return hA.apply(this,arguments)}function hA(){return hA=(0,Ie.Z)(function*(n){const e=Ye(n),t=Cd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;qP(e);)try{const o=yield RP(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,ZP(e,o)}catch(o){yield dD(e,o)}dN(e)&&hN(e)}),hA.apply(this,arguments)}function qP(n){return Oc(n)&&n.du.length<10}function ZP(n,e){n.du.push(e);const t=Cd(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function dN(n){return Oc(n)&&!Cd(n).ko()&&n.du.length>0}function hN(n){Cd(n).start()}function KP(n){return fA.apply(this,arguments)}function fA(){return fA=(0,Ie.Z)(function*(n){Cd(n).nu()}),fA.apply(this,arguments)}function YP(n){return pA.apply(this,arguments)}function pA(){return pA=(0,Ie.Z)(function*(n){const e=Cd(n);for(const t of n.du)e.Zo(t.mutations)}),pA.apply(this,arguments)}function QP(n,e,t){return gA.apply(this,arguments)}function gA(){return gA=(0,Ie.Z)(function*(n,e,t){const r=n.du.shift(),o=LT.from(r,e,t);yield lN(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield lm(n)}),gA.apply(this,arguments)}function JP(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,Ie.Z)(function*(n,e){var t;e&&Cd(n).Xo&&(yield(t=(0,Ie.Z)(function*(r,o){if(QM(u=o.code)&&u!==pe.ABORTED){const d=r.du.shift();Cd(r).Fo(),yield lN(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield lm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),dN(n)&&hN(n)}),mA.apply(this,arguments)}function fN(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ie.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Oc(t);t.wu.add(3),yield cm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Y_(t)}),yA.apply(this,arguments)}function vA(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,Ie.Z)(function*(n,e){const t=Ye(n);e?(t.wu.delete(2),yield Y_(t)):e||(t.wu.add(2),yield cm(t),t.yu.set("Unknown"))}),_A.apply(this,arguments)}function dm(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ye(e);return o.iu(),new VP(t,o.So,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:GP.bind(null,n),Zr:zP.bind(null,n),zo:WP.bind(null,n)}),n.mu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Fo(),aA(n)?oA(n):n.yu.set("Unknown")):(yield n.Iu.stop(),cN(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Cd(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ye(e);return o.iu(),new UP(t,o.So,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:KP.bind(null,n),Zr:JP.bind(null,n),eu:YP.bind(null,n),tu:QP.bind(null,n)}),n.mu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Tu.Fo(),yield lm(n)):(yield n.Tu.stop(),n.du.length>0&&(je("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class wA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new wA(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(n,e){if(cr("AsyncQueue",`${e}: ${n}`),pu(n))return new Oe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class fm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=O_(),this.sortedSet=new h(this.comparator)}static emptySet(e){return new fm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pN{constructor(){this.Eu=new h(qe.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ot():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class pm{constructor(e,t,r,o,u,d,g,v,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new pm(e,t,fm.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&M_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class XP{constructor(){this.Ru=void 0,this.listeners=[]}}class ek{constructor(){this.queries=new wd(e=>kM(e),M_),this.onlineState="Unknown",this.bu=new Set}}function IA(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new XP),o)try{u.Ru=yield t.onListen(r)}catch(d){const g=hm(d,`Initialization of query '${ST(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.vu(u.Ru)&&bA(t)}),EA.apply(this,arguments)}function DA(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),CA.apply(this,arguments)}function tk(n,e){const t=Ye(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.vu(o)&&(r=!0);d.Ru=o}}r&&bA(t)}function nk(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function bA(n){n.bu.forEach(e=>{e.next()})}class TA{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new pm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=pm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class rk{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class gN{constructor(e){this.It=e}Ji(e){return yu(this.It,e)}Yi(e){return e.metadata.exists?hR(this.It,e.document,!1):zn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return si(e)}}class ik{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mN(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new gN(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||qt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function NP(n,e,t,r){return KT.apply(this,arguments)}(e.localStore,new gN(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield OP(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function mN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yN{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class _N{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=qt(),this.mutatedKeys=qt(),this.Gu=LM(e),this.Qu=new fm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new pN,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const H=o.get(A),Z=xT(this.query,N)?N:null,te=!!H&&this.mutatedKeys.has(H.key),Fe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ve=!1;H&&Z?H.data.isEqual(Z.data)?te!==Fe&&(r.track({type:3,doc:Z}),Ve=!0):this.Hu(H,Z)||(r.track({type:2,doc:Z}),Ve=!0,(v&&this.Gu(Z,v)>0||C&&this.Gu(Z,C)<0)&&(g=!0)):!H&&Z?(r.track({type:0,doc:Z}),Ve=!0):H&&!Z&&(r.track({type:1,doc:H}),Ve=!0,(v||C)&&(g=!0)),Ve&&(Z?(d=d.add(Z),u=Fe?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,A)=>function(N,H){const Z=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return Z(N)-Z(H)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,v=g!==this.qu;return this.qu=g,0!==u.length||v?{snapshot:new pm(this.query,e.Qu,o,u,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new pN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new vN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new yN(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return pm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class sk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ok{constructor(e){this.key=e,this.nc=!1}}class ak{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new wd(g=>kM(g),M_),this.rc=new Map,this.oc=new Set,this.uc=new h(qe.comparator),this.cc=new Map,this.ac=new $T,this.hc={},this.lc=new Map,this.fc=Af.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function uk(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,Ie.Z)(function*(n,e){const t=YA(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield am(t.localStore,Yi(e));t.isPrimaryClient&&lD(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield SA(t,e,r,"current"===g,d.resumeToken)}return o}),AA.apply(this,arguments)}function SA(n,e,t,r,o){return xA.apply(this,arguments)}function xA(){return xA=(0,Ie.Z)(function*(n,e,t,r,o){n._c=(N,H,Z)=>{return(te=(0,Ie.Z)(function*(Fe,Ve,ut,Nt){let Lt=Ve.view.Wu(ut);Lt.$i&&(Lt=yield oD(Fe.localStore,Ve.query,!1).then(({documents:Jt})=>Ve.view.Wu(Jt,Lt)));const Vt=Nt&&Nt.targetChanges.get(Ve.targetId),jt=Ve.view.applyChanges(Lt,Fe.isPrimaryClient,Vt);return UA(Fe,Ve.targetId,jt.Xu),jt.snapshot}),function(Fe,Ve,ut,Nt){return te.apply(this,arguments)})(n,N,H,Z);var te};const u=yield oD(n.localStore,e,!0),d=new _N(e,u.Hi),g=d.Wu(u.documents),v=F_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(g,n.isPrimaryClient,v);UA(n,t,C.Xu);const A=new sk(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),xA.apply(this,arguments)}function ck(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!M_(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield um(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Q_(t.remoteStore,r.targetId),gm(t,r.targetId)}).catch(fu))):(gm(t,r.targetId),yield um(t.localStore,r.targetId,!0))}),MA.apply(this,arguments)}function RA(){return RA=(0,Ie.Z)(function*(n,e,t){const r=QA(n);try{const o=yield function(u,d){const g=Ye(u),v=Vn.now(),C=d.reduce((H,Z)=>H.add(Z.key),qt());let A,N;return g.persistence.runTransaction("Locally write mutations","readwrite",H=>{let Z=vs(),te=qt();return g.Gi.getEntries(H,C).next(Fe=>{Z=Fe,Z.forEach((Ve,ut)=>{ut.isValidDocument()||(te=te.add(Ve))})}).next(()=>g.localDocuments.getOverlayedDocuments(H,Z)).next(Fe=>{A=Fe;const Ve=[];for(const ut of d){const Nt=_1(ut,A.get(ut.key).overlayedDocument);null!=Nt&&Ve.push(new Nc(ut.key,Nt,TM(Nt.value.mapValue),sr.exists(!0)))}return g.mutationQueue.addMutationBatch(H,v,Ve,d)}).next(Fe=>{N=Fe;const Ve=Fe.applyToLocalDocumentSet(A,te);return g.documentOverlayCache.saveOverlays(H,Fe.batchId,Ve)})}).then(()=>({batchId:N.batchId,changes:eR(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let v=u.hc[u.currentUser.toKey()];v||(v=new h(Bt)),v=v.insert(d,g),u.hc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Pc(r,o.changes),yield lm(r.remoteStore)}catch(o){const u=hm(o,"Failed to persist write");t.reject(u)}}),RA.apply(this,arguments)}function wN(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,Ie.Z)(function*(n,e){const t=Ye(n);try{const r=yield MP(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(St(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?St(d.nc):o.removedDocuments.size>0&&(St(d.nc),d.nc=!1))}),yield Pc(t,r,e)}catch(r){yield fu(r)}}),NA.apply(this,arguments)}function IN(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const g=d.view.Pu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=Ye(u);g.onlineState=d;let v=!1;g.queries.forEach((C,A)=>{for(const N of A.listeners)N.Pu(d)&&(v=!0)}),v&&bA(g)}(r.eventManager,e),o.length&&r.sc.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dk(n,e,t){return OA.apply(this,arguments)}function OA(){return OA=(0,Ie.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new h(qe.comparator);d=d.insert(u,zn.newNoDocument(u,bt.min()));const g=qt().add(u),v=new k_(bt.min(),new Map,new w(Bt),d,g);yield wN(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),BA(r)}else yield um(r.localStore,e,!1).then(()=>gm(r,e,t)).catch(fu)}),OA.apply(this,arguments)}function hk(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield xP(t.localStore,e);VA(t,r,null),LA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pc(t,o)}catch(o){yield fu(o)}}),PA.apply(this,arguments)}function fk(n,e,t){return kA.apply(this,arguments)}function kA(){return kA=(0,Ie.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,d){const g=Ye(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let C;return g.mutationQueue.lookupMutationBatch(v,d).next(A=>(St(null!==A),C=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,C,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,C)).next(()=>g.localDocuments.getDocuments(v,C))})}(r.localStore,e);VA(r,e,t),LA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(r,o)}catch(o){yield fu(o)}}),kA.apply(this,arguments)}function FA(){return FA=(0,Ie.Z)(function*(n,e){const t=Ye(n);Oc(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ye(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),FA.apply(this,arguments)}function LA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function VA(n,e,t){const r=Ye(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function gm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||EN(n,r)})}function EN(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Q_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),BA(n))}function UA(n,e,t){for(const r of t)r instanceof yN?(n.ac.addReference(r.key,e),gk(n,r)):r instanceof vN?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||EN(n,r.key)):ot()}function gk(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.oc.add(r),BA(n))}function BA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new ok(t)),n.uc=n.uc.insert(t,r),lD(n.remoteStore,new Id(Yi(Qg(t.path)),r,2,i.at))}}function Pc(n,e,t){return jA.apply(this,arguments)}function jA(){return jA=(0,Ie.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],d=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,v)=>{d.push(r._c(v,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=WT.Ci(v.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.sc.zo(o),yield(g=(0,Ie.Z)(function*(v,C){const A=Ye(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ce.forEach(C,H=>ce.forEach(H.Si,Z=>A.persistence.referenceDelegate.addReference(N,H.targetId,Z)).next(()=>ce.forEach(H.Di,Z=>A.persistence.referenceDelegate.removeReference(N,H.targetId,Z)))))}catch(N){if(!pu(N))throw N;je("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const H=N.targetId;if(!N.fromCache){const Z=A.Ui.get(H),Fe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);A.Ui=A.Ui.insert(H,Fe)}}}),function(v,C){return g.apply(this,arguments)})(r.localStore,u))}),jA.apply(this,arguments)}function mk(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,Ie.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield YR(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(g=>{g.reject(new Oe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pc(t,r.ji)}var o}),$A.apply(this,arguments)}function yk(n,e){const t=Ye(n),r=t.cc.get(e);if(r&&r.nc)return qt().add(r.key);{let o=qt();const u=t.rc.get(e);if(!u)return o;for(const d of u){const g=t.ic.get(d);o=o.unionWith(g.view.ju)}return o}}function vk(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,Ie.Z)(function*(n,e){const t=Ye(n),r=yield oD(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&UA(t,e.targetId,o.Xu),o}),HA.apply(this,arguments)}function _k(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,Ie.Z)(function*(n,e){const t=Ye(n);return eN(t.localStore,e).then(r=>Pc(t,r))}),GA.apply(this,arguments)}function wk(n,e,t,r){return zA.apply(this,arguments)}function zA(){return zA=(0,Ie.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(d,g){const v=Ye(d),C=Ye(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,g).next(N=>N?v.localDocuments.getDocuments(A,N):ce.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield lm(o.remoteStore):"acknowledged"===t||"rejected"===t?(VA(o,e,r||null),LA(o,e),g=e,Ye(Ye(o.localStore).mutationQueue).An(g)):ot(),yield Pc(o,u)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),zA.apply(this,arguments)}function WA(){return WA=(0,Ie.Z)(function*(n,e){const t=Ye(n);if(YA(t),QA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield DN(t,r.toArray());t.dc=!0,yield vA(t.remoteStore,!0);for(const u of o)lD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(gm(t,d),um(t.localStore,d,!0))),Q_(t.remoteStore,d)}),yield o,yield DN(t,r),function(u){const d=Ye(u);d.cc.forEach((g,v)=>{Q_(d.remoteStore,v)}),d.ac.fs(),d.cc=new Map,d.uc=new h(qe.comparator)}(t),t.dc=!1,yield vA(t.remoteStore,!1)}}),WA.apply(this,arguments)}function DN(n,e,t){return qA.apply(this,arguments)}function qA(){return qA=(0,Ie.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const d of e){let g;const v=r.rc.get(d);if(v&&0!==v.length){g=yield am(r.localStore,Yi(v[0]));for(const C of v){const A=r.ic.get(C),N=yield vk(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield XR(r.localStore,d);g=yield am(r.localStore,C),yield SA(r,CN(C),d,!1,g.resumeToken)}o.push(g)}return r.sc.zo(u),o}),qA.apply(this,arguments)}function CN(n){return OM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ek(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).vi()}function Dk(n,e,t,r){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,Ie.Z)(function*(n,e,t,r){const o=Ye(n);if(o.dc)return void je("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield eN(o.localStore,FM(u[0])),g=k_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$.EMPTY_BYTE_STRING);yield Pc(o,d,g);break}case"rejected":yield um(o.localStore,e,!0),gm(o,e,r);break;default:ot()}}),ZA.apply(this,arguments)}function Ck(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,Ie.Z)(function*(n,e,t){const r=YA(n);if(r.dc){for(const o of e){if(r.rc.has(o)){je("SyncEngine","Adding an already active target "+o);continue}const u=yield XR(r.localStore,o),d=yield am(r.localStore,u);yield SA(r,CN(u),d.targetId,!1,d.resumeToken),lD(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield um(r.localStore,o,!1).then(()=>{Q_(r.remoteStore,o),gm(r,o)}).catch(fu))}}),KA.apply(this,arguments)}function YA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dk.bind(null,e),e.sc.zo=tk.bind(null,e.eventManager),e.sc.wc=nk.bind(null,e.eventManager),e}function QA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class bN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.It=K_(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return KR(this.persistence,new ZR,e.initialUser,this.It)}yc(e){return new WR(iD.Bs,this.It)}gc(e){return new iN}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class TN extends bN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield QA(r.Ac.syncEngine),yield lm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return KR(this.persistence,new ZR,e.initialUser,this.It)}Tc(e,t){return new pP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new wM(t,this.persistence);return new _M(e.asyncQueue,r)}yc(e){const t=zT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new GT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oN(),cD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new iN}}class Tk extends TN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof eA&&(r.sharedClientState.syncEngine={Fr:wk.bind(null,o),$r:Dk.bind(null,o),Br:Ck.bind(null,o),vi:Ek.bind(null,o),Mr:_k.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ie.Z)(function*(d){yield function Ik(n,e){return WA.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=oN();if(!eA.C(t))throw new Oe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class JA{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>IN(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,r.syncEngine),yield vA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ek}createDatastore(e){const t=K_(e.databaseInfo.databaseId),r=new LP(e.databaseInfo);return new BP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>IN(this.syncEngine,g,0),d=sN.C()?new sN:new PP,new HP(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,v,C){const A=new ak(r,o,u,d,g,v);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Ye(t);je("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield cm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function XA(n,e,t){if(!t)throw new Oe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AN(n,e,t,r){if(!0===e&&!0===r)throw new Oe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SN(n){if(!qe.isDocumentKey(n))throw new Oe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xN(n){if(qe.isDocumentKey(n))throw new Oe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hD(n);throw new Oe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MN(n,e){if(e<=0)throw new Oe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const RN=new Map;class NN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,AN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NE;switch(t.type){case"gapi":return new E_(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=RN.get(e);t&&(je("ComponentProvider","Removing Datastore"),RN.delete(e),t.terminate())}(this),Promise.resolve()}}function ON(n,e,t,r={}){var o;const u=(n=on(n,J_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ac("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=Or.MOCK_USER;else{d=(0,rn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Oe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Or(v)}n._authCredentials=new Sc(new RE(d,g))}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class _u extends Pi{constructor(e,t,r){super(e,t,Qg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new qe(e))}withConverter(e){return new _u(this.firestore,e,this._path)}}function eS(n,e,...t){if(n=(0,rn.m9)(n),XA("collection","path",e),n instanceof J_){const r=sn.fromString(e,...t);return xN(r),new _u(n,null,r)}{if(!(n instanceof tr||n instanceof _u))throw new Oe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return xN(r),new _u(n.firestore,null,r)}}function X_(n,e,...t){if(n=(0,rn.m9)(n),1===arguments.length&&(e=vT.R()),XA("doc","path",e),n instanceof J_){const r=sn.fromString(e,...t);return SN(r),new tr(n,null,new qe(r))}{if(!(n instanceof tr||n instanceof _u))throw new Oe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return SN(r),new tr(n.firestore,n instanceof _u?n.converter:null,new qe(r))}}function PN(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),(n instanceof tr||n instanceof _u)&&(e instanceof tr||e instanceof _u)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tS(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&M_(n._query,e._query)&&n.converter===e.converter}function kN(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Sk{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new wr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new rk(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ie.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Rk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,d){const g=Ye(u),v=U_(g.It)+"/documents",C={documents:d.map(Z=>V_(g.It,Z))},A=yield g._o("BatchGetDocuments",v,C,d.length),N=new Map;A.forEach(Z=>{const te=function M1(n,e){return"found"in e?function(t,r){St(!!r.found);const o=yu(t,r.found.name),u=si(r.found.updateTime),d=new Di({mapValue:{fields:r.found.fields}});return zn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const o=yu(t,r.missing),u=si(r.readTime);return zn.newNoDocument(o,u)}(n,e):ot()}(g.It,Z);N.set(te.key.toString(),te)});const H=[];return d.forEach(Z=>{const te=N.get(Z.toString());St(!!te),H.push(te)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new MT(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const d=Ye(o),g=U_(d.It)+"/documents",v={writes:u.map(C=>B_(d.It,C))};yield d.ao("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?sr.exists(!1):sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Oe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Nk{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.No=new tA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,Ie.Z)(function*(){const t=new Rk(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Cn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!QM(t)}return!1}}class Ok{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Or.UNAUTHENTICATED,this.clientId=vT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ie.Z)(function*(g){je("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(je("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=hm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function FN(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield YR(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),nS.apply(this,arguments)}function LN(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iS(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>fN(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>fN(e.remoteStore,u)),n.onlineComponents=e}),rS.apply(this,arguments)}function iS(n){return sS.apply(this,arguments)}function sS(){return sS=(0,Ie.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield FN(n,new bN)),n.offlineComponents}),sS.apply(this,arguments)}function pD(n){return oS.apply(this,arguments)}function oS(){return oS=(0,Ie.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield LN(n,new JA)),n.onlineComponents}),oS.apply(this,arguments)}function VN(n){return iS(n).then(e=>e.persistence)}function gD(n){return iS(n).then(e=>e.localStore)}function aS(n){return pD(n).then(e=>e.remoteStore)}function uS(n){return pD(n).then(e=>e.syncEngine)}function mm(n){return cS.apply(this,arguments)}function cS(){return cS=(0,Ie.Z)(function*(n){const e=yield pD(n),t=e.eventManager;return t.onListen=uk.bind(null,e.syncEngine),t.onUnlisten=ck.bind(null,e.syncEngine),t}),cS.apply(this,arguments)}function BN(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,g,v){const C=new fD({next:N=>{u.enqueueAndForget(()=>DA(o,A));const H=N.docs.has(d);!H&&N.fromCache?v.reject(new Oe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&g&&"server"===g.source?v.reject(new Oe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),A=new TA(Qg(d.path),C,{includeMetadataChanges:!0,ku:!0});return IA(o,A)}(yield mm(n),n.asyncQueue,e,t,r)})),r.promise}function jN(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,g,v){const C=new fD({next:N=>{u.enqueueAndForget(()=>DA(o,A)),N.fromCache&&"server"===g.source?v.reject(new Oe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),A=new TA(d,C,{includeMetadataChanges:!0,ku:!0});return IA(o,A)}(yield mm(n),n.asyncQueue,e,t,r)})),r.promise}class jk{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new tA(this,"async_queue_retry"),this.Wc=()=>{const t=cD();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=cD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=cD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new wr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!pu(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,cr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=wA.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&ot()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function lS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class $k{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends J_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new jk,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$N(this),this._firestoreClient.terminate()}}function Gk(n,e){const t="object"==typeof n?n:(0,Vo.getApp)(),r="string"==typeof n?n:e||"(default)",o=(0,Vo._getProvider)(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=(0,rn.P0)("firestore");u&&ON(o,...u)}return o}function Ir(n){return n._firestoreClient||$N(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $N(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Tt(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new Ok(n._authCredentials,n._appCheckCredentials,n._queue,r)}function HN(n,e,t){const r=new wr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield FN(n,t),yield LN(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===pe.FAILED_PRECONDITION||d.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Ac("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function GN(n){if(n._initialized||n._terminated)throw new Oe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wu($.fromBase64String(e))}catch(t){throw new Oe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wu($.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xf{constructor(e){this._methodName=e}}class mD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const Xk=/^__.*__$/;class eF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms):new tm(e,this.data,t,this.fieldTransforms)}}class zN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class yD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new yD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return wD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(WN(this.sa)&&Xk.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class tF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||K_(e)}da(e,t,r,o=!1){return new yD({sa:e,methodName:t,fa:r,path:er.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mf(n){const e=n._freezeSettings(),t=K_(n._databaseId);return new tF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vD(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);pS("Data must be an object, but it was:",d,r);const g=KN(r,d);let v,C;if(u.merge)v=new M(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const H=gS(e,N,t);if(!d.contains(H))throw new Oe(pe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);QN(A,H)||A.push(H)}v=new M(A),C=d.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,C=d.fieldTransforms;return new eF(new Di(g),v,C)}class e0 extends xf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}function qN(n,e,t){return new yD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class dS extends xf{_toFieldTransform(e){return new R_(e.path,new Xg)}isEqual(e){return e instanceof dS}}class nF extends xf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=qN(this,e,!0),r=this._a.map(u=>Rf(u,t)),o=new _f(r);return new R_(e.path,o)}isEqual(e){return this===e}}class rF extends xf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=qN(this,e,!0),r=this._a.map(u=>Rf(u,t)),o=new wf(r);return new R_(e.path,o)}isEqual(e){return this===e}}class iF extends xf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new em(e.It,BM(e.It,this.wa));return new R_(e.path,t)}isEqual(e){return this===e}}function hS(n,e,t,r){const o=n.da(1,e,t);pS("Data must be an object, but it was:",o,r);const u=[],d=Di.empty();a(r,(v,C)=>{const A=_D(e,v,t);C=(0,rn.m9)(C);const N=o.ca(A);if(C instanceof e0)u.push(A);else{const H=Rf(C,N);null!=H&&(u.push(A),d.set(A,H))}});const g=new M(u);return new zN(d,g,o.fieldTransforms)}function fS(n,e,t,r,o,u){const d=n.da(1,e,t),g=[gS(e,r,t)],v=[o];if(u.length%2!=0)throw new Oe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)g.push(gS(e,u[H])),v.push(u[H+1]);const C=[],A=Di.empty();for(let H=g.length-1;H>=0;--H)if(!QN(C,g[H])){const Z=g[H];let te=v[H];te=(0,rn.m9)(te);const Fe=d.ca(Z);if(te instanceof e0)C.push(Z);else{const Ve=Rf(te,Fe);null!=Ve&&(C.push(Z),A.set(Z,Ve))}}const N=new M(C);return new zN(A,N,d.fieldTransforms)}function ZN(n,e,t,r=!1){return Rf(t,n.da(r?4:3,e))}function Rf(n,e){if(YN(n=(0,rn.m9)(n)))return pS("Unsupported field value:",e,n),KN(n,e);if(n instanceof xf)return function(t,r){if(!WN(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=Rf(d,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BM(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Vn.fromDate(t);return{timestampValue:L_(r.It,o)}}if(t instanceof Vn){const o=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:L_(r.It,o)}}if(t instanceof mD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wu)return{bytesValue:aR(r.It,t._byteString)};if(t instanceof tr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${hD(t)}`)}(n,e)}function KN(n,e){const t={};return c(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):a(n,(r,o)=>{const u=Rf(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function YN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof mD||n instanceof wu||n instanceof tr||n instanceof xf)}function pS(n,e,t){if(!YN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function gS(n,e,t){if((e=(0,rn.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return _D(n,e);throw wD("Field path arguments must be of type string or ",n,!1,void 0,t)}const sF=new RegExp("[~\\*/\\[\\]]");function _D(n,e,t){if(e.search(sF)>=0)throw wD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch{throw wD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new Oe(pe.INVALID_ARGUMENT,g+n+v)}function QN(n,e){return n.some(t=>t.isEqual(e))}class t0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class oF extends t0{data(){return super.data()}}function ID(n,e){return"string"==typeof e?_D(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}function JN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}function bd(n,...e){for(const t of e)n=t._apply(n);return n}class aF extends n0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mf(e.firestore),r=function(o,u,d,g,v,C,A){let N;if(v.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Oe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){iO(A,C);const Z=[];for(const te of A)Z.push(rO(g,o,te));N={arrayValue:{values:Z}}}else N=rO(g,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||iO(A,C),N=ZN(d,"where",A,"in"===C||"not-in"===C);const H=Ci.create(v,C,N);return function(Z,te){if(te.dt()){const Ve=TT(Z);if(null!==Ve&&!Ve.isEqual(te.field))throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${te.field.toString()}'`);const ut=bT(Z);null!==ut&&sO(0,te.field,ut)}const Fe=function(Ve,ut){for(const Nt of Ve.filters)if(ut.indexOf(Nt.op)>=0)return Nt.op;return null}(Z,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Fe)throw new Oe(pe.INVALID_ARGUMENT,Fe===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Pi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Rc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class cF extends n0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Oe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Yg(o,u);return function(g,v){if(null===bT(g)){const C=TT(g);null!==C&&sO(0,C,v.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Pi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Rc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class XN extends n0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Pi(e.firestore,e.converter,GE(e._query,this.Ia,this.Ta))}}class eO extends n0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=nO(e,this.type,this.Ea,this.Aa);return new Pi(e.firestore,e.converter,(o=t,new Rc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class tO extends n0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=nO(e,this.type,this.Ea,this.Aa);return new Pi(e.firestore,e.converter,(o=t,new Rc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function nO(n,e,t,r){if(t[0]=(0,rn.m9)(t[0]),t[0]instanceof t0)return function(o,u,d,g,v){if(!g)throw new Oe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of Jg(o))if(A.field.isKeyField())C.push(yf(u,g.key));else{const N=g.data.field(A.field);if(it(N))throw new Oe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=A.field.canonicalString();throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(N)}return new _d(C,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Mf(n.firestore);return function(u,d,g,v,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new Oe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Z=0;Z<C.length;Z++){const te=C[Z];if(N[Z].field.isKeyField()){if("string"!=typeof te)throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof te}`);if(!AT(u)&&-1!==te.indexOf("/"))throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${te}' contains a slash.`);const Fe=u.path.child(sn.fromString(te));if(!qe.isDocumentKey(Fe))throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const Ve=new qe(Fe);H.push(yf(d,Ve))}else{const Fe=ZN(g,v,te);H.push(Fe)}}return new _d(H,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function rO(n,e,t){if("string"==typeof(t=(0,rn.m9)(t))){if(""===t)throw new Oe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AT(e)&&-1!==t.indexOf("/"))throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!qe.isDocumentKey(r))throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yf(n,new qe(r))}if(t instanceof tr)return yf(n,t._key);throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hD(t)}.`)}function iO(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sO(n,e,t){if(!t.isEqual(e))throw new Oe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mS{convertValue(e,t="none"){switch(La(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ge(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return a(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new mD(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wt(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xe(e));default:return null}}convertTimestamp(e){const t=ve(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);St(mR(r));const o=new Qt(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||cr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ED(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yF extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends t0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class r0 extends Fc{data(e={}){return super.data(e)}}class Td{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Nf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new r0(this._firestore,this._userDataWriter,r.key,r,new Nf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new r0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Nf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new r0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Nf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,C=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:vF(d.type),doc:g,oldIndex:v,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function oO(n,e){return n instanceof Fc&&e instanceof Fc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Td&&e instanceof Td&&n._firestore===e._firestore&&tS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function aO(n){n=on(n,tr);const e=on(n.firestore,nr);return BN(Ir(e),n._key).then(t=>vS(e,n,t))}class Ad extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function uO(n,e,t){n=on(n,tr);const r=on(n.firestore,nr),o=ED(n.converter,e,t);return ym(r,[vD(Mf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,sr.none())])}function cO(n,e,t,...r){n=on(n,tr);const o=on(n.firestore,nr),u=Mf(o);let d;return d="string"==typeof(e=(0,rn.m9)(e))||e instanceof kc?fS(u,"updateDoc",n._key,e,t,r):hS(u,"updateDoc",n._key,e),ym(o,[d.toMutation(n._key,sr.exists(!0))])}function lO(n){return ym(on(n.firestore,nr),[new nm(n._key,sr.none())])}function dO(n,e){const t=on(n.firestore,nr),r=X_(n),o=ED(n.converter,e);return ym(t,[vD(Mf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function yS(n,...e){var t,r,o;n=(0,rn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||lS(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(lS(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let v,C,A;if(n instanceof tr)C=on(n.firestore,nr),A=Qg(n._key.path),v={next:N=>{e[d]&&e[d](vS(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=on(n,Pi);C=on(N.firestore,nr),A=N._query;const H=new Ad(C);v={next:Z=>{e[d]&&e[d](new Td(C,H,N,Z))},error:e[d+1],complete:e[d+2]},JN(n._query)}return function(N,H,Z,te){const Fe=new fD(te),Ve=new TA(H,Fe,Z);return N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return IA(yield mm(N),Ve)})),()=>{Fe.bc(),N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return DA(yield mm(N),Ve)}))}}(Ir(C),A,g,v)}function ym(n,e){return function(t,r){const o=new wr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function lk(n,e,t){return RA.apply(this,arguments)}(yield uS(t),r,o)})),o.promise}(Ir(n),e)}function vS(n,e,t){const r=t.docs.get(e._key),o=new Ad(n);return new Fc(n,o,e._key,r,new Nf(t.hasPendingWrites,t.fromCache),e.converter)}const bF={maxAttempts:5};class hO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mf(e)}set(e,t,r){this._verifyNotCommitted();const o=Sd(e,this._firestore),u=ED(o.converter,t,r),d=vD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,sr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Sd(e,this._firestore);let d;return d="string"==typeof(t=(0,rn.m9)(t))||t instanceof kc?fS(this._dataReader,"WriteBatch.update",u._key,t,r,o):hS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sd(e,this._firestore);return this._mutations=this._mutations.concat(new nm(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sd(n,e){if((n=(0,rn.m9)(n)).firestore!==e)throw new Oe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class TF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mf(e)}get(e){const t=Sd(e,this._firestore),r=new yF(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ot();const u=o[0];if(u.isFoundDocument())return new t0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new t0(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const o=Sd(e,this._firestore),u=ED(o.converter,t,r),d=vD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Sd(e,this._firestore);let d;return d="string"==typeof(t=(0,rn.m9)(t))||t instanceof kc?fS(this._dataReader,"Transaction.update",u._key,t,r,o):hS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Sd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sd(e,this._firestore),r=new Ad(this._firestore);return super.get(e).then(o=>new Fc(this._firestore,r,t._key,o._document,new Nf(!1,!1),t.converter))}}!function(n,e=!0){pd=Vo.SDK_VERSION,(0,Vo._registerComponent)(new Zp.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new nr(new OE(t.getProvider("auth-internal")),new D_(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Oe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qt(g.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Vo.registerVersion)(w_,"3.7.1",n),(0,Vo.registerVersion)(w_,"3.7.1","esm2017")}();var OF={includeMetadataChanges:!1};function BF(n,e){return void 0===e&&(e={}),function UF(n){return function _S(n,e){return void 0===e&&(e=OF),new Jr.y(function(t){return{unsubscribe:yS(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}(n,{includeMetadataChanges:!0}).pipe((0,yt.U)(function(e){return e.docs}))}(n).pipe((0,yt.U)(function(t){return t.map(function(r){return function pO(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class s0{constructor(e){return e}}const vO="firestore",ES=new l.OlP("angularfire2.firestore-instances");function HF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new s0(r)}}const GF={provide:class jF{constructor(){return(0,Kt.vb)(vO)}},deps:[[new l.FiY,ES]]},zF={provide:s0,useFactory:function $F(n,e){const t=(0,Kt.JM)(vO,n,e);return t&&new s0(t)},deps:[[new l.FiY,ES],uu]};let WF=(()=>{class n{constructor(){(0,Oa.KN)("angularfire",Kt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[zF,GF]}),n})();function qF(n,...e){return{ngModule:WF,providers:[{provide:ES,useFactory:HF(n),multi:!0,deps:[l.R0b,l.zs3,Kt.HU,Wp,[new l.FiY,AI],[new l.FiY,Lh],...e]}]}}const DS=(0,Kt.u3)(BF,!0),ZF=(0,Kt.u3)(dO,!0),DD=(0,Kt.u3)(eS,!0),KF=(0,Kt.u3)(lO,!0),_O=(0,Kt.u3)(X_,!0),YF=(0,Kt.u3)(aO,!0),QF=(0,Kt.u3)(Gk,!0);class JF{constructor(e,t,r=1){this.id=e,this.productId=t.id,this.productName=t.name,this.price=t.price,this.qty=r,this.description=t.description}}var XF=k(4986);function CS(){return(0,Pn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Mn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function tL(n,e){return n===e}var Va=k(2011),nL=(k(5881),k(3942));function bS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wO(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function IO(){if(!function F(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class o0{constructor(e){this._delegate=e}static fromBase64String(e){return IO(),new o0(wu.fromBase64String(e))}static fromUint8Array(e){return wO(),new o0(wu.fromUint8Array(e))}toBase64(){return IO(),this._delegate.toBase64()}toUint8Array(){return wO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TS(n){return function sL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oL{enableIndexedDbPersistence(e,t){return function zk(n,e){GN(n=on(n,nr));const t=Ir(n),r=n._freezeSettings(),o=new JA;return HN(t,o,new TN(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Wk(n){GN(n=on(n,nr));const e=Ir(n),t=n._freezeSettings(),r=new JA;return HN(e,r,new Tk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qk(n){if(n._initialized&&!n._terminated)throw new Oe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!Ho.C())return Promise.resolve();const o=r+"main";yield Ho.delete(o)}),function(r){return t.apply(this,arguments)})(zT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class EO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qt||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ac("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){ON(this._delegate,e,t,r)}enableNetwork(){return function Kk(n){return function Pk(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield VN(n),t=yield aS(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.wu.delete(0),Y_(o)}(t)}))}(Ir(n=on(n,nr)))}(this._delegate)}disableNetwork(){return function Yk(n){return function kk(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield VN(n),t=yield aS(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=Ye(o);u.wu.add(0),yield cm(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ir(n=on(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,AN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Zk(n){return function(e){const t=new wr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function pk(n,e){return FA.apply(this,arguments)}(yield uS(e),t)})),t.promise}(Ir(n=on(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function CF(n,e){return function Vk(n,e){const t=new fD(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield mm(n),o=t,Ye(r).bu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield mm(n),o=t,void Ye(r).bu.delete(o);var r,o}))}}(Ir(n=on(n,nr)),lS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vm(this,eS(this._delegate,e))}catch(t){throw Ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wo(this,X_(this._delegate,e))}catch(t){throw Ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,function Ak(n,e){if(n=on(n,J_),XA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(t=e,new Rc(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function AF(n,e,t){n=on(n,nr);const r=Object.assign(Object.assign({},bF),t);return function(o){if(o.maxAttempts<1)throw new Oe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const g=new wr;return o.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const v=yield function UN(n){return pD(n).then(e=>e.datastore)}(o);new Nk(o.asyncQueue,v,d,u,g).run()})),g.promise}(Ir(n),o=>e(new TF(n,o)),r)}(this._delegate,t=>e(new DO(this,t)))}batch(){return Ir(this._delegate),new CO(new hO(this._delegate,e=>ym(this._delegate,e)))}loadBundle(e){return function Qk(n,e){const t=Ir(n=on(n,nr)),r=new $k;return function Uk(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,C){if(v instanceof Uint8Array)return kN(v,C);if(v instanceof ArrayBuffer)return kN(new Uint8Array(v),C);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Sk(v,d);var v}(t,K_(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function bk(n,e,t){const r=Ye(n);var o;(o=(0,Ie.Z)(function*(u,d,g){try{const v=yield d.getMetadata();if(yield function(H,Z){const te=Ye(H),Fe=si(Z.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Ve=>te.Ns.getBundleMetadata(Ve,Z.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Fe)>=0)}(u.localStore,v))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(H=v).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);g._updateProgress(mN(v));const C=new ik(v,u.localStore,d.It);let A=yield d.mc();for(;A;){const H=yield C.Fu(A);H&&g._updateProgress(H),A=yield d.mc()}const N=yield C.complete();return yield Pc(u,N.Lu,void 0),yield function(H,Z){const te=Ye(H);return te.persistence.runTransaction("Save bundle","readwrite",Fe=>te.Ns.saveBundleMetadata(Fe,Z))}(u.localStore,v),g._completeWith(N.progress),Promise.resolve(N.Bu)}catch(v){return Ac("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var H}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield uS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Jk(n,e){return function Bk(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield gD(n),e)}))}(Ir(n=on(n,nr)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xi(this,t):null)}}class CD extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new o0(new wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wo.forKey(t,this.firestore,null)}}class DO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}get(e){const t=Pf(e);return this._delegate.get(t).then(r=>new a0(this._firestore,new Fc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Pf(e);return r?(bS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Pf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Pf(e);return this._delegate.delete(t),this}}class CO{constructor(e){this._delegate=e}set(e,t,r){const o=Pf(e);return r?(bS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Pf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Pf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Of{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new r0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new u0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Of.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Of(e,new CD(e),t),o.set(t,u)),u}}Of.INSTANCES=new WeakMap;class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wo(t,new tr(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Wo(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vm(this.firestore,eS(this._delegate,e))}catch(t){throw Ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.m9)(e))instanceof tr&&PN(this._delegate,e)}set(e,t){t=bS("DocumentReference.set",t);try{return t?uO(this._delegate,e,t):uO(this._delegate,e)}catch(r){throw Ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cO(this._delegate,e):cO(this._delegate,e,t,...r)}catch(o){throw Ji(o,"updateDoc()","DocumentReference.update()")}}delete(){return lO(this._delegate)}onSnapshot(...e){const t=bO(e),r=TO(e,o=>new a0(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return yS(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _F(n){n=on(n,tr);const e=on(n.firestore,nr),t=Ir(e),r=new Ad(e);return function Fk(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const g=yield function(v,C){const A=Ye(v);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Oe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=hm(g,`Failed to get document '${u} from cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield gD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Fc(e,r,n._key,o,new Nf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function wF(n){n=on(n,tr);const e=on(n.firestore,nr);return BN(Ir(e),n._key,{source:"server"}).then(t=>vS(e,n,t))}(this._delegate):aO(this._delegate),t.then(r=>new a0(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?Of.getInstance(this.firestore,e):null))}}function Ji(n,e,t){return n.message=n.message.replace(e,t),n}function bO(n){for(const e of n)if("object"==typeof e&&!TS(e))return e;return{}}function TO(n,e){var t,r;let o;return o=TS(n[0])?n[0]:TS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class a0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oO(this._delegate,e._delegate)}}class u0 extends a0{data(e){const t=this._delegate.data(e);return function gM(n,e){n||ot()}(void 0!==t),t}}class Xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CD(e)}where(e,t,r){try{return new Xi(this.firestore,bd(this._delegate,function uF(n,e,t){const r=e,o=ID("where",n);return new aF(o,r,t)}(e,t,r)))}catch(o){throw Ji(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xi(this.firestore,bd(this._delegate,function lF(n,e="asc"){const t=e,r=ID("orderBy",n);return new cF(r,t)}(e,t)))}catch(r){throw Ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xi(this.firestore,bd(this._delegate,function dF(n){return MN("limit",n),new XN("limit",n,"F")}(e)))}catch(t){throw Ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xi(this.firestore,bd(this._delegate,function hF(n){return MN("limitToLast",n),new XN("limitToLast",n,"L")}(e)))}catch(t){throw Ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xi(this.firestore,bd(this._delegate,function fF(...n){return new eO("startAt",n,!0)}(...e)))}catch(t){throw Ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xi(this.firestore,bd(this._delegate,function pF(...n){return new eO("startAfter",n,!1)}(...e)))}catch(t){throw Ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xi(this.firestore,bd(this._delegate,function gF(...n){return new tO("endBefore",n,!1)}(...e)))}catch(t){throw Ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xi(this.firestore,bd(this._delegate,function mF(...n){return new tO("endAt",n,!0)}(...e)))}catch(t){throw Ji(t,"endAt()","Query.endAt()")}}isEqual(e){return tS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function EF(n){n=on(n,Pi);const e=on(n.firestore,nr),t=Ir(e),r=new Ad(e);return function Lk(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const g=yield oD(o,u,!0),v=new _N(u,g.Hi),C=v.Wu(g.documents),A=v.applyChanges(C,!1);d.resolve(A.snapshot)}catch(g){const v=hm(g,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield gD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Td(e,r,n,o))}(this._delegate):"server"===e?.source?function DF(n){n=on(n,Pi);const e=on(n.firestore,nr),t=Ir(e),r=new Ad(e);return jN(t,n._query,{source:"server"}).then(o=>new Td(e,r,n,o))}(this._delegate):function IF(n){n=on(n,Pi);const e=on(n.firestore,nr),t=Ir(e),r=new Ad(e);return JN(n._query),jN(t,n._query).then(o=>new Td(e,r,n,o))}(this._delegate),t.then(r=>new AS(this.firestore,new Td(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bO(e),r=TO(e,o=>new AS(this.firestore,new Td(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return yS(this._delegate,t,r)}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?Of.getInstance(this.firestore,e):null))}}class uL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new u0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new u0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new u0(this._firestore,r))})}isEqual(e){return oO(this._delegate,e._delegate)}}class vm extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wo(this.firestore,e):null}doc(e){try{return new Wo(this.firestore,void 0===e?X_(this._delegate):X_(this._delegate,e))}catch(t){throw Ji(t,"doc()","CollectionReference.doc()")}}add(e){return dO(this._delegate,e).then(t=>new Wo(this.firestore,t))}isEqual(e){return PN(this._delegate,e._delegate)}withConverter(e){return new vm(this.firestore,this._delegate.withConverter(e?Of.getInstance(this.firestore,e):null))}}function Pf(n){return on(n,tr)}class SS{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new SS(er.keyField().canonicalString())}isEqual(e){return(e=(0,rn.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class kf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xF(){return new dS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kf(e)}static delete(){const e=function SF(){return new e0("deleteField")}();return e._methodName="FieldValue.delete",new kf(e)}static arrayUnion(...e){const t=function MF(...n){return new nF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kf(t)}static arrayRemove(...e){const t=function RF(...n){return new rF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kf(t)}static increment(e){const t=function NF(n){return new iF("increment",n)}(e);return t._methodName="FieldValue.increment",new kf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cL={Firestore:EO,GeoPoint:mD,Timestamp:Vn,Blob:o0,Transaction:DO,WriteBatch:CO,DocumentReference:Wo,DocumentSnapshot:a0,Query:Xi,QueryDocumentSnapshot:u0,QuerySnapshot:AS,CollectionReference:vm,FieldPath:SS,FieldValue:kf,setLogLevel:function aL(n){!function xE(n){Tc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function dL(n){(function lL(n,e){n.INTERNAL.registerComponent(new Zp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},cL)))})(n,(e,t)=>new EO(e,t,new oL)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(nL.Z);var hL=k(6451),bD=k(5363),fL=k(6063);class pL extends mr.x{constructor(e=1/0,t=1/0,r=fL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)g=v;g&&r.splice(0,g+1)}}}var gL=k(3099);function AO(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,gL.B)({connector:()=>new pL(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function SO(n,e){return(0,hi.m)(e)?Sr(()=>n,e):Sr(()=>n)}var xS=k(9468);k(127);const xO=new l.OlP("angularfire2.auth.use-emulator"),MO=new l.OlP("angularfire2.auth.settings"),RO=new l.OlP("angularfire2.auth.tenant-id"),NO=new l.OlP("angularfire2.auth.langugage-code"),OO=new l.OlP("angularfire2.auth.use-device-language"),PO=new l.OlP("angularfire.auth.persistence"),kO=(n,e,t,r,o,u,d,g)=>(0,Va.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))v.settings[C]=A;return g&&v.setPersistence(g),v},[t,r,o,u,d,g]);let TD=(()=>{class n{constructor(t,r,o,u,d,g,v,C,A,N,H,Z){const te=new mr.x,Fe=st(void 0).pipe((0,bD.Q)(d.outsideAngular),Sr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,yt.U)(()=>(0,Va.on)(t,u,r)),(0,yt.U)(Ve=>kO(Ve,u,g,C,A,N,v,H)),AO({bufferSize:1,refCount:!1}));if(to(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Fe.pipe(Aa()).subscribe();const ut=Fe.pipe(Sr(Vt=>Vt.getRedirectResult().then(jt=>jt,()=>null)),Kt.iC,AO({bufferSize:1,refCount:!1})),Nt=Fe.pipe(Sr(Vt=>new Jr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onAuthStateChanged(Jt=>jt.next(Jt),Jt=>jt.error(Jt),()=>jt.complete()))})))),Lt=Fe.pipe(Sr(Vt=>new Jr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onIdTokenChanged(Jt=>jt.next(Jt),Jt=>jt.error(Jt),()=>jt.complete()))}))));this.authState=ut.pipe(SO(Nt),(0,xS.R)(d.outsideAngular),(0,bD.Q)(d.insideAngular)),this.user=ut.pipe(SO(Lt),(0,xS.R)(d.outsideAngular),(0,bD.Q)(d.insideAngular)),this.idToken=this.user.pipe(Sr(Vt=>Vt?(0,hn.D)(Vt.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Sr(Vt=>Vt?(0,hn.D)(Vt.getIdTokenResult()):st(null))),this.credential=(0,hL.T)(ut,te,this.authState.pipe(Br(Vt=>!Vt))).pipe((0,yt.U)(Vt=>Vt?.user?Vt:null),(0,xS.R)(d.outsideAngular),(0,bD.Q)(d.insideAngular))}return(0,Va.pX)(this,Fe,u,{spy:{apply:(Ve,ut,Nt)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&Nt.then(Lt=>te.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Va.Dh),l.LFG(Va.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Kt.HU),l.LFG(xO,8),l.LFG(MO,8),l.LFG(RO,8),l.LFG(NO,8),l.LFG(OO,8),l.LFG(PO,8),l.LFG(Lh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function FO(n,e){return function yL(n,e=XF.z){return new Jr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function MS(n,e){return FO(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function AD(n,e){return MS(n,e).pipe(dh(void 0),CS(),(0,yt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const v=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function LO(n,e,t){return AD(n,t).pipe(bl((r,o)=>function _L(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function wL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return RS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return RS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return RS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function eL(n,e=tc.y){return n=n??tL,(0,Pn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Mn.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,yt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function RS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function VO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class UO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=AD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(dh(void 0),CS(),Br(([r,o])=>o.length>0||!r),(0,yt.U)(([r,o])=>o),Kt.iC)}auditTrail(e){return this.stateChanges(e).pipe(bl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VO(e);return LO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}valueChanges(e={}){return MS(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kt.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(Kt.iC)}add(e){return this.ref.add(e)}doc(e){return new BO(this.ref.doc(e),this.afs)}}class BO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=jO(r,t);return new UO(o,u,this.afs)}snapshotChanges(){return function vL(n,e){return FO(n,e).pipe(dh(void 0),CS(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(Kt.iC)}}class IL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?AD(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Br(t=>t.length>0),Kt.iC):AD(this.query,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}auditTrail(e){return this.stateChanges(e).pipe(bl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VO(e);return LO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kt.iC)}valueChanges(e={}){return MS(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Kt.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(Kt.iC)}}const EL=new l.OlP("angularfire2.enableFirestorePersistence"),DL=new l.OlP("angularfire2.firestore.persistenceSettings"),CL=new l.OlP("angularfire2.firestore.settings"),bL=new l.OlP("angularfire2.firestore.use-emulator");function jO(n,e=(t=>t)){return{query:e(n),ref:n}}let TL=(()=>{class n{constructor(t,r,o,u,d,g,v,C,A,N,H,Z,te,Fe,Ve,ut,Nt){this.schedulers=v;const Lt=(0,Va.on)(t,g,r),Vt=A;N&&kO(Lt,g,H,te,Fe,Ve,Z,ut),[this.firestore,this.persistenceEnabled$]=(0,Va.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const jt=g.runOutsideAngular(()=>Lt.firestore());if(u&&jt.settings(u),Vt&&jt.useEmulator(...Vt),o&&!to(d)){const Jt=()=>{try{return(0,hn.D)(jt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Gr){return typeof console<"u"&&console.warn(Gr),st(!1)}};return[jt,g.runOutsideAngular(Jt)]}return[jt,st(!1)]},[u,Vt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=jO(o,r),g=this.schedulers.ngZone.run(()=>u);return new UO(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new IL(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new BO(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Va.Dh),l.LFG(Va.xv,8),l.LFG(EL,8),l.LFG(CL,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Kt.HU),l.LFG(DL,8),l.LFG(bL,8),l.LFG(TD,8),l.LFG(xO,8),l.LFG(MO,8),l.LFG(RO,8),l.LFG(NO,8),l.LFG(OO,8),l.LFG(PO,8),l.LFG(Lh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),c0=(()=>{class n{constructor(t){this.db=t}getCartItems(t){return this.db.collection("cart").snapshotChanges().pipe((0,yt.U)(r=>{let o=[];for(let u of r){let d=!0,g=0;for(let v in o){if(o[v].productId===t){console.log(t),o[v].qty++,d=!1,g++;break}g++}d&&o.push(new JF(g.toString(),u.payload.doc.data()))}return o}))}getProduct(t){return this.db.collection("products").doc(t).snapshotChanges()}addProductToCart(t){return this.db.collection("products").doc(t).snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(TL))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SD=(()=>{class n{constructor(t,r){this.firestore=t,this.cartService=r}getProducts(){const t=DD(this.firestore,"products");return DS(t,{idField:"id"})}getCart(){const t=DD(this.firestore,"cart");return DS(t,{idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(s0),l.LFG(c0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$O=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xD=(()=>{class n{constructor(t){this.firestore=t,this.subject=new mr.x}sendMsg(t){const r=DD(this.firestore,"cart");return ZF(r,t)}getMsg(){const t=DD(this.firestore,"cart");return DS(t,{idField:"id"})}getId(t){const r=_O(this.firestore,`cart/${t.id}`);return console.log(r),YF}deleteCliente(t){const r=_O(this.firestore,`cart/${t.id}`);return console.log(`${t.id}`),KF(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(s0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AL(n,e){return{type:7,name:n,definitions:e,options:{}}}function HO(n,e=null){return{type:4,styles:e,timings:n}}function NS(n){return{type:6,styles:n,offset:null}}function OS(n,e,t){return{type:0,name:n,styles:e,options:t}}function GO(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}const WO=["toast-component",""];function SL(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){l.CHM(t);const o=l.oxw();return l.KtG(o.remove())}),l.TgZ(1,"span",6),l._uU(2,"\xd7"),l.qZA()()}}function xL(n,e){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.hij("[",t.duplicatesCount+1,"]")}}function ML(n,e){if(1&n&&(l.TgZ(0,"div"),l._uU(1),l.YNc(2,xL,2,1,"ng-container",4),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.titleClass),l.uIk("aria-label",t.title),l.xp6(1),l.hij(" ",t.title," "),l.xp6(1),l.Q6J("ngIf",t.duplicatesCount)}}function RL(n,e){if(1&n&&l._UZ(0,"div",7),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.Q6J("innerHTML",t.message,l.oJD)}}function NL(n,e){if(1&n&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.uIk("aria-label",t.message),l.xp6(1),l.hij(" ",t.message," ")}}function OL(n,e){if(1&n&&(l.TgZ(0,"div"),l._UZ(1,"div",9),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Udp("width",t.width+"%")}}class BL{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class $L{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new mr.x,this._activate=new mr.x,this._manualClose=new mr.x,this._resetTimeout=new mr.x,this._countDuplicate=new mr.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class MD{constructor(e,t,r,o,u,d){this.toastId=e,this.config=t,this.message=r,this.title=o,this.toastType=u,this.toastRef=d,this._onTap=new mr.x,this._onAction=new mr.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const ZO=new l.OlP("ToastConfig");class HL extends class jL{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let o;return o=r.create(e.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class GL{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let zL=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WL=(()=>{class n{constructor(t,r,o,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=o,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const o=this._document.createElement("div");return o.id="toast-container",o.classList.add(t),o.classList.add("toast-container"),r?r.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(t){return new HL(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new GL(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(zL),l.LFG(l._Vd),l.LFG(l.z2F),l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l0=(()=>{class n{constructor(t,r,o,u,d){this.overlay=r,this._injector=o,this.sanitizer=u,this.ngZone=d,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,o={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(o))}success(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(o))}error(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(o))}info(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(o))}warning(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(o))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(t="",r="",o,u){const{includeTitleDuplicates:d}=this.toastrConfig;for(const g of this.toasts){const v=d&&g.title===t;if((!d||v)&&g.message===r)return g.toastRef.onDuplicate(o,u),g}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,o,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,o,u)):this._buildNotification(t,r,o,u)}_buildNotification(t,r,o,u){if(!u.toastComponent)throw new Error("toastComponent required");const d=this.findDuplicate(o,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||r)&&this.toastrConfig.preventDuplicates&&null!==d)return d;this.previousToastMessage=r;let g=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(g=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const v=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let C=r;r&&u.enableHtml&&(C=this.sanitizer.sanitize(l.q3G.HTML,r));const A=new $L(v),N=new MD(this.index,u,C,o,t,A),Z=l.zs3.create({providers:[{provide:MD,useValue:N}],parent:this._injector}),te=new BL(u.toastComponent,Z),Fe=v.attach(te,u.newestOnTop);A.componentInstance=Fe.instance;const Ve={toastId:this.index,title:o||"",message:r||"",toastRef:A,onShown:A.afterActivate(),onHidden:A.afterClosed(),onTap:N.onTap(),onAction:N.onAction(),portal:Fe};return g||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ve.toastRef.activate()})),this.toasts.push(Ve),Ve}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ZO),l.LFG(WL),l.LFG(l.zs3),l.LFG(Eo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qL={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.ngZone=o,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l0),l.Y36(MD),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(l.d8E("@flyInOut",r.state),l.Tol(r.toastClasses),l.Udp("display",r.displayStyle))},attrs:WO,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(l.YNc(0,SL,3,0,"button",0),l.YNc(1,ML,3,5,"div",1),l.YNc(2,RL,1,3,"div",2),l.YNc(3,NL,2,4,"div",3),l.YNc(4,OL,2,2,"div",4)),2&t&&(l.Q6J("ngIf",r.options.closeButton),l.xp6(1),l.Q6J("ngIf",r.title),l.xp6(1),l.Q6J("ngIf",r.message&&r.options.enableHtml),l.xp6(1),l.Q6J("ngIf",r.message&&!r.options.enableHtml),l.xp6(1),l.Q6J("ngIf",r.options.progressBar))},dependencies:[Dn],encapsulation:2,data:{animation:[AL("flyInOut",[OS("inactive",NS({opacity:0})),OS("active",NS({opacity:1})),OS("removed",NS({opacity:0})),GO("inactive => active",HO("{{ easeTime }}ms {{ easing }}")),GO("active => removed",HO("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let ZL=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:ZO,useValue:{default:qL,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Rd]}),n})();function KL(n,e){1&n&&l._UZ(0,"i",10)}function YL(n,e){1&n&&l._UZ(0,"i",11)}let QL=(()=>{class n{constructor(t,r,o,u,d){this.msg=t,this.cartService=r,this.wishlistService=o,this.productService=u,this.toastr=d}ngOnInit(){}handleAddToCart(){this.cartService.addProductToCart(this.productId).subscribe(()=>{this.msg.sendMsg(this.productItem)}),this.toastr.info("El articulo fue agregado con exito","Cart modificado",{positionClass:"toast-bottom-right"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xD),l.Y36(c0),l.Y36($O),l.Y36(SD),l.Y36(l0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-product-item"]],inputs:{productItem:"productItem",productId:"productId",addedToWishlist:"addedToWishlist"},decls:18,vars:12,consts:[[1,"card","mb-4","shadow-sm"],["width","100%",1,"bd-placeholder-img","card-img-top","p-1",3,"src"],[1,"card-body"],[1,"card-text"],["class","fas fa-heart float-right",4,"ngIf"],["class","far fa-heart float-right",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-primary","product-btn",3,"click"],["type","button",1,"btn","btn-sm","btn-outline-secondary","product-btn"],[1,"fas","fa-heart","float-right"],[1,"far","fa-heart","float-right"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"img",1),l.TgZ(2,"div",2)(3,"p",3)(4,"strong"),l._uU(5),l.ALo(6,"currency"),l.qZA(),l.YNc(7,KL,1,0,"i",4),l.YNc(8,YL,1,0,"i",5),l.qZA(),l.TgZ(9,"p",3),l._uU(10),l.ALo(11,"slice"),l.qZA(),l.TgZ(12,"div",6)(13,"div",7)(14,"button",8),l.NdJ("click",function(){return r.handleAddToCart()}),l._uU(15,"Add to Cart"),l.qZA(),l.TgZ(16,"button",9),l._uU(17,"View Details"),l.qZA()()()()()),2&t&&(l.xp6(1),l.Q6J("src",r.productItem.imageUrl,l.LSH),l.xp6(4),l.Oqu(l.xi3(6,5,r.productItem.price,"USD")),l.xp6(2),l.Q6J("ngIf",r.addedToWishlist),l.xp6(1),l.Q6J("ngIf",!r.addedToWishlist),l.xp6(2),l.Oqu(l.Dn7(11,8,r.productItem.name,0,80)))},dependencies:[Dn,bu,Jo]}),n})();function JL(n,e){if(1&n&&(l.TgZ(0,"div",2),l._UZ(1,"app-product-item",3),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Q6J("productItem",t)("productId",t.id)}}let XL=(()=>{class n{constructor(t,r){this.productService=t,this.wishlistService=r,this.productList=[],this.wishlist=[]}ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getProducts().subscribe(t=>{this.productList=t,console.log(this.productList)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(SD),l.Y36($O))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-product-list"]],decls:2,vars:1,consts:[[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[3,"productItem","productId"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,JL,2,2,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngForOf",r.productList))},dependencies:[Bi,QL]}),n})();function eV(n,e){1&n&&(l.TgZ(0,"div",3),l._uU(1,"Your Cart is Empty."),l.qZA())}function tV(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",8),l._UZ(1,"app-cart-item",9),l.TgZ(2,"div")(3,"button",10),l.NdJ("click",function(){const u=l.CHM(t).$implicit,d=l.oxw(2);return l.KtG(d.onClickDelete(u))}),l._UZ(4,"i",11),l._uU(5," Borrar"),l.qZA()()()}if(2&n){const t=e.$implicit;l.xp6(1),l.Q6J("cartItem",t)}}function nV(n,e){if(1&n&&(l.TgZ(0,"ul",4)(1,"div",5)(2,"strong"),l._uU(3,"Cart Items"),l.qZA()(),l.YNc(4,tV,6,1,"li",6),l.TgZ(5,"li",7)(6,"strong"),l._uU(7,"Total"),l.qZA(),l._uU(8),l.ALo(9,"currency"),l.qZA()()),2&n){const t=l.oxw();l.xp6(4),l.Q6J("ngForOf",t.cartItems),l.xp6(4),l.hij(" ",l.xi3(9,2,t.cartTotal,"USD")," ")}}let PS=(()=>{class n{constructor(t,r,o,u){this.msg=t,this.cartService=r,this.toastr=o,this.productService=u,this.cartItems=[],this.cartTotal=0,this.messageSuccess=!0}ngOnInit(){this.handleSubscription(),this.calcCartTotal()}handleSubscription(){return this.msg.getMsg().subscribe(t=>{this.cartItems=t,this.loadCartItems()}),this.cartItems}calcCartTotal(){this.cartTotal=0,this.cartItems.forEach(t=>{console.log(t.qty),this.cartTotal+=1*t.price})}loadCartItems(){this.productService.getCart().subscribe(t=>{this.cartItems=t,console.log(t),this.calcCartTotal()})}onClickDelete(t){confirm("Seguro que desea eliminar el producto?")&&this.msg.deleteCliente(t),this.toastr.error("El producto fue eliminado con exito","Registro eliminado!",{positionClass:"toast-bottom-right"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xD),l.Y36(c0),l.Y36(l0),l.Y36(SD))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-cart"]],decls:3,vars:2,consts:[[1,"card","filters"],["class","alert alert-info","style","margin-top: 15px;",4,"ngIf"],["class","list-group",4,"ngIf"],[1,"alert","alert-info",2,"margin-top","15px"],[1,"list-group"],[1,"card-header"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","active"],[1,"list-group-item"],[3,"cartItem"],[1,"btn","btn-outline-danger","product-btn","list-group-item","active",2,"margin","auto",3,"click"],[1,"fas","fa-trash"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,eV,2,0,"div",1),l.YNc(2,nV,10,5,"ul",2),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",0===r.cartItems.length),l.xp6(1),l.Q6J("ngIf",r.cartItems.length>0))}}),n})(),rV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:7,vars:0,consts:[[1,"row"],[1,"col-sm-2"],[1,"col-sm-8"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-filters"),l.qZA(),l.TgZ(3,"div",2),l._UZ(4,"app-product-list"),l.qZA(),l.TgZ(5,"div",1),l._UZ(6,"app-cart"),l.qZA()())},dependencies:[nb,XL,PS]}),n})(),RD=(()=>{class n{constructor(t,r){this.auth=t,this.afAuth=r,this.usuarioEmitter=new l.vpe}setUsuario(t){this.usuario=t}getAuth(){return this.afAuth.authState.pipe((0,yt.U)(t=>t))}login({email:t,password:r}){return Bb(this.auth,t,r)}logout(){return jb(this.auth)}registrarse({email:t,password:r}){return Mb(this.auth,t,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lu),l.LFG(TD))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const iV=[{path:"",redirectTo:"/shop",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,r){this.router=t,this.loginService=r,this.model={},this.formLogin=new ml({email:new _l,password:new _l})}ngOnInit(){}login_(){this.loginService.login(this.formLogin.value).then(t=>{console.log(t.user.email),this.router.navigate(["/"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Fn),l.Y36(RD))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"row"],[1,"col-md-4","offset-md-4"],[1,"guest-form-card","card"],[1,"card-header","text-center"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","formControlName","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","login",1,"btn","btn-primary","btn-block"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),l._uU(5,"Login"),l.qZA()(),l.TgZ(6,"div",4)(7,"form",5),l.NdJ("ngSubmit",function(){return r.login_()}),l.TgZ(8,"div",6)(9,"label",7),l._uU(10,"Email"),l.qZA(),l.TgZ(11,"input",8),l.NdJ("ngModelChange",function(u){return r.email=u}),l.qZA()(),l.TgZ(12,"div",6)(13,"label",9),l._uU(14,"Password"),l.qZA(),l.TgZ(15,"input",10),l.NdJ("ngModelChange",function(u){return r.password=u}),l.qZA()(),l._UZ(16,"input",11),l.qZA()()()()()),2&t&&(l.xp6(7),l.Q6J("formGroup",r.formLogin),l.xp6(4),l.Q6J("ngModel",r.email),l.xp6(4),l.Q6J("ngModel",r.password))},dependencies:[zm,To,fl,ru,Il,uh,fp]}),n})()},{path:"register",component:(()=>{class n{constructor(t,r){this.router=t,this.loginService=r,this.formReg=new ml({email:new _l,password:new _l})}ngOnInit(){}register(){console.log(this.formReg.value),this.loginService.registrarse(this.formReg.value).then(t=>{console.log(t),this.router.navigate(["/login"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Fn),l.Y36(RD))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-register"]],decls:17,vars:3,consts:[[1,"row"],[1,"col-md-4","offset-md-4"],[1,"guest-form-card","card"],[1,"card-header","text-center"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","formControlName","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","value","Registrase",1,"btn","btn-primary","btn-block"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),l._uU(5,"Register Here"),l.qZA()(),l.TgZ(6,"div",4)(7,"form",5),l.NdJ("ngSubmit",function(){return r.register()}),l.TgZ(8,"div",6)(9,"label",7),l._uU(10,"Email"),l.qZA(),l.TgZ(11,"input",8),l.NdJ("ngModelChange",function(u){return r.email=u}),l.qZA()(),l.TgZ(12,"div",6)(13,"label",9),l._uU(14,"Password"),l.qZA(),l.TgZ(15,"input",10),l.NdJ("ngModelChange",function(u){return r.password=u}),l.qZA()(),l._UZ(16,"input",11),l.qZA()()()()()),2&t&&(l.xp6(7),l.Q6J("formGroup",r.formReg),l.xp6(4),l.Q6J("ngModel",r.email),l.xp6(4),l.Q6J("ngModel",r.password))},dependencies:[zm,To,fl,ru,Il,uh,fp]}),n})()},{path:"shop",component:rV},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-page-not-found"]],decls:12,vars:0,consts:[[1,"row"],[1,"col-md-4","offset-md-4"],[1,"card"],[1,"card-header"],[1,"card-body"],["routerLink","/"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),l._uU(5,"404 - Page Not Found"),l.qZA()(),l.TgZ(6,"div",4)(7,"p"),l._uU(8,"Oops! The page that you were looking for, is not found."),l.qZA(),l.TgZ(9,"p")(10,"a",5),l._uU(11,"Go Back To Home"),l.qZA()()()()()())},dependencies:[Lo]}),n})()}];let sV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[nv.forRoot(iV),nv]}),n})(),oV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[["id","pie-pagina",1,"bg-warning","text-white","mt-5","p-5"],[1,"container"],[1,"row"],[1,"col"],[1,"lead","text-center"]],template:function(t,r){1&t&&(l.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),l._uU(5," Copyright \xa9 Andr\xe9s Cagua "),l.qZA()()()()())}}),n})(),aV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:2,vars:0,template:function(t,r){1&t&&(l.TgZ(0,"span"),l._uU(1,"Shopping Cart"),l.qZA())}}),n})();function uV(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"a",9),l.NdJ("click",function(){l.CHM(t);const o=l.oxw();return l.KtG(o.onClickOut())}),l._UZ(1,"i",10),l._uU(2,"LogOut"),l.qZA()}}const cV=function(){return["/shop"]},lV=function(){return["/register"]},dV=function(){return["/login"]};let hV=(()=>{class n{constructor(t,r,o){this.loginService=t,this.router=r,this.auth=o}ngOnInit(){this.loginService.getAuth().subscribe(t=>{t?(this.isLoggedIn=!0,this.loggedInUser=t.email):this.isLoggedIn=!1})}onClickOut(){this.loginService.logout().then(()=>{this.router.navigate(["/login"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(RD),l.Y36(Fn),l.Y36(TD))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-nav"]],decls:19,vars:7,consts:[[1,"d-flex","flex-column","flex-md-row","align-items-center","p-3","px-md-4","mb-3","bg-white","border-bottom","shadow-sm"],[1,"my-0","mr-md-auto","font-weight-normal"],[1,"my-2","my-md-0","mr-md-3"],[1,"p-2","text-dark",3,"routerLink"],["href","#",1,"p-2","text-dark"],["class","p-2 text-dark","style","cursor: pointer",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"fas","fa-user"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"p-2","text-dark",2,"cursor","pointer",3,"click"],[1,"fas","fa-user-times"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h5",1),l._UZ(2,"app-header"),l.qZA(),l.TgZ(3,"nav",2)(4,"a",3),l._uU(5,"Shop"),l.qZA(),l.TgZ(6,"a",4),l._uU(7,"Enterprise"),l.qZA(),l.TgZ(8,"a",4),l._uU(9,"Support"),l.qZA(),l.TgZ(10,"a",4),l._uU(11,"Pricing"),l.qZA(),l.YNc(12,uV,3,0,"a",5),l.qZA(),l.TgZ(13,"a",6),l._UZ(14,"i",7),l._uU(15,"Sign up"),l.qZA(),l.TgZ(16,"a",8),l._UZ(17,"i",7),l._uU(18,"Login"),l.qZA()()),2&t&&(l.xp6(4),l.Q6J("routerLink",l.DdM(4,cV)),l.xp6(8),l.Q6J("ngIf",r.isLoggedIn),l.xp6(1),l.Q6J("routerLink",l.DdM(5,lV)),l.xp6(3),l.Q6J("routerLink",l.DdM(6,dV)))},dependencies:[Dn,Lo,aV]}),n})(),fV=(()=>{class n{constructor(){this.title="Shopping-Cart-Angular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"row"],[1,"col"]],template:function(t,r){1&t&&(l._UZ(0,"app-nav"),l.TgZ(1,"div",0)(2,"div",1),l._UZ(3,"router-outlet"),l.qZA()(),l._UZ(4,"app-footer"))},dependencies:[Ih,oV,hV]}),n})();function pV(n,e){1&n&&(l.TgZ(0,"span"),l._uU(1," 1 "),l.qZA())}function gV(n,e){if(1&n&&(l.TgZ(0,"strong"),l._uU(1),l.ALo(2,"currency"),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(l.xi3(2,1,1*t.cart.price,"USD"))}}let mV=(()=>{class n{constructor(t,r,o,u){this.msg=t,this.father=r,this.cartService=o,this.toastr=u}ngOnInit(){}ngAfterViewChecked(){this.render_()}ngOnChanges(){this.render=!1,this.cartService.getCartItems(this.cartItem.id).subscribe(t=>{this.cart=t,console.log(t)})}ngAfterViewInit(){}render_(){null!=this.cart&&null!=this.cartItem||console.log("no entro"),null!=this.cart&&(this.render=!0,this.cart=this.cartItem)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xD),l.Y36(PS),l.Y36(c0),l.Y36(l0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-cart-item"]],inputs:{cartItem:"cartItem",price:"price"},features:[l.TTD],decls:7,vars:3,consts:[[1,"cart-item",2,"text-align","center"],[4,"ngIf"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"strong"),l._uU(2),l.qZA(),l._uU(3," x "),l.YNc(4,pV,2,0,"span",1),l._uU(5,": "),l.YNc(6,gV,3,4,"strong",1),l.qZA()),2&t&&(l.xp6(2),l.Oqu(r.cartItem.name),l.xp6(2),l.Q6J("ngIf",r.render),l.xp6(2),l.Q6J("ngIf",r.render))},dependencies:[Dn,Jo]}),n})();const kS_firebase={projectId:"shopping-cart-angular-d9f4a",appId:"1:64334373338:web:c1fc22a7638ab9b601a0e3",storageBucket:"shopping-cart-angular-d9f4a.appspot.com",locationId:"us-central",apiKey:"AIzaSyChtehrK5PnYZPcyFxWyFn_JjO2Bai7Qi0",authDomain:"shopping-cart-angular-d9f4a.firebaseapp.com",messagingSenderId:"64334373338",measurementId:"G-BG3VJ53Q42"};let yV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[fV]}),n.\u0275inj=l.cJS({providers:[RD,c0,xD,SD],imports:[fo,nu,sV,Ro,ty,ZL.forRoot(),Va.hO.initializeApp(kS_firebase),_x(()=>sb(kS_firebase)),qF(()=>QF()),Sb(()=>Nb())]}),n})();l.B6R(PS,function(){return[Bi,Dn,mV]},function(){return[Jo]}),(0,l.G48)(),fa().bootstrapModule(yV).catch(n=>console.error(n))},2011:(ct,Se,k)=>{k.d(Se,{Dh:()=>le,GT:()=>ge,cc:()=>Ne,hO:()=>$e,on:()=>W,pX:()=>oe,xv:()=>me});var l=k(4650),B=k(127),O=k(5813);ct=k.hmd(ct);const ie=["ngOnDestroy"],oe=(fe,Qe,Ze,ke={})=>new Proxy(fe,{get:(Re,we)=>Ze.runOutsideAngular(()=>{var He;if(fe[we])return!(null===(He=ke?.spy)||void 0===He)&&He.get&&ke.spy.get(we,fe[we]),fe[we];if(ie.indexOf(we)>-1)return()=>{};const re=Qe.toPromise().then(ae=>{const ye=ae&&ae[we];return"function"==typeof ye?ye.bind(ae):ye&&ye.then?ye.then(K=>Ze.run(()=>K)):Ze.run(()=>ye)});return new Proxy(()=>{},{get:(ae,ye)=>re[ye],apply:(ae,ye,K)=>re.then(J=>{var he;const se=J&&J(...K);return!(null===(he=ke?.spy)||void 0===he)&&he.apply&&ke.spy.apply(we,K,se),se})})})}),ge=(fe,Qe)=>{Qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(ke=>{Object.defineProperty(fe.prototype,ke,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,ke))})})};class de{constructor(Qe){return Qe}}const le=new l.OlP("angularfire2.app.options"),me=new l.OlP("angularfire2.app.name");function W(fe,Qe,Ze){const Re="object"==typeof Ze&&Ze||{};Re.name=Re.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const He=B.Z.apps.filter(re=>re&&re.name===Re.name)[0]||Qe.runOutsideAngular(()=>B.Z.initializeApp(fe,Re));try{JSON.stringify(fe)!==JSON.stringify(He.options)&&G("error",`${He.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(He)}const G=(fe,...Qe)=>{(0,l.X6Q)()&&typeof console<"u"&&console[fe](...Qe)},Q={provide:de,useFactory:W,deps:[le,l.R0b,[new l.FiY,me]]};let $e=(()=>{class fe{constructor(Ze){B.Z.registerVersion("angularfire",O.q4.full,"core"),B.Z.registerVersion("angularfire",O.q4.full,"app-compat"),B.Z.registerVersion("angular",l.q4F.full,Ze.toString())}static initializeApp(Ze,ke){return{ngModule:fe,providers:[{provide:le,useValue:Ze},{provide:me,useValue:ke}]}}}return fe.\u0275fac=function(Ze){return new(Ze||fe)(l.LFG(l.Lbi))},fe.\u0275mod=l.oAB({type:fe}),fe.\u0275inj=l.cJS({providers:[Q]}),fe})();function Ne(fe,Qe,Ze,ke,Re){const[,we,He]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===fe)||[];if(we)return function Ee(fe,Qe){try{return fe.toString()===Qe.toString()}catch{return fe===Qe}}(Re,He)||(_e("error",`${Qe} was already initialized on the ${Ze} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Re,was:He})),we;{const re=ke();return globalThis.\u0275AngularfireInstanceCache.push([fe,re,Re]),re}}const tt=!!ct.hot,_e=(fe,...Qe)=>{(0,l.X6Q)()&&typeof console<"u"&&console[fe](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,Se,k)=>{k.d(Se,{q4:()=>$u,iC:()=>zu,HU:()=>wa,vb:()=>tu,JM:()=>_a,u3:()=>qd});var l=k(4650),B=k(5867),O=k(5861),ie=k(9681),oe=k(2090),ge=k(4859),de=k(1877),le=k(8766);const me="@firebase/installations",W="0.5.15",Q=`w:${W}`,$e="FIS_v2",Qe=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(D){return D instanceof oe.ZR&&D.code.includes("request-failed")}function ke({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Re(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function we(D,b){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(D,b){const V=(yield b.json()).error;return Qe.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function re({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ae(D,{refreshToken:b}){const x=re(D);return x.append("Authorization",function he(D){return`${$e} ${D}`}(b)),x}function ye(D){return K.apply(this,arguments)}function K(){return(K=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function se(D,b){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const V=ke(D),Y=re(D),ue=b.getImmediate({optional:!0});if(ue){const Mt=yield ue.getHeartbeatsHeader();Mt&&Y.append("x-firebase-client",Mt)}const ze={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:$e,appId:D.appId,sdkVersion:Q})},ht=yield ye(()=>fetch(V,ze));if(ht.ok){const Mt=yield ht.json();return{fid:Mt.fid||x,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:Re(Mt.authToken)}}throw yield we("Create Installation",ht)})).apply(this,arguments)}function Be(D){return new Promise(b=>{setTimeout(b,D)})}const tn=/^[cdef][\w-]{21}$/;function We(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function un(D){return function gt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return tn.test(x)?x:""}catch{return""}}function mn(D){return`${D.appName}!${D.appId}`}const Xt=new Map;function en(D,b){const x=mn(D);hr(x,b),function bi(D,b){const x=function Sn(){return!Er&&"BroadcastChannel"in self&&(Er=new BroadcastChannel("[Firebase] FID Change"),Er.onmessage=D=>{hr(D.data.key,D.data.fid)}),Er}();x&&x.postMessage({key:D,fid:b}),function ki(){0===Xt.size&&Er&&(Er.close(),Er=null)}()}(x,b)}function hr(D,b){const x=Xt.get(D);if(x)for(const V of x)V(b)}let Er=null;const Un="firebase-installations-store";let ui=null;function Li(){return ui||(ui=(0,le.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Un)}})),ui}function Ke(D,b){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(D,b){const x=mn(D),Y=(yield Li()).transaction(Un,"readwrite"),ue=Y.objectStore(Un),Te=yield ue.get(x);return yield ue.put(b,x),yield Y.done,(!Te||Te.fid!==b.fid)&&en(D,b.fid),b})).apply(this,arguments)}function Bn(D){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(D){const b=mn(D),V=(yield Li()).transaction(Un,"readwrite");yield V.objectStore(Un).delete(b),yield V.done})).apply(this,arguments)}function or(D,b){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(D,b){const x=mn(D),Y=(yield Li()).transaction(Un,"readwrite"),ue=Y.objectStore(Un),Te=yield ue.get(x),ze=b(Te);return void 0===ze?yield ue.delete(x):yield ue.put(ze,x),yield Y.done,ze&&(!Te||Te.fid!==ze.fid)&&en(D,ze.fid),ze})).apply(this,arguments)}function yn(D){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(D){let b;const x=yield or(D.appConfig,V=>{const Y=pn(V),ue=lt(D,Y);return b=ue.registrationPromise,ue.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function pn(D){return Et(D||{fid:We(),registrationStatus:0})}function lt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},V=function dt(D,b){return Dt.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:V}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:kr(D)}:{installationEntry:b}}function Dt(){return(Dt=(0,O.Z)(function*(D,b){try{const x=yield se(D,b);return Ke(D.appConfig,x)}catch(x){throw Ze(x)&&409===x.customData.serverCode?yield Bn(D.appConfig):yield Ke(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function kr(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(D){let b=yield fr(D.appConfig);for(;1===b.registrationStatus;)yield Be(100),b=yield fr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield yn(D);return V||x}return b})).apply(this,arguments)}function fr(D){return or(D,b=>{if(!b)throw Qe.create("installation-not-found");return Et(b)})}function Et(D){return function Cr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ot(D,b){return zr.apply(this,arguments)}function zr(){return(zr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const V=Wt(D,x),Y=ae(D,x),ue=b.getImmediate({optional:!0});if(ue){const Mt=yield ue.getHeartbeatsHeader();Mt&&Y.append("x-firebase-client",Mt)}const ze={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},ht=yield ye(()=>fetch(V,ze));if(ht.ok)return Re(yield ht.json());throw yield we("Generate Auth Token",ht)})).apply(this,arguments)}function Wt(D,{fid:b}){return`${ke(D)}/${b}/authTokens:generate`}function rr(D){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(D,b=!1){let x;const V=yield or(D.appConfig,ue=>{if(!Zt(ue))throw Qe.create("not-registered");const Te=ue.authToken;if(!b&&z(Te))return ue;if(1===Te.requestStatus)return x=Xe(D,b),ue;{if(!navigator.onLine)throw Qe.create("app-offline");const ze=q(ue);return x=vt(D,ze),ze}});return x?yield x:V.authToken})).apply(this,arguments)}function Xe(D,b){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(D,b){let x=yield Je(D.appConfig);for(;1===x.authToken.requestStatus;)yield Be(100),x=yield Je(D.appConfig);const V=x.authToken;return 0===V.requestStatus?rr(D,b):V})).apply(this,arguments)}function Je(D){return or(D,b=>{if(!Zt(b))throw Qe.create("not-registered");return function U(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function vt(D,b){return _t.apply(this,arguments)}function _t(){return(_t=(0,O.Z)(function*(D,b){try{const x=yield Ot(D,b),V=Object.assign(Object.assign({},b),{authToken:x});return yield Ke(D.appConfig,V),x}catch(x){if(!Ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ke(D.appConfig,V)}else yield Bn(D.appConfig);throw x}})).apply(this,arguments)}function Zt(D){return void 0!==D&&2===D.registrationStatus}function z(D){return 2===D.requestStatus&&!function j(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function q(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function L(){return(L=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:V}=yield yn(b);return V?V.catch(console.error):rr(b).catch(console.error),x.fid})).apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*(D,b=!1){const x=D;return yield nt(x),(yield rr(x,b)).token})).apply(this,arguments)}function nt(D){return rt.apply(this,arguments)}function rt(){return(rt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield yn(D);b&&(yield b)})).apply(this,arguments)}function Is(D){return Qe.create("missing-app-config-values",{valueName:D})}const Zs="installations",Es=D=>{const b=D.getProvider("app").getImmediate(),x=function _n(D){if(!D||!D.options)throw Is("App Configuration");if(!D.name)throw Is("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw Is(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ds=D=>{const b=D.getProvider("app").getImmediate(),x=(0,ie._getProvider)(b,Zs).getImmediate();return{getId:()=>function R(D){return L.apply(this,arguments)}(x),getToken:Y=>function ee(D){return Pe.apply(this,arguments)}(x,Y)}};(function Ua(){(0,ie._registerComponent)(new ge.wA(Zs,Es,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("installations-internal",Ds,"PRIVATE"))})(),(0,ie.registerVersion)(me,W),(0,ie.registerVersion)(me,W,"esm2017");const Ui="@firebase/remote-config",$n=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Du{constructor(b,x,V,Y){this.client=b,this.storage=x,this.storageCache=V,this.logger=Y}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,Y=V<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Y}.`),Y}fetch(b){var x=this;return(0,O.Z)(function*(){const[V,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(b.cacheMaxAgeMillis,V))return Y;b.eTag=Y&&Y.eTag;const ue=yield x.client.fetch(b),Te=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Te.push(x.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Te),ue})()}}function Yo(D=navigator){return D.languages&&D.languages[0]||D.language}class As{constructor(b,x,V,Y,ue,Te){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=V,this.projectId=Y,this.apiKey=ue,this.appId=Te}fetch(b){var x=this;return(0,O.Z)(function*(){var V,Y,ue;const[Te,ze]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},ft={sdk_version:x.sdkVersion,app_instance_id:Te,app_instance_id_token:ze,app_id:x.appId,language_code:Yo()},kn={method:"POST",headers:Rt,body:JSON.stringify(ft)},gr=fetch(Mt,kn),Fs=new Promise((Ls,Vs)=>{b.signal.addEventListener(()=>{const Zd=new Error("The operation was aborted.");Zd.name="AbortError",Vs(Zd)})});let Ea;try{yield Promise.race([gr,Fs]),Ea=yield gr}catch(Ls){let Vs="fetch-client-network";throw"AbortError"===(null===(V=Ls)||void 0===V?void 0:V.name)&&(Vs="fetch-timeout"),$n.create(Vs,{originalErrorMessage:null===(Y=Ls)||void 0===Y?void 0:Y.message})}let gi=Ea.status;const Co=Ea.headers.get("ETag")||void 0;let qu,nu;if(200===Ea.status){let Ls;try{Ls=yield Ea.json()}catch(Vs){throw $n.create("fetch-client-parse",{originalErrorMessage:null===(ue=Vs)||void 0===ue?void 0:ue.message})}qu=Ls.entries,nu=Ls.state}if("INSTANCE_STATE_UNSPECIFIED"===nu?gi=500:"NO_CHANGE"===nu?gi=304:("NO_TEMPLATE"===nu||"EMPTY_CONFIG"===nu)&&(qu={}),304!==gi&&200!==gi)throw $n.create("fetch-status",{httpStatus:gi});return{status:gi,eTag:Co,config:qu}})()}}class $i{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,V)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:V}){var Y=this;return(0,O.Z)(function*(){yield function Zr(D,b){return new Promise((x,V)=>{const Y=Math.max(b-Date.now(),0),ue=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(ue),V($n.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ue=yield Y.client.fetch(b);return yield Y.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Lf(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ue))throw ue;const Te={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Te),Y.attemptFetch(b,Te)}})()}}class Uf{constructor(b,x,V,Y,ue){this.app=b,this._client=x,this._storageCache=V,this._storage=Y,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(D,b){var x;const V=D.target.error||void 0;return $n.create(b,{originalErrorMessage:V&&(null===(x=V)||void 0===x?void 0:x.message)})}const Ys="app_namespace_store";class Uc{constructor(b,x,V,Y=function jf(){return new Promise((D,b)=>{var x;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Y=>{b(Qo(Y,"storage-open"))},V.onsuccess=Y=>{D(Y.target.result)},V.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Ys,{keyPath:"compositeKey"})}}catch(V){b($n.create("storage-open",{originalErrorMessage:null===(x=V)||void 0===x?void 0:x.message}))}})}()){this.appId=b,this.appName=x,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((Y,ue)=>{var Te;const ht=V.transaction([Ys],"readonly").objectStore(Ys),Mt=x.createCompositeKey(b);try{const Rt=ht.get(Mt);Rt.onerror=ft=>{ue(Qo(ft,"storage-get"))},Rt.onsuccess=ft=>{const kn=ft.target.result;Y(kn?kn.value:void 0)}}catch(Rt){ue($n.create("storage-get",{originalErrorMessage:null===(Te=Rt)||void 0===Te?void 0:Te.message}))}})})()}set(b,x){var V=this;return(0,O.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((ue,Te)=>{var ze;const Mt=Y.transaction([Ys],"readwrite").objectStore(Ys),Rt=V.createCompositeKey(b);try{const ft=Mt.put({compositeKey:Rt,value:x});ft.onerror=kn=>{Te(Qo(kn,"storage-set"))},ft.onsuccess=()=>{ue()}}catch(ft){Te($n.create("storage-set",{originalErrorMessage:null===(ze=ft)||void 0===ze?void 0:ze.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((Y,ue)=>{var Te;const ht=V.transaction([Ys],"readwrite").objectStore(Ys),Mt=x.createCompositeKey(b);try{const Rt=ht.delete(Mt);Rt.onerror=ft=>{ue(Qo(ft,"storage-delete"))},Rt.onsuccess=()=>{Y()}}catch(Rt){ue($n.create("storage-delete",{originalErrorMessage:null===(Te=Rt)||void 0===Te?void 0:Te.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Qs{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),V=b.storage.getLastSuccessfulFetchTimestampMillis(),Y=b.storage.getActiveConfig(),ue=yield x;ue&&(b.lastFetchStatus=ue);const Te=yield V;Te&&(b.lastSuccessfulFetchTimestampMillis=Te);const ze=yield Y;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function _m(){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Bc(){(0,ie._registerComponent)(new ge.wA("remote-config",function D(b,{instanceIdentifier:x}){const V=b.getProvider("app").getImmediate(),Y=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!(0,oe.hl)())throw $n.create("indexed-db-unavailable");const{projectId:ue,apiKey:Te,appId:ze}=V.options;if(!ue)throw $n.create("registration-project-id");if(!Te)throw $n.create("registration-api-key");if(!ze)throw $n.create("registration-app-id");const ht=new Uc(ze,V.name,x=x||"firebase"),Mt=new Qs(ht),Rt=new de.Yd(Ui);Rt.logLevel=de.in.ERROR;const ft=new As(Y,ie.SDK_VERSION,x,ue,Te,ze),kn=new $i(ft,ht),gr=new Du(kn,ht,Mt,Rt),Fs=new Uf(V,gr,Mt,ht,Rt);return function Dn(D){const b=(0,oe.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Fs),Fs},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ui,"0.3.14"),(0,ie.registerVersion)(Ui,"0.3.14","esm2017")}();const lr="/firebase-messaging-sw.js",Xs="/firebase-cloud-messaging-push-scope",es="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$a="google.c.a.c_id",Cu="google.c.a.c_l",bu="google.c.a.ts",eo="google.c.a.e";var Kr=(()=>{return(D=Kr||(Kr={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Kr;var D})();function Hi(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),Y=new Uint8Array(V.length);for(let ue=0;ue<V.length;++ue)Y[ue]=V.charCodeAt(ue);return Y}const Ss="fcm_token_details_db",to="fcm_token_object_Store";function $f(D){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Ss))return null;let b=null;return(yield(0,le.X3)(Ss,5,{upgrade:(V=(0,O.Z)(function*(Y,ue,Te,ze){var ht;if(ue<2||!Y.objectStoreNames.contains(to))return;const Mt=ze.objectStore(to),Rt=yield Mt.index("fcmSenderId").get(D);if(yield Mt.clear(),Rt)if(2===ue){const ft=Rt;if(!ft.auth||!ft.p256dh||!ft.endpoint)return;b={token:ft.fcmToken,createTime:null!==(ht=ft.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:ft.auth,p256dh:ft.p256dh,endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:"string"==typeof ft.vapidKey?ft.vapidKey:Hi(ft.vapidKey)}}}else if(3===ue){const ft=Rt;b={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Hi(ft.auth),p256dh:Hi(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Hi(ft.vapidKey)}}}else if(4===ue){const ft=Rt;b={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Hi(ft.auth),p256dh:Hi(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Hi(ft.vapidKey)}}}}),function(ue,Te,ze,ht){return V.apply(this,arguments)})})).close(),yield(0,le.Lj)(Ss),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),xn(b)?b:null;var V}),Tu.apply(this,arguments)}function xn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const li="firebase-messaging-store";let dr=null;function Ha(){return dr||(dr=(0,le.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(li)}})),dr}function xs(D){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(D){const b=Yr(D),V=yield(yield Ha()).transaction(li).objectStore(li).get(b);if(V)return V;{const Y=yield $f(D.appConfig.senderId);if(Y)return yield nn(D,Y),Y}})).apply(this,arguments)}function nn(D,b){return Au.apply(this,arguments)}function Au(){return(Au=(0,O.Z)(function*(D,b){const x=Yr(D),Y=(yield Ha()).transaction(li,"readwrite");return yield Y.objectStore(li).put(b,x),yield Y.done,b})).apply(this,arguments)}function ts(D){return Su.apply(this,arguments)}function Su(){return(Su=(0,O.Z)(function*(D){const b=Yr(D),V=(yield Ha()).transaction(li,"readwrite");yield V.objectStore(li).delete(b),yield V.done})).apply(this,arguments)}function Yr({appConfig:D}){return D.appId}const Rn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function At(D,b){return ea.apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(D,b){var x;const V=yield ra(D),Y=Me(b),ue={method:"POST",headers:V,body:JSON.stringify(Y)};let Te;try{Te=yield(yield fetch(Ms(D.appConfig),ue)).json()}catch(ze){throw Rn.create("token-subscribe-failed",{errorInfo:null===(x=ze)||void 0===x?void 0:x.toString()})}if(Te.error)throw Rn.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw Rn.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function Hf(D,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(D,b){var x;const V=yield ra(D),Y=Me(b.subscriptionOptions),ue={method:"PATCH",headers:V,body:JSON.stringify(Y)};let Te;try{Te=yield(yield fetch(`${Ms(D.appConfig)}/${b.token}`,ue)).json()}catch(ze){throw Rn.create("token-update-failed",{errorInfo:null===(x=ze)||void 0===x?void 0:x.toString()})}if(Te.error)throw Rn.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw Rn.create("token-update-no-token");return Te.token})).apply(this,arguments)}function Hc(D,b){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(D,b){var x;const Y={method:"DELETE",headers:yield ra(D)};try{const Te=yield(yield fetch(`${Ms(D.appConfig)}/${b}`,Y)).json();if(Te.error)throw Rn.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(ue){throw Rn.create("token-unsubscribe-failed",{errorInfo:null===(x=ue)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ms({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function ra(D){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Me({p256dh:D,auth:b,endpoint:x,vapidKey:V}){const Y={web:{endpoint:x,auth:b,p256dh:D}};return V!==es&&(Y.web.applicationPubKey=V),Y}const zt=6048e5;function Od(D){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(D){const b=yield Pd(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Hi(b.getKey("auth")),p256dh:Hi(b.getKey("p256dh"))},V=yield xs(D.firebaseDependencies);if(V){if(Gf(V.subscriptionOptions,x))return Date.now()>=V.createTime+zt?Ga(D,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield Hc(D.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return za(D.firebaseDependencies,x)}return za(D.firebaseDependencies,x)})).apply(this,arguments)}function Kn(D){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(D){const b=yield xs(D.firebaseDependencies);b&&(yield Hc(D.firebaseDependencies,b.token),yield ts(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ga(D,b){return br.apply(this,arguments)}function br(){return(br=(0,O.Z)(function*(D,b){try{const x=yield Hf(D.firebaseDependencies,b),V=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield nn(D.firebaseDependencies,V),x}catch(x){throw yield Kn(D),x}})).apply(this,arguments)}function za(D,b){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(D,b){const V={token:yield At(D,b),createTime:Date.now(),subscriptionOptions:b};return yield nn(D,V),V.token})).apply(this,arguments)}function Pd(D,b){return ia.apply(this,arguments)}function ia(){return(ia=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vr(b)})})).apply(this,arguments)}function Gf(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Rs(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Yn(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const V=b.notification.body;V&&(D.notification.body=V);const Y=b.notification.image;Y&&(D.notification.image=Y)}(b,D),function Ai(D,b){!b.data||(D.data=b.data)}(b,D),function sa(D,b){var x,V,Y,ue,Te;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const ze=null!==(Y=null===(V=b.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Y?Y:null===(ue=b.notification)||void 0===ue?void 0:ue.click_action;ze&&(D.fcmOptions.link=ze);const ht=null===(Te=b.fcmOptions)||void 0===Te?void 0:Te.analytics_label;ht&&(D.fcmOptions.analyticsLabel=ht)}(b,D),b}function oa(D){return"object"==typeof D&&!!D&&$a in D}function Gi(D,b){const x=[];for(let V=0;V<D.length;V++)x.push(D.charAt(V)),V<b.length&&x.push(b.charAt(V));return x.join("")}function xu(D){return Rn.create("missing-app-config-values",{valueName:D})}Gi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zc{constructor(b,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Gc(D){if(!D||!D.options)throw xu("App Configuration Object");if(!D.name)throw xu("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const V of b)if(!x[V])throw xu(V);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Y,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function kd(D){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(lr,{scope:Xs}),D.swRegistration.update().catch(()=>{})}catch(x){throw Rn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=x)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function Mu(D,b){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield kd(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Rn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Ru(D,b){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=es)})).apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(D,b){if(!navigator)throw Rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rn.create("permission-blocked");return yield Ru(D,b?.vapidKey),yield Mu(D,b?.serviceWorkerRegistration),Od(D)})).apply(this,arguments)}function Fd(D,b,x){return ca.apply(this,arguments)}function ca(){return(ca=(0,O.Z)(function*(D,b,x){const V=Ld(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[$a],message_name:x[Cu],message_time:x[bu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ld(D){switch(D){case Kr.NOTIFICATION_CLICKED:return"notification_open";case Kr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ns(){return(ns=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Kr.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Rs(x)):D.onMessageHandler.next(Rs(x)));const V=x.data;oa(V)&&"1"===V[eo]&&(yield Fd(D,x.messageType,V))})).apply(this,arguments)}const rs="@firebase/messaging",bn=D=>{const b=new zc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function qc(D,b){return ns.apply(this,arguments)}(b,x)),b},zi=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:V=>function Wc(D,b){return ao.apply(this,arguments)}(b,V)}};function Kc(){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tn(){(0,ie._registerComponent)(new ge.wA("messaging",bn,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("messaging-internal",zi,"PRIVATE")),(0,ie.registerVersion)(rs,"0.9.19"),(0,ie.registerVersion)(rs,"0.9.19","esm2017")}();const Ns="analytics",Qc="firebase_id",Fu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jc="https://www.googletagmanager.com/gtag/js",Nn=new de.Yd("@firebase/analytics");function qa(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Za(D,b){const x=document.createElement("script");x.src=`${Jc}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Ud(D,b,x,V,Y,ue){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,O.Z)(function*(D,b,x,V,Y,ue){const Te=V[Y];try{if(Te)yield b[Te];else{const ht=(yield qa(x)).find(Mt=>Mt.measurementId===Y);ht&&(yield b[ht.appId])}}catch(ze){Nn.error(ze)}D("config",Y,ue)})).apply(this,arguments)}function Wi(D,b,x,V,Y){return la.apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(D,b,x,V,Y){try{let ue=[];if(Y&&Y.send_to){let Te=Y.send_to;Array.isArray(Te)||(Te=[Te]);const ze=yield qa(x);for(const ht of Te){const Mt=ze.find(ft=>ft.measurementId===ht),Rt=Mt&&b[Mt.appId];if(!Rt){ue=[];break}ue.push(Rt)}}0===ue.length&&(ue=Object.values(b)),yield Promise.all(ue),D("event",V,Y||{})}catch(ue){Nn.error(ue)}})).apply(this,arguments)}function Xc(D){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(Jc)&&x.src.includes(D))return x;return null}const Qn=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ha=new class Vu{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function lo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function $d(D){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:V}=D,Y={method:"GET",headers:lo(V)},ue=Fu.replace("{app-id}",x),Te=yield fetch(ue,Y);if(200!==Te.status&&304!==Te.status){let ze="";try{const ht=yield Te.json();null!==(b=ht.error)&&void 0!==b&&b.message&&(ze=ht.error.message)}catch{}throw Qn.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:ze})}return Te.json()})).apply(this,arguments)}function el(D){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(D,b=ha,x){const{appId:V,apiKey:Y,measurementId:ue}=D.options;if(!V)throw Qn.create("no-app-id");if(!Y){if(ue)return{measurementId:ue,appId:V};throw Qn.create("no-api-key")}const Te=b.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new fa;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==x?x:6e4),tl({appId:V,apiKey:Y,measurementId:ue},Te,ze,b)})).apply(this,arguments)}function tl(D,b,x){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},V,Y=ha){var ue,Te;const{appId:ze,measurementId:ht}=D;try{yield Uu(V,b)}catch(Mt){if(ht)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Mt)||void 0===ue?void 0:ue.message}]`),{appId:ze,measurementId:ht};throw Mt}try{const Mt=yield $d(D);return Y.deleteThrottleMetadata(ze),Mt}catch(Mt){const Rt=Mt;if(!Qa(Rt)){if(Y.deleteThrottleMetadata(ze),ht)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${Rt?.message}]`),{appId:ze,measurementId:ht};throw Mt}const ft=503===Number(null===(Te=Rt?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,oe.$s)(x,Y.intervalMillis,30):(0,oe.$s)(x,Y.intervalMillis),kn={throttleEndTimeMillis:Date.now()+ft,backoffCount:x+1};return Y.setThrottleMetadata(ze,kn),Nn.debug(`Calling attemptFetch again in ${ft} millis`),tl(D,kn,V,Y)}})).apply(this,arguments)}function Uu(D,b){return new Promise((x,V)=>{const Y=Math.max(b-Date.now(),0),ue=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(ue),V(Qn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Qa(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class fa{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Os,Xa;function ho(){return(ho=(0,O.Z)(function*(D,b,x,V,Y){if(Y&&Y.global)D("event",x,V);else{const ue=yield b;D("event",x,Object.assign(Object.assign({},V),{send_to:ue}))}})).apply(this,arguments)}function mo(D){Xa=D}function Bu(D){Os=D}function ss(){return yo.apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(){var D;if(!(0,oe.hl)())return Nn.warn(Qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(b){return Nn.warn(Qn.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function vo(){return(vo=(0,O.Z)(function*(D,b,x,V,Y,ue,Te){var ze;const ht=el(D);ht.then(gr=>{x[gr.measurementId]=gr.appId,D.options.measurementId&&gr.measurementId!==D.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gr=>Nn.error(gr)),b.push(ht);const Mt=ss().then(gr=>{if(gr)return V.getId()}),[Rt,ft]=yield Promise.all([ht,Mt]);Xc(ue)||Za(ue,Rt.measurementId),Xa&&(Y("consent","default",Xa),mo(void 0)),Y("js",new Date);const kn=null!==(ze=Te?.config)&&void 0!==ze?ze:{};return kn.origin="firebase",kn.update=!0,null!=ft&&(kn[Qc]=ft),Y("config",Rt.measurementId,kn),Os&&(Y("set",Os),Bu(void 0)),Rt.measurementId})).apply(this,arguments)}class eu{constructor(b){this.app=b}_delete(){return delete pr[this.app.options.appId],Promise.resolve()}}let pr={},_o=[];const Ps={};let Io,xi,wo="dataLayer",rl=!1;function zd(D,b,x){!function zf(){const D=[];if((0,oe.ru)()&&D.push("This is a browser extension environment."),(0,oe.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),x=Qn.create("invalid-analytics-context",{errorInfo:b});Nn.warn(x.message)}}();const V=D.options.appId;if(!V)throw Qn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Qn.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pr[V])throw Qn.create("already-exists",{id:V});if(!rl){!function Ka(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(wo);const{wrappedGtag:ue,gtagCore:Te}=function da(D,b,x,V,Y){let ue=function(...Te){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ue=window[Y]),window[Y]=function Lu(D,b,x,V){function ue(){return(ue=(0,O.Z)(function*(Te,ze,ht){try{"event"===Te?yield Wi(D,b,x,ze,ht):"config"===Te?yield Ud(D,b,x,V,ze,ht):"consent"===Te?D("consent","update",ht):D("set",ze)}catch(Mt){Nn.error(Mt)}})).apply(this,arguments)}return function Y(Te,ze,ht){return ue.apply(this,arguments)}}(ue,D,b,x),{gtagCore:ue,wrappedGtag:window[Y]}}(pr,_o,Ps,wo,"gtag");xi=ue,Io=Te,rl=!0}return pr[V]=function Gd(D,b,x,V,Y,ue,Te){return vo.apply(this,arguments)}(D,_o,Ps,b,Io,wo,x),new eu(D)}function Im(){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const st="@firebase/analytics";!function an(){(0,ie._registerComponent)(new ge.wA(Ns,(b,{options:x})=>zd(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new ge.wA("analytics-internal",function D(b){try{const x=b.getProvider(Ns).getImmediate();return{logEvent:(V,Y,ue)=>function Mi(D,b,x,V){D=(0,oe.m9)(D),function pa(D,b,x,V,Y){return ho.apply(this,arguments)}(xi,pr[D.app.options.appId],b,x,V).catch(Y=>Nn.error(Y))}(x,V,Y,ue)}}catch(x){throw Qn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(st,"0.8.3"),(0,ie.registerVersion)(st,"0.8.3","esm2017")}();var hi=k(4408),Pn=k(7565);const Br=new class Mn extends Pn.v{}(class fi extends hi.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(b,x,V):(b.flush(this),0)}});var il=k(4986),os=k(9751),Ri=k(8505),sl=k(9468),Tr=k(5363);const $u=new l.GfV("7.4.1"),Ni="__angularfire_symbol__analyticsIsSupportedValue",Hu="__angularfire_symbol__analyticsIsSupported",ma="__angularfire_symbol__remoteConfigIsSupportedValue",Do="__angularfire_symbol__remoteConfigIsSupported",Xr="__angularfire_symbol__messagingIsSupportedValue",ol="__angularfire_symbol__messagingIsSupported";function _a(D,b,x){if(b){if(1===b.length)return b[0];const ue=b.filter(Te=>Te.app===x);if(1===ue.length)return ue[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Hu]||(globalThis[Hu]=Im().then(D=>globalThis[Ni]=D).catch(()=>globalThis[Ni]=!1)),globalThis[ol]||(globalThis[ol]=Kc().then(D=>globalThis[Xr]=D).catch(()=>globalThis[Xr]=!1)),globalThis[Do]||(globalThis[Do]=_m().then(D=>globalThis[ma]=D).catch(()=>globalThis[ma]=!1));const tu=(D,b)=>{const x=b?[b]:(0,B.C6)(),V=[];return x.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Te=>{V.includes(Te)||V.push(Te)})}),V};function Ar(){}class An{constructor(b,x=Br){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,V){const Y=this.zone;return this.delegate.schedule(function(Te){Y.runGuarded(()=>{b.apply(this,[Te])})},x,V)}}class as{constructor(b){this.zone=b,this.task=null}call(b,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ar,{},Ar,Ar)),x.pipe((0,Ri.b)({next:V,complete:V,error:V})).subscribe(b).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wa=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new An(Zone.current)),this.insideAngular=x.run(()=>new An(Zone.current,il.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(l.LFG(l.R0b))},D.\u0275prov=l.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ei(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function al(D){return ei().ngZone.runOutsideAngular(()=>D())}function pi(D){return ei().ngZone.run(()=>D())}function zu(D){return ei(),function Hn(D){return function(x){return(x=x.lift(new as(D.ngZone))).pipe((0,sl.R)(D.outsideAngular),(0,Tr.Q)(D.insideAngular))}}(ei())(D)}const Wu=(D,b)=>function(){const V=arguments;return b&&setTimeout(()=>{"scheduled"===b.state&&b.invoke()},10),pi(()=>D.apply(void 0,V))},qd=(D,b)=>function(){let x;const V=arguments;for(let ue=0;ue<arguments.length;ue++)"function"==typeof V[ue]&&(b&&(x||(x=pi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ar,{},Ar,Ar)))),V[ue]=Wu(V[ue],x));const Y=al(()=>D.apply(this,V));if(!b){if(Y instanceof os.y){const ue=ei();return Y.pipe((0,sl.R)(ue.outsideAngular),(0,Tr.Q)(ue.insideAngular))}return pi(()=>Y)}return Y instanceof os.y?Y.pipe(zu):Y instanceof Promise?pi(()=>new Promise((ue,Te)=>Y.then(ze=>pi(()=>ue(ze)),ze=>pi(()=>Te(ze))))):"function"==typeof Y&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),Y.apply(this,arguments)}:pi(()=>Y)}},7573:(ct,Se,k)=>{k.d(Se,{$:()=>Ms,A:()=>G,B:()=>Ne,G:()=>Ds,H:()=>Fr,J:()=>$i,L:()=>z,M:()=>ja,N:()=>Jo,P:()=>il,Q:()=>$a,R:()=>Wf,T:()=>Cu,U:()=>es,V:()=>Kr,W:()=>Hi,X:()=>$f,Y:()=>Xo,Z:()=>At,_:()=>Hf,a:()=>is,a0:()=>Od,a1:()=>Kn,a2:()=>Ga,a3:()=>za,a4:()=>Pd,a5:()=>Gf,a6:()=>Yn,a7:()=>Ai,a8:()=>oa,a9:()=>Gi,aA:()=>kn,aB:()=>ze,aC:()=>pi,aD:()=>al,aE:()=>mt,aI:()=>lo,aL:()=>eo,aa:()=>kd,ab:()=>Mu,ac:()=>Ru,af:()=>Fd,ag:()=>Ld,ah:()=>qc,ak:()=>li,al:()=>Ou,an:()=>Jc,ao:()=>Ya,ap:()=>Ct,aq:()=>ye,ar:()=>Le,as:()=>nt,at:()=>Ze,au:()=>ur,av:()=>gi,aw:()=>ke,ax:()=>re,ay:()=>J,az:()=>j,b:()=>Qn,c:()=>Do,d:()=>qf,e:()=>ol,f:()=>zu,g:()=>x,h:()=>qd,i:()=>yo,j:()=>ue,k:()=>th,l:()=>Jr,m:()=>cs,n:()=>xm,o:()=>le,r:()=>hi,s:()=>hn,u:()=>Br,y:()=>Ns});var l=k(5861),B=k(2090),O=k(9681),ie=k(1877),oe=k(655),ge=k(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ee=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fe=new ie.Yd("@firebase/auth");function Qe(_,...p){fe.logLevel<=ie.in.ERROR&&fe.error(`Auth (${O.SDK_VERSION}): ${_}`,...p)}function Ze(_,...p){throw He(_,...p)}function ke(_,...p){return He(_,...p)}function Re(_,p,m){const I=Object.assign(Object.assign({},Ee()),{[p]:m});return new B.LL("auth","Firebase",I).create(p,{appName:_.name})}function we(_,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ze(_,"argument-error"),Re(_,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(_,...p){if("string"!=typeof _){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=_.name),_._errorFactory.create(m,...I)}return tt.create(_,...p)}function re(_,p,...m){if(!_)throw He(p,...m)}function ae(_){const p="INTERNAL ASSERTION FAILED: "+_;throw Qe(p),new Error(p)}function ye(_,p){_||ae(p)}const K=new Map;function J(_){ye(_ instanceof Function,"Expected a class definition");let p=K.get(_);return p?(ye(p instanceof _,"Instance stored in cache mismatched with class"),p):(p=new _,K.set(_,p),p)}function Ue(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Be(){return"http:"===gt()||"https:"===gt()}function gt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class We{constructor(p,m){this.shortDelay=p,this.longDelay=m,ye(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Be()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(_,p){ye(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class mn{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new We(3e4,6e4);function $t(_,p){return _.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:_.tenantId}):p}function Pt(_,p,m,I){return hr.apply(this,arguments)}function hr(){return(hr=(0,l.Z)(function*(_,p,m,I,S={}){return bi(_,S,(0,l.Z)(function*(){let P={},X={};I&&("GET"===p?X=I:P={body:JSON.stringify(I)});const Ce=(0,B.xO)(Object.assign({key:_.config.apiKey},X)).slice(1),et=yield _._getAdditionalHeaders();return et["Content-Type"]="application/json",_.languageCode&&(et["X-Firebase-Locale"]=_.languageCode),mn.fetch()(Fi(_,_.config.apiHost,m,Ce),Object.assign({method:p,headers:et,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function bi(_,p,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,l.Z)(function*(_,p,m){_._canInitEmulator=!1;const I=Object.assign(Object.assign({},Xt),p);try{const S=new Dr(_),P=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const X=yield P.json();if("needConfirmation"in X)throw Un(_,"account-exists-with-different-credential",X);if(P.ok&&!("errorMessage"in X))return X;{const Ce=P.ok?X.errorMessage:X.error.message,[et,pt]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Un(_,"credential-already-in-use",X);if("EMAIL_EXISTS"===et)throw Un(_,"email-already-in-use",X);if("USER_DISABLED"===et)throw Un(_,"user-disabled",X);const Ht=I[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw Re(_,Ht,pt);Ze(_,Ht)}}catch(S){if(S instanceof B.ZR)throw S;Ze(_,"network-request-failed")}})).apply(this,arguments)}function Sn(_,p,m,I){return ki.apply(this,arguments)}function ki(){return(ki=(0,l.Z)(function*(_,p,m,I,S={}){const P=yield Pt(_,p,m,I,S);return"mfaPendingCredential"in P&&Ze(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Fi(_,p,m,I){const S=`${p}${m}?${I}`;return _.config.emulator?un(_.config,S):`${_.config.apiScheme}://${S}`}class Dr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(ke(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(_,p,m){const I={appName:_.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const S=ke(_,p,I);return S.customData._tokenResponse=m,S}function Li(){return(Li=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ke(_,p){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bn(_,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function or(_){if(_)try{const p=new Date(Number(_));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function vn(){return(vn=(0,l.Z)(function*(_,p=!1){const m=(0,B.m9)(_),I=yield m.getIdToken(p),S=lt(I);re(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,X=P?.sign_in_provider;return{claims:S,token:I,authTime:or(pn(S.auth_time)),issuedAtTime:or(pn(S.iat)),expirationTime:or(pn(S.exp)),signInProvider:X||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function pn(_){return 1e3*Number(_)}function lt(_){var p;const[m,I,S]=_.split(".");if(void 0===m||void 0===I||void 0===S)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,B.tV)(I);return P?JSON.parse(P):(Qe("Failed to decode base64 JWT payload"),null)}catch(P){return Qe("Caught error parsing JWT payload as JSON",null===(p=P)||void 0===p?void 0:p.toString()),null}}function Dt(_,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,l.Z)(function*(_,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof B.ZR&&qn(I)&&_.auth.currentUser===_&&(yield _.auth.signOut()),I}})).apply(this,arguments)}function qn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class fr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,l.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,l.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(m=I)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Et{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(_){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,l.Z)(function*(_){var p;const m=_.auth,I=yield _.getIdToken(),S=yield Dt(_,Bn(m,{idToken:I}));re(S?.users.length,m,"internal-error");const P=S.users[0];_._notifyReloadListener(P);const X=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?En(P.providerUserInfo):[],Ce=rr(_.providerData,X),Ht=!!_.isAnonymous&&!(_.email&&P.passwordHash||Ce?.length),In={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Ce,metadata:new Et(P.createdAt,P.lastLoginAt),isAnonymous:Ht};Object.assign(_,In)})).apply(this,arguments)}function Wt(){return(Wt=(0,l.Z)(function*(_){const p=(0,B.m9)(_);yield Cr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function rr(_,p){return[..._.filter(I=>!p.some(S=>S.providerId===I.providerId)),...p]}function En(_){return _.map(p=>{var{providerId:m}=p,I=(0,oe._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function De(){return(De=(0,l.Z)(function*(_,p){const m=yield bi(_,{},(0,l.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:P}=_.config,X=Fi(_,S,"/v1/token",`key=${P}`),Ce=yield _._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(X,{method:"POST",headers:Ce,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){re(p.idToken,"internal-error"),re(typeof p.idToken<"u","internal-error"),re(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function dt(_){const p=lt(_);return re(p,"internal-error"),re(typeof p.exp<"u","internal-error"),re(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,l.Z)(function*(){return re(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,l.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:X}=yield function Xe(_,p){return De.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(S,P,Number(X))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:S,expirationTime:P}=m,X=new Je;return I&&(re("string"==typeof I,"internal-error",{appName:p}),X.refreshToken=I),S&&(re("string"==typeof S,"internal-error",{appName:p}),X.accessToken=S),P&&(re("number"==typeof P,"internal-error",{appName:p}),X.expirationTime=P),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return ae("not implemented")}}function vt(_,p){re("string"==typeof _||typeof _>"u","internal-error",{appName:p})}class _t{constructor(p){var{uid:m,auth:I,stsTokenManager:S}=p,P=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Et(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,l.Z)(function*(){const I=yield Dt(m,m.stsTokenManager.getToken(m.auth,p));return re(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function yn(_){return vn.apply(this,arguments)}(this,p)}reload(){return function zr(_){return Wt.apply(this,arguments)}(this)}_assign(p){this!==p&&(re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new _t(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,l.Z)(function*(){let S=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield Cr(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,l.Z)(function*(){const m=yield p.getIdToken();return yield Dt(p,function ui(_,p){return Li.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,S,P,X,Ce,et,pt,Ht;const In=null!==(I=m.displayName)&&void 0!==I?I:void 0,yi=null!==(S=m.email)&&void 0!==S?S:void 0,Jn=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,ls=null!==(X=m.photoURL)&&void 0!==X?X:void 0,hl=null!==(Ce=m.tenantId)&&void 0!==Ce?Ce:void 0,ip=null!==(et=m._redirectEventId)&&void 0!==et?et:void 0,Mm=null!==(pt=m.createdAt)&&void 0!==pt?pt:void 0,fl=null!==(Ht=m.lastLoginAt)&&void 0!==Ht?Ht:void 0,{uid:ru,emailVerified:Zu,isAnonymous:So,providerData:pl,stsTokenManager:iu}=m;re(ru&&iu,p,"internal-error");const Rm=Je.fromJSON(this.name,iu);re("string"==typeof ru,p,"internal-error"),vt(In,p.name),vt(yi,p.name),re("boolean"==typeof Zu,p,"internal-error"),re("boolean"==typeof So,p,"internal-error"),vt(Jn,p.name),vt(ls,p.name),vt(hl,p.name),vt(ip,p.name),vt(Mm,p.name),vt(fl,p.name);const Gn=new _t({uid:ru,auth:p,email:yi,emailVerified:Zu,displayName:In,isAnonymous:So,photoURL:ls,phoneNumber:Jn,tenantId:hl,stsTokenManager:Rm,createdAt:Mm,lastLoginAt:fl});return pl&&Array.isArray(pl)&&(Gn.providerData=pl.map(Nm=>Object.assign({},Nm))),ip&&(Gn._redirectEventId=ip),Gn}static _fromIdTokenResponse(p,m,I=!1){return(0,l.Z)(function*(){const S=new Je;S.updateFromServerResponse(m);const P=new _t({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:I});return yield Cr(P),P})()}}const z=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(m,I){var S=this;return(0,l.Z)(function*(){S.storage[m]=I})()}_get(m){var I=this;return(0,l.Z)(function*(){const S=I.storage[m];return void 0===S?null:S})()}_remove(m){var I=this;return(0,l.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return _.type="NONE",_})();function j(_,p,m){return`firebase:${_}:${p}:${m}`}class q{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:S,name:P}=this.auth;this.fullUserKey=j(this.userKey,S.apiKey,P),this.fullPersistenceKey=j("persistence",S.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,l.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?_t._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,l.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,l.Z)(function*(){if(!m.length)return new q(J(z),p,I);const S=(yield Promise.all(m.map(function(){var pt=(0,l.Z)(function*(Ht){if(yield Ht._isAvailable())return Ht});return function(Ht){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let P=S[0]||J(z);const X=j(I,p.config.apiKey,p.name);let Ce=null;for(const pt of m)try{const Ht=yield pt._get(X);if(Ht){const In=_t._fromJSON(p,Ht);pt!==P&&(Ce=In),P=pt;break}}catch{}const et=S.filter(pt=>pt._shouldAllowMigration);return P._shouldAllowMigration&&et.length?(P=et[0],Ce&&(yield P._set(X,Ce.toJSON())),yield Promise.all(m.map(function(){var pt=(0,l.Z)(function*(Ht){if(Ht!==P)try{yield Ht._remove(X)}catch{}});return function(Ht){return pt.apply(this,arguments)}}())),new q(P,p,I)):new q(P,p,I)})()}}function U(_){const p=_.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Pe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(R(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(rt(p))return"Blackberry";if(be(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||ee(p))&&!p.includes("edge/"))return"Chrome";if(nt(p))return"Android";{const I=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function R(_=(0,B.z$)()){return/firefox\//i.test(_)}function L(_=(0,B.z$)()){const p=_.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ee(_=(0,B.z$)()){return/crios\//i.test(_)}function Pe(_=(0,B.z$)()){return/iemobile/i.test(_)}function nt(_=(0,B.z$)()){return/android/i.test(_)}function rt(_=(0,B.z$)()){return/blackberry/i.test(_)}function be(_=(0,B.z$)()){return/webos/i.test(_)}function Le(_=(0,B.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ct(_=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function ln(_=(0,B.z$)()){return Le(_)||nt(_)||be(_)||rt(_)||/windows phone/i.test(_)||Pe(_)}function _n(_,p=[]){let m;switch(_){case"Browser":m=U((0,B.z$)());break;case"Worker":m=`${U((0,B.z$)())}-${_}`;break;default:m=_}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${I}`}class Is{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=P=>new Promise((X,Ce)=>{try{X(p(P))}catch(et){Ce(et)}});I.onAbort=m,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,l.Z)(function*(){var I;if(m.auth.currentUser===p)return;const S=[];try{for(const P of m.queue)yield P(p),P.onAbort&&S.push(P.onAbort)}catch(P){S.reverse();for(const X of S)try{X()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=P)||void 0===I?void 0:I.message})}})()}}class Zs{constructor(p,m,I){this.app=p,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Es(this),this.idTokenSubscription=new Es(this),this.beforeStateQueue=new Is(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=J(m)),this._initializationPromise=this.queue((0,l.Z)(function*(){var S,P;if(!I._deleted&&(I.persistenceManager=yield q.create(I,p),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,l.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,l.Z)(function*(){var I;const S=yield m.assertedPersistence.getCurrentUser();let P=S,X=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ce=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,et=P?._redirectEventId,pt=yield m.tryRedirectSignIn(p);(!Ce||Ce===et)&&pt?.user&&(P=pt.user,X=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(X)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Ce){P=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ce))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return re(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,l.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,l.Z)(function*(){var I;try{yield Cr(p)}catch(S){if("auth/network-request-failed"!==(null===(I=S)||void 0===I?void 0:I.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ut(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var p=this;return(0,l.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,l.Z)(function*(){const I=p?(0,B.m9)(p):null;return I&&re(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,l.Z)(function*(){if(!I._deleted)return p&&re(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,l.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,l.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,l.Z)(function*(){yield m.assertedPersistence.setPersistence(J(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,l.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,l.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&J(p)||m._popupRedirectResolver;re(I,m,"argument-error"),m.redirectPersistenceManager=yield q.create(m,[J(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,l.Z)(function*(){var I,S;return m._isInitialized&&(yield m.queue((0,l.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,l.Z)(function*(){if(p===m.currentUser)return m.queue((0,l.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,S){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),X=this._isInitialized?Promise.resolve():this._initializationPromise;return re(X,this,"internal-error"),X.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,I,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,l.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=_n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,l.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(I["X-Firebase-Client"]=S),I})()}}function mt(_){return(0,B.m9)(_)}class Es{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ds(_,p,m){const I=mt(_);re(I._canInitEmulator,I,"emulator-config-failed"),re(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const S=!!m?.disableWarnings,P=Ua(p),{host:X,port:Ce}=function Ui(_){const p=Ua(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const P=S[1];return{host:P,port:jn(I.substr(P.length+1))}}{const[P,X]=I.split(":");return{host:P,port:jn(X)}}}(p);I.config.emulator={url:`${P}//${X}${null===Ce?"":`:${Ce}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:X,port:Ce,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Cs(){function _(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Ua(_){const p=_.indexOf(":");return p<0?"":_.substr(0,p+1)}function jn(_){if(!_)return null;const p=Number(_);return isNaN(p)?null:p}class Fr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return ae("not implemented")}_getIdTokenResponse(p){return ae("not implemented")}_linkToIdToken(p,m){return ae("not implemented")}_getReauthenticationResolver(p){return ae("not implemented")}}function Wr(_,p){return $n.apply(this,arguments)}function $n(){return($n=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:resetPassword",$t(_,p))})).apply(this,arguments)}function Ba(_,p){return dn.apply(this,arguments)}function dn(){return(dn=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xd(_,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",$t(_,p))})).apply(this,arguments)}function bs(){return(bs=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithPassword",$t(_,p))})).apply(this,arguments)}function Bi(_,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:sendOobCode",$t(_,p))})).apply(this,arguments)}function ji(_,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(_,p){return Bi(_,p)})).apply(this,arguments)}function Md(_,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,l.Z)(function*(_,p){return Bi(_,p)})).apply(this,arguments)}function qr(_,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,l.Z)(function*(_,p){return Bi(_,p)})).apply(this,arguments)}function Iu(_,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(_,p){return Bi(_,p)})).apply(this,arguments)}function Eu(){return(Eu=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithEmailLink",$t(_,p))})).apply(this,arguments)}function Du(){return(Du=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithEmailLink",$t(_,p))})).apply(this,arguments)}class Yo extends Fr{constructor(p,m,I,S=null){super("password",I),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new Yo(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Yo(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,l.Z)(function*(){switch(m.signInMethod){case"password":return function Zo(_,p){return bs.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Lr(_,p){return Eu.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ze(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,l.Z)(function*(){switch(I.signInMethod){case"password":return Ba(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ff(_,p){return Du.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Ze(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function As(_,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithIdp",$t(_,p))})).apply(this,arguments)}class $i extends Fr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new $i(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ze("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S}=m,P=(0,oe._T)(m,["providerId","signInMethod"]);if(!I||!S)return null;const X=new $i(I,S);return X.idToken=P.idToken||void 0,X.accessToken=P.accessToken||void 0,X.secret=P.secret,X.nonce=P.nonce,X.pendingToken=P.pendingToken||null,X}_getIdTokenResponse(p){return As(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,As(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,As(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Vf(_,p){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:sendVerificationCode",$t(_,p))})).apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithPhoneNumber",$t(_,p))})).apply(this,arguments)}function Vc(){return(Vc=(0,l.Z)(function*(_,p){const m=yield Sn(_,"POST","/v1/accounts:signInWithPhoneNumber",$t(_,p));if(m.temporaryProof)throw Un(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Bf={USER_NOT_FOUND:"user-not-found"};function Uc(){return(Uc=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithPhoneNumber",$t(_,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Bf)})).apply(this,arguments)}class Qs extends Fr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Qs({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Qs({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Uf(_,p){return Qo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Ys(_,p){return Vc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function jf(_,p){return Uc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:P}=p;return I||m||S||P?new Qs({verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:P}):null}}class Js{constructor(p){var m,I,S,P,X,Ce;const et=(0,B.zd)((0,B.pd)(p)),pt=null!==(m=et.apiKey)&&void 0!==m?m:null,Ht=null!==(I=et.oobCode)&&void 0!==I?I:null,In=function Bc(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=et.mode)&&void 0!==S?S:null);re(pt&&Ht&&In,"argument-error"),this.apiKey=pt,this.operation=In,this.code=Ht,this.continueUrl=null!==(P=et.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(X=et.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(Ce=et.tenantId)&&void 0!==Ce?Ce:null}static parseLink(p){const m=function jc(_){const p=(0,B.zd)((0,B.pd)(_)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(_)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||m||p||_}(p);try{return new Js(m)}catch{return null}}}let ja=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,I){return Yo._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const S=Js.parseLink(I);return re(S,"argument-error"),Yo._fromEmailAndCode(m,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class lr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Xs extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class es extends Xs{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return re("providerId"in m&&"signInMethod"in m,"argument-error"),$i._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return re(p.idToken||p.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return es.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return es.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:P,nonce:X,providerId:Ce}=p;if(!I&&!S&&!m&&!P||!Ce)return null;try{return new es(Ce)._credential({idToken:m,accessToken:I,nonce:X,pendingToken:P})}catch{return null}}}let Jo=(()=>{class _ extends Xs{constructor(){super("facebook.com")}static credential(m){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),$a=(()=>{class _ extends Xs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:S}=m;if(!I&&!S)return null;try{return _.credential(I,S)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Cu=(()=>{class _ extends Xs{constructor(){super("github.com")}static credential(m){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class eo extends Fr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return As(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,As(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,As(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S,pendingToken:P}=m;return I&&S&&P&&I===S?new eo(I,P):null}static _create(p,m){return new eo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends lr{constructor(p){re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Kr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Kr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=eo.fromJSON(p);return re(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return eo._create(I,m)}catch{return null}}}let Hi=(()=>{class _ extends Xs{constructor(){super("twitter.com")}static credential(m,I){return $i._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=m;if(!I||!S)return null;try{return _.credential(I,S)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Vr(_,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signUp",$t(_,p))})).apply(this,arguments)}class ci{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,S=!1){return(0,l.Z)(function*(){const P=yield _t._fromIdTokenResponse(p,I,S),X=to(I);return new ci({user:P,providerId:X,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,l.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const S=to(I);return new ci({user:p,providerId:S,_tokenResponse:I,operationType:m})})()}}function to(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function $f(_){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,l.Z)(function*(_){var p;const m=mt(_);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new ci({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Vr(m,{returnSecureToken:!0}),S=yield ci._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class xn extends B.ZR{constructor(p,m,I,S){var P;super(m.code,m.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,xn.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,S){return new xn(p,m,I,S)}}function $c(_,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?xn._fromErrorAndOperation(_,P,p,I):P})}function Nd(_){return new Set(_.map(({providerId:p})=>p).filter(p=>!!p))}function li(_,p){return dr.apply(this,arguments)}function dr(){return(dr=(0,l.Z)(function*(_,p){const m=(0,B.m9)(_);yield Ti(!0,m,p);const{providerUserInfo:I}=yield Ke(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=Nd(I||[]);return m.providerData=m.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ha(_,p){return xs.apply(this,arguments)}function xs(){return(xs=(0,l.Z)(function*(_,p,m=!1){const I=yield Dt(_,p._linkToIdToken(_.auth,yield _.getIdToken()),m);return ci._forOperation(_,"link",I)})).apply(this,arguments)}function Ti(_,p,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,l.Z)(function*(_,p,m){yield Cr(p);const S=!1===_?"provider-already-linked":"no-such-provider";re(Nd(p.providerData).has(m)===_,p.auth,S)})).apply(this,arguments)}function Au(_,p){return ts.apply(this,arguments)}function ts(){return(ts=(0,l.Z)(function*(_,p,m=!1){var I;const{auth:S}=_,P="reauthenticate";try{const X=yield Dt(_,$c(S,P,p,_),m);re(X.idToken,S,"internal-error");const Ce=lt(X.idToken);re(Ce,S,"internal-error");const{sub:et}=Ce;return re(_.uid===et,S,"user-mismatch"),ci._forOperation(_,P,X)}catch(X){throw"auth/user-not-found"===(null===(I=X)||void 0===I?void 0:I.code)&&Ze(S,"user-mismatch"),X}})).apply(this,arguments)}function Su(_,p){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,l.Z)(function*(_,p,m=!1){const I="signIn",S=yield $c(_,I,p),P=yield ci._fromIdTokenResponse(_,I,S);return m||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Xo(_,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,l.Z)(function*(_,p){return Su(mt(_),p)})).apply(this,arguments)}function At(_,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,l.Z)(function*(_,p){const m=(0,B.m9)(_);return yield Ti(!1,m,p.providerId),Ha(m,p)})).apply(this,arguments)}function Hf(_,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,l.Z)(function*(_,p){return Au((0,B.m9)(_),p)})).apply(this,arguments)}function Hc(_,p){return na.apply(this,arguments)}function na(){return(na=(0,l.Z)(function*(_,p){return Sn(_,"POST","/v1/accounts:signInWithCustomToken",$t(_,p))})).apply(this,arguments)}function Ms(_,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(_,p){const m=mt(_),I=yield Hc(m,{token:p,returnSecureToken:!0}),S=yield ci._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class no{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Me._fromServerResponse(p,m):Ze(p,"internal-error")}}class Me extends no{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Me(m)}}function zt(_,p,m){var I;re((null===(I=m.url)||void 0===I?void 0:I.length)>0,_,"invalid-continue-uri"),re(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(re(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(re(m.android.packageName.length>0,_,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Od(_,p,m){return ro.apply(this,arguments)}function ro(){return(ro=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_),S={requestType:"PASSWORD_RESET",email:p};m&&zt(I,S,m),yield Md(I,S)})).apply(this,arguments)}function Kn(_,p,m){return io.apply(this,arguments)}function io(){return(io=(0,l.Z)(function*(_,p,m){yield Wr((0,B.m9)(_),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Ga(_,p){return br.apply(this,arguments)}function br(){return(br=(0,l.Z)(function*(_,p){yield xd((0,B.m9)(_),{oobCode:p})})).apply(this,arguments)}function za(_,p){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(_,p){const m=(0,B.m9)(_),I=yield Wr(m,{oobCode:p}),S=I.requestType;switch(re(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(I.mfaInfo,m,"internal-error");default:re(I.email,m,"internal-error")}let P=null;return I.mfaInfo&&(P=no._fromServerResponse(mt(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function Pd(_,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(_,p){const{data:m}=yield za((0,B.m9)(_),p);return m.email})).apply(this,arguments)}function Gf(_,p,m){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,l.Z)(function*(_,p,m){const I=mt(_),S=yield Vr(I,{returnSecureToken:!0,email:p,password:m}),P=yield ci._fromIdTokenResponse(I,"signIn",S);return yield I._updateCurrentUser(P.user),P})).apply(this,arguments)}function Yn(_,p,m){return Xo((0,B.m9)(_),ja.credential(p,m))}function Ai(_,p,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_),S={requestType:"EMAIL_SIGNIN",email:p};re(m.handleCodeInApp,I,"argument-error"),m&&zt(I,S,m),yield qr(I,S)})).apply(this,arguments)}function oa(_,p){return"EMAIL_SIGNIN"===Js.parseLink(p)?.operation}function Gi(_,p,m){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_),S=ja.credentialWithLink(p,m||Ue());return re(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Xo(I,S)})).apply(this,arguments)}function xu(_,p){return zc.apply(this,arguments)}function zc(){return(zc=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:createAuthUri",$t(_,p))})).apply(this,arguments)}function kd(_,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,l.Z)(function*(_,p){const I={identifier:p,continueUri:Be()?Ue():"http://localhost"},{signinMethods:S}=yield xu((0,B.m9)(_),I);return S||[]})).apply(this,arguments)}function Mu(_,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(_,p){const m=(0,B.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};p&&zt(m.auth,S,p);const{email:P}=yield ji(m.auth,S);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function Ru(_,p,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:p};m&&zt(I.auth,P,m);const{email:X}=yield Iu(I.auth,P);X!==_.email&&(yield _.reload())})).apply(this,arguments)}function Wc(_,p){return ao.apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fd(_,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,l.Z)(function*(_,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,B.m9)(_),P={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},X=yield Dt(I,Wc(I.auth,P));I.displayName=X.displayName||null,I.photoURL=X.photoUrl||null;const Ce=I.providerData.find(({providerId:et})=>"password"===et);Ce&&(Ce.displayName=I.displayName,Ce.photoURL=I.photoURL),yield I._updateTokensIfNecessary(X)})).apply(this,arguments)}function Ld(_,p){return ns((0,B.m9)(_),p,null)}function qc(_,p){return ns((0,B.m9)(_),null,p)}function ns(_,p,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,l.Z)(function*(_,p,m){const{auth:I}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const X=yield Dt(_,Ba(I,P));yield _._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class bn{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class zi extends bn{constructor(p,m,I,S){super(p,m,I),this.username=S}}class Tn extends bn{constructor(p,m){super(p,"facebook.com",m)}}class Kc extends zi{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Nu extends bn{constructor(p,m){super(p,"google.com",m)}}class Vd extends zi{constructor(p,m,I){super(p,"twitter.com",m,I)}}function Ou(_){const{user:p,_tokenResponse:m}=_;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Zc(_){var p,m;if(!_)return null;const{providerId:I}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!I&&_?.idToken){const X=null===(m=null===(p=lt(_.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(X)return new bn(P,"anonymous"!==X&&"custom"!==X?X:null)}if(!I)return null;switch(I){case"facebook.com":return new Tn(P,S);case"github.com":return new Kc(P,S);case"google.com":return new Nu(P,S);case"twitter.com":return new Vd(P,S,_.screenName||null);case"custom":case"anonymous":return new bn(P,null);default:return new bn(P,I,S)}}(m)}function Ns(_){return(0,B.m9)(_).signOut()}class Qr{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new Qr("enroll",p,m)}static _fromMfaPendingCredential(p){return new Qr("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Qr._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Qr._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Fu{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=mt(p),S=m.customData._serverResponse,P=(S.mfaInfo||[]).map(Ce=>no._fromServerResponse(I,Ce));re(S.mfaPendingCredential,I,"internal-error");const X=Qr._fromMfaPendingCredential(S.mfaPendingCredential);return new Fu(X,P,function(){var Ce=(0,l.Z)(function*(et){const pt=yield et._process(I,X);delete S.mfaInfo,delete S.mfaPendingCredential;const Ht=Object.assign(Object.assign({},S),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(m.operationType){case"signIn":const In=yield ci._fromIdTokenResponse(I,m.operationType,Ht);return yield I._updateCurrentUser(In.user),In;case"reauthenticate":return re(m.user,I,"internal-error"),ci._forOperation(m.user,m.operationType,Ht);default:Ze(I,"internal-error")}});return function(et){return Ce.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,l.Z)(function*(){return m.signInResolver(p)})()}}function Jc(_,p){var m;const I=(0,B.m9)(_),S=p;return re(p.customData.operationType,I,"argument-error"),re(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Fu._fromError(I,S)}function Nn(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:start",$t(_,p))}class Ka{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>no._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new Ka(p)}getSession(){var p=this;return(0,l.Z)(function*(){return Qr._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,l.Z)(function*(){const S=p,P=yield I.getSession(),X=yield Dt(I.user,S._process(I.user.auth,P,m));return yield I.user._updateTokensIfNecessary(X),I.user.reload()})()}unenroll(p){var m=this;return(0,l.Z)(function*(){var I;const S="string"==typeof p?p:p.uid,P=yield m.user.getIdToken(),X=yield Dt(m.user,function Za(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(_,p))}(m.user.auth,{idToken:P,mfaEnrollmentId:S}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ce})=>Ce!==S),yield m.user._updateTokensIfNecessary(X);try{yield m.user.reload()}catch(Ce){if("auth/user-token-expired"!==(null===(I=Ce)||void 0===I?void 0:I.code))throw Ce}})()}}const Ud=new WeakMap;function Ya(_){const p=(0,B.m9)(_);return Ud.has(p)||Ud.set(p,Ka._fromUser(p)),Ud.get(p)}const Wi="__sak";class la{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Wi,"1"),this.storage.removeItem(Wi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qn=(()=>{class _ extends la{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Lu(){const _=(0,B.z$)();return L(_)||Le(_)}()&&function Vi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ln(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),P=this.localCache[I];S!==P&&m(I,P,S)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((Ce,et,pt)=>{this.notifyListeners(Ce,pt)});const S=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(S);if(m.newValue!==Ce)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!I)return}const P=()=>{const Ce=this.storage.getItem(S);!I&&this.localCache[S]===Ce||this.notifyListeners(S,Ce)},X=this.storage.getItem(S);!function xt(){return(0,B.w1)()&&10===document.documentMode}()||X===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var S=()=>super._set,P=this;return(0,l.Z)(function*(){yield S().call(P,m,I),P.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,S=this;return(0,l.Z)(function*(){const P=yield I().call(S,m);return S.localCache[m]=JSON.stringify(P),P})()}_remove(m){var I=()=>super._remove,S=this;return(0,l.Z)(function*(){yield I().call(S,m),delete S.localCache[m]})()}}return _.type="LOCAL",_})(),is=(()=>{class _ extends la{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return _.type="SESSION",_})();let ha=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(P=>P.isListeningto(m));if(I)return I;const S=new _(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,l.Z)(function*(){const S=m,{eventId:P,eventType:X,data:Ce}=S.data,et=I.handlersMap[X];if(!et?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:X});const pt=Array.from(et).map(function(){var In=(0,l.Z)(function*(yi){return yi(S.origin,Ce)});return function(yi){return In.apply(this,arguments)}}()),Ht=yield function Vu(_){return Promise.all(_.map(function(){var p=(0,l.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(pt);S.ports[0].postMessage({status:"done",eventId:P,eventType:X,response:Ht})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function lo(_="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return _+m}class $d{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var S=this;return(0,l.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let X,Ce;return new Promise((et,pt)=>{const Ht=lo("",20);P.port1.start();const In=setTimeout(()=>{pt(new Error("unsupported_event"))},I);Ce={messageChannel:P,onMessage(yi){const Jn=yi;if(Jn.data.eventId===Ht)switch(Jn.data.status){case"ack":clearTimeout(In),X=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),et(Jn.data.response);break;default:clearTimeout(In),clearTimeout(X),pt(new Error("invalid_response"))}}},S.handlers.add(Ce),P.port1.addEventListener("message",Ce.onMessage),S.target.postMessage({eventType:p,eventId:Ht,data:m},[P.port2])}).finally(()=>{Ce&&S.removeMessageHandler(Ce)})})()}}function On(){return window}function Ur(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function qi(){return(qi=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fa="firebaseLocalStorageDb",pa="firebaseLocalStorage",ho="fbase_key";class fo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function po(_,p){return _.transaction([pa],p?"readwrite":"readonly").objectStore(pa)}function Ja(){const _=indexedDB.open(fa,1);return new Promise((p,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const I=_.result;try{I.createObjectStore(pa,{keyPath:ho})}catch(S){m(S)}}),_.addEventListener("success",(0,l.Z)(function*(){const I=_.result;I.objectStoreNames.contains(pa)?p(I):(I.close(),yield function nl(){const _=indexedDB.deleteDatabase(fa);return new fo(_).toPromise()}(),p(yield Ja()))}))})}function ga(_,p,m){return Si.apply(this,arguments)}function Si(){return(Si=(0,l.Z)(function*(_,p,m){const I=po(_,!0).put({[ho]:p,value:m});return new fo(I).toPromise()})).apply(this,arguments)}function go(){return(go=(0,l.Z)(function*(_,p){const m=po(_,!1).get(p),I=yield new fo(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Xa(_,p){const m=po(_,!0).delete(p);return new fo(m).toPromise()}const yo=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,l.Z)(function*(){return m.db||(m.db=yield Ja()),m.db})()}_withRetries(m){var I=this;return(0,l.Z)(function*(){let S=0;for(;;)try{const P=yield I._openDb();return yield m(P)}catch(P){if(S++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,l.Z)(function*(){return Ur()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,l.Z)(function*(){m.receiver=ha._getInstance(function Qa(){return Ur()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,l.Z)(function*(S,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(S,P){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,l.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,l.Z)(function*(){var I,S;if(m.activeServiceWorker=yield function tl(){return qi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new $d(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(I=P[0])||void 0===I?void 0:I.fulfilled)&&(null===(S=P[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,l.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Uu(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ja();return yield ga(m,Wi,"1"),yield Xa(m,Wi),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,l.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var S=this;return(0,l.Z)(function*(){return S._withPendingWrite((0,l.Z)(function*(){return yield S._withRetries(P=>ga(P,m,I)),S.localCache[m]=I,S.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,l.Z)(function*(){const S=yield I._withRetries(P=>function Hd(_,p){return go.apply(this,arguments)}(P,m));return I.localCache[m]=S,S})()}_remove(m){var I=this;return(0,l.Z)(function*(){return I._withPendingWrite((0,l.Z)(function*(){return yield I._withRetries(S=>Xa(S,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,l.Z)(function*(){const I=yield m._withRetries(X=>{const Ce=po(X,!1).getAll();return new fo(Ce).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:X,value:Ce}of I)P.add(X),JSON.stringify(m.localCache[X])!==JSON.stringify(Ce)&&(m.notifyListeners(X,Ce),S.push(X));for(const X of Object.keys(m.localCache))m.localCache[X]&&!P.has(X)&&(m.notifyListeners(X,null),S.push(X));return S})()}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Gd(_,p){return Pt(_,"POST","/v2/accounts/mfaSignIn:start",$t(_,p))}function pr(){return(pr=(0,l.Z)(function*(_){return(yield Pt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ps(_){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",_),I.onload=p,I.onerror=S=>{const P=ke("internal-error");P.customData=S,m(P)},I.type="text/javascript",I.charset="UTF-8",function _o(){var _,p;return null!==(p=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==p?p:document}().appendChild(I)})}function wo(_){return`__${_}${Math.floor(1e6*Math.random())}`}const xi=1e12;class rl{constructor(p){this.auth=p,this.counter=xi,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new wn(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||xi;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||xi))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,l.Z)(function*(){var I;return null===(I=m._widgets.get(p||xi))||void 0===I||I.execute(),""})()}}class wn{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;re(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zf(_){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<_;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zd=wo("rcb"),h0=new We(3e4,6e4);class Im{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=On().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return re(function Wd(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(On().grecaptcha):new Promise((I,S)=>{const P=On().setTimeout(()=>{S(ke(p,"network-request-failed"))},h0.get());On()[zd]=()=>{On().clearTimeout(P),delete On()[zd];const Ce=On().grecaptcha;if(!Ce)return void S(ke(p,"internal-error"));const et=Ce.render;Ce.render=(pt,Ht)=>{const In=et(pt,Ht);return this.counter++,In},this.hostLanguage=m,I(Ce)},Ps(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:zd,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),S(ke(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=On().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class f0{load(p){return(0,l.Z)(function*(){return new rl(p)})()}clearedOneInstance(){}}const Eo="recaptcha",Em={theme:"light",type:"image"};class Wf{constructor(p,m=Object.assign({},Em),I){this.parameters=m,this.type=Eo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mt(I),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;re(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new f0:new Im,this.validateStartingState()}verify(){var p=this;return(0,l.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(P=>{const X=Ce=>{!Ce||(p.tokenChangeListeners.delete(X),P(Ce))};p.tokenChangeListeners.add(X),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=On()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,l.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,l.Z)(function*(){re(Be()&&!Ur(),p.auth,"internal-error"),yield function ar(){let _=null;return new Promise(p=>{"complete"!==document.readyState?(_=()=>p(),window.addEventListener("load",_)):p()}).catch(p=>{throw _&&window.removeEventListener("load",_),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function eu(_){return pr.apply(this,arguments)}(p.auth);re(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Qs._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function hn(_,p,m){return st.apply(this,arguments)}function st(){return(st=(0,l.Z)(function*(_,p,m){const I=mt(_),S=yield Pn(I,p,(0,B.m9)(m));return new Mi(S,P=>Xo(I,P))})).apply(this,arguments)}function Jr(_,p,m){return an.apply(this,arguments)}function an(){return(an=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_);yield Ti(!1,I,"phone");const S=yield Pn(I.auth,p,(0,B.m9)(m));return new Mi(S,P=>At(I,P))})).apply(this,arguments)}function hi(_,p,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_),S=yield Pn(I.auth,p,(0,B.m9)(m));return new Mi(S,P=>Hf(I,P))})).apply(this,arguments)}function Pn(_,p,m){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,l.Z)(function*(_,p,m){var I;const S=yield m.verify();try{let P;if(re("string"==typeof S,_,"argument-error"),re(m.type===Eo,_,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const X=P.session;if("phoneNumber"in P)return re("enroll"===X.type,_,"internal-error"),(yield Nn(_,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{re("signin"===X.type,_,"internal-error");const Ce=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return re(Ce,_,"missing-multi-factor-info"),(yield Gd(_,{mfaPendingCredential:X.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield Vf(_,{phoneNumber:P.phoneNumber,recaptchaToken:S});return X}}finally{m._reset()}})).apply(this,arguments)}function Br(_,p){return yt.apply(this,arguments)}function yt(){return(yt=(0,l.Z)(function*(_,p){yield Ha((0,B.m9)(_),p)})).apply(this,arguments)}let il=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=mt(m)}verifyPhoneNumber(m,I){return Pn(this.auth,m,(0,B.m9)(I))}static credential(m,I){return Qs._fromVerification(m,I)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:S}=m;return I&&S?Qs._fromTokenResponse(I,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function os(_,p){return p?J(p):(re(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ri extends Fr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return As(p,this._buildIdpRequest())}_linkToIdToken(p,m){return As(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return As(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function sl(_){return Su(_.auth,new Ri(_),_.bypassAuthState)}function Tr(_){const{auth:p,user:m}=_;return re(m,p,"internal-error"),Au(m,new Ri(_),_.bypassAuthState)}function $u(_){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,l.Z)(function*(_){const{auth:p,user:m}=_;return re(m,p,"internal-error"),Ha(m,new Ri(_),_.bypassAuthState)})).apply(this,arguments)}class Hu{constructor(p,m,I,S,P=!1){this.auth=p,this.resolver=I,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,l.Z)(function*(I,S){p.pendingPromise={resolve:I,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(I,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,l.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:P,tenantId:X,error:Ce,type:et}=p;if(Ce)return void m.reject(Ce);const pt={auth:m.auth,requestUri:I,sessionId:S,tenantId:X||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(et)(pt))}catch(Ht){m.reject(Ht)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return sl;case"linkViaPopup":case"linkViaRedirect":return $u;case"reauthViaPopup":case"reauthViaRedirect":return Tr;default:Ze(this.auth,"internal-error")}}resolve(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ma=new We(2e3,1e4);function Do(_,p,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,l.Z)(function*(_,p,m){const I=mt(_);we(_,p,lr);const S=os(I,m);return new va(I,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function ol(_,p,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_);we(I.auth,p,lr);const S=os(I.auth,m);return new va(I.auth,"reauthViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}function qf(_,p,m){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_);we(I.auth,p,lr);const S=os(I.auth,m);return new va(I.auth,"linkViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}let va=(()=>{class _ extends Hu{constructor(m,I,S,P,X){super(m,I,P,X),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,l.Z)(function*(){const I=yield m.execute();return re(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,l.Z)(function*(){ye(1===m.filter.length,"Popup operations only handle one event");const I=lo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(ke(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ma.get())};m()}}return _.currentPopupAction=null,_})();const tu=new Map;class Ar extends Hu{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,l.Z)(function*(){let I=tu.get(m.auth._key());if(!I){try{const P=(yield function An(_,p){return as.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(P)}catch(S){I=()=>Promise.reject(S)}tu.set(m.auth._key(),I)}return m.bypassAuthState||tu.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,l.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const S=yield I.auth._redirectUserForId(p.eventId);if(S)return I.user=S,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function as(){return(as=(0,l.Z)(function*(_,p){const m=ks(p),I=Ia(_);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(m));return yield I._remove(m),S})).apply(this,arguments)}function wa(_,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,l.Z)(function*(_,p){return Ia(_)._set(ks(p),"true")})).apply(this,arguments)}function al(){tu.clear()}function pi(_,p){tu.set(_._key(),p)}function Ia(_){return J(_._redirectPersistence)}function ks(_){return j("pendingRedirect",_.config.apiKey,_.name)}function zu(_,p,m){return function Hn(_,p,m){return Wu.apply(this,arguments)}(_,p,m)}function Wu(){return(Wu=(0,l.Z)(function*(_,p,m){const I=mt(_);we(_,p,lr);const S=os(I,m);return yield wa(S,I),S._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function qd(_,p,m){return function D(_,p,m){return b.apply(this,arguments)}(_,p,m)}function b(){return(b=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_);we(I.auth,p,lr);const S=os(I.auth,m);yield wa(S,I.auth);const P=yield Mt(I);return S._openRedirect(I.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function x(_,p,m){return function V(_,p,m){return Y.apply(this,arguments)}(_,p,m)}function Y(){return(Y=(0,l.Z)(function*(_,p,m){const I=(0,B.m9)(_);we(I.auth,p,lr);const S=os(I.auth,m);yield Ti(!1,I,p.providerId),yield wa(S,I.auth);const P=yield Mt(I);return S._openRedirect(I.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function ue(_,p){return Te.apply(this,arguments)}function Te(){return(Te=(0,l.Z)(function*(_,p){return yield mt(_)._initializationPromise,ze(_,p,!1)})).apply(this,arguments)}function ze(_,p){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(_,p,m=!1){const I=mt(_),S=os(I,p),X=yield new Ar(I,S,m).execute();return X&&!m&&(delete X.user._redirectEventId,yield I._persistUserIfCurrent(X.user),yield I._setRedirectUser(null,p)),X})).apply(this,arguments)}function Mt(_){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,l.Z)(function*(_){const p=lo(`${_.uid}:::`);return _._redirectEventId=p,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),p})).apply(this,arguments)}class kn{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ea(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fs(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Fs(p)){const S=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(ke(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gr(p))}saveEventToCache(p){this.cachedEventUids.add(gr(p)),this.lastProcessedEventTime=Date.now()}}function gr(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(p=>p).join("-")}function Fs({type:_,error:p}){return"unknown"===_&&"auth/no-auth-event"===p?.code}function gi(_){return Co.apply(this,arguments)}function Co(){return(Co=(0,l.Z)(function*(_,p={}){return Pt(_,"GET","/v1/projects",p)})).apply(this,arguments)}const qu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nu=/^https?/;function Vs(){return(Vs=(0,l.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:p}=yield gi(_);for(const m of p)try{if(Zd(m))return}catch{}Ze(_,"unauthorized-domain")})).apply(this,arguments)}function Zd(_){const p=Ue(),{protocol:m,hostname:I}=new URL(p);if(_.startsWith("chrome-extension://")){const X=new URL(_);return""===X.hostname&&""===I?"chrome-extension:"===m&&_.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&X.hostname===I}if(!nu.test(m))return!1;if(qu.test(_))return I===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const Dm=new We(3e4,6e4);function Zf(){const _=On().___jsl;if(_?.H)for(const p of Object.keys(_.H))if(_.H[p].r=_.H[p].r||[],_.H[p].L=_.H[p].L||[],_.H[p].r=[..._.H[p].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let bo=null;function Kf(_){return bo=bo||function Cm(_){return new Promise((p,m)=>{var I,S,P;function X(){Zf(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Zf(),m(ke(_,"network-request-failed"))},timeout:Dm.get()})}if(null!==(S=null===(I=On().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(P=On().gapi)||void 0===P||!P.load){const Ce=wo("iframefcb");return On()[Ce]=()=>{gapi.load?X():m(ke(_,"network-request-failed"))},Ps(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(et=>m(et))}X()}}).catch(p=>{throw bo=null,p})}(_),bo}const ul=new We(5e3,15e3),Kd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yd(_){const p=_.config;re(p.authDomain,_,"auth-domain-config-required");const m=p.emulator?un(p,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:_.name,v:O.SDK_VERSION},S=bm.get(_.config.apiHost);S&&(I.eid=S);const P=_._getFrameworks();return P.length&&(I.fw=P.join(",")),`${m}?${(0,B.xO)(I).slice(1)}`}function us(){return us=(0,l.Z)(function*(_){const p=yield Kf(_),m=On().gapi;return re(m,_,"internal-error"),p.open({where:document.body,url:Yd(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kd,dontclear:!0},I=>new Promise(function(){var S=(0,l.Z)(function*(P,X){yield I.restyle({setHideOnLeave:!1});const Ce=ke(_,"network-request-failed"),et=On().setTimeout(()=>{X(Ce)},ul.get());function pt(){On().clearTimeout(et),P(I)}I.ping(pt).then(pt,()=>{X(Ce)})});return function(P,X){return S.apply(this,arguments)}}()))}),us.apply(this,arguments)}const mi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sm{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ur(_,p,m,I,S,P){re(_.config.authDomain,_,"auth-domain-config-required"),re(_.config.apiKey,_,"invalid-api-key");const X={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:I,v:O.SDK_VERSION,eventId:S};if(p instanceof lr){p.setDefaultLanguage(_.languageCode),X.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[et,pt]of Object.entries(P||{}))X[et]=pt}if(p instanceof Xs){const et=p.getScopes().filter(pt=>""!==pt);et.length>0&&(X.scopes=et.join(","))}_.tenantId&&(X.tid=_.tenantId);const Ce=X;for(const et of Object.keys(Ce))void 0===Ce[et]&&delete Ce[et];return`${function ti({config:_}){return _.emulator?un(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,B.xO)(Ce).slice(1)}`}const eh="webStorageSupport",th=class g0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=is,this._completeRedirectFn=ze,this._overrideRedirectResult=pi}_openPopup(p,m,I,S){var P=this;return(0,l.Z)(function*(){var X;ye(null===(X=P.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const Ce=ur(p,m,I,Ue(),S);return function To(_,p,m,I=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),X=Math.max((window.screen.availWidth-I)/2,0).toString();let Ce="";const et=Object.assign(Object.assign({},mi),{width:I.toString(),height:S.toString(),top:P,left:X}),pt=(0,B.z$)().toLowerCase();m&&(Ce=ee(pt)?"_blank":m),R(pt)&&(p=p||"http://localhost",et.scrollbars="yes");const Ht=Object.entries(et).reduce((yi,[Jn,ls])=>`${yi}${Jn}=${ls},`,"");if(function cn(_=(0,B.z$)()){var p;return Le(_)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(pt)&&"_self"!==Ce)return function Jd(_,p){const m=document.createElement("a");m.href=_,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",Ce),new Sm(null);const In=window.open(p||"",Ce,Ht);re(In,_,"popup-blocked");try{In.focus()}catch{}return new Sm(In)}(p,Ce,lo())})()}_openRedirect(p,m,I,S){var P=this;return(0,l.Z)(function*(){return yield P._originValidation(p),function el(_){On().location.href=_}(ur(p,m,I,Ue(),S)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:P}=this.eventManagers[m];return S?Promise.resolve(S):(ye(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,l.Z)(function*(){const I=yield function Qf(_){return us.apply(this,arguments)}(p),S=new kn(p);return I.register("authEvent",P=>(re(P?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=I,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(eh,{type:eh},S=>{var P;const X=null===(P=S?.[0])||void 0===P?void 0:P[eh];void 0!==X&&m(!!X),Ze(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ls(_){return Vs.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return ln()||L()||Le()}};class cl extends class Jf{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return ae("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new cl(p)}_finalizeEnroll(p,m,I){return function qa(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:finalize",$t(_,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function vo(_,p){return Pt(_,"POST","/v2/accounts/mfaSignIn:finalize",$t(_,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cs=(()=>{class _{constructor(){}static assertion(m){return cl._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Ao="@firebase/auth",nh="0.20.10";class Xf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,l.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{var S;p((null===(S=I)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const np=(0,B.Pz)("authIdTokenMaxAge")||300;let dl=null;const rp=_=>function(){var p=(0,l.Z)(function*(m){const I=m&&(yield m.getIdTokenResult()),S=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(S&&S>np)return;const P=I?.token;dl!==P&&(dl=P,yield fetch(_,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function xm(_=(0,O.getApp)()){const p=(0,O._getProvider)(_,"auth");if(p.isInitialized())return p.getImmediate();const m=function he(_,p){const m=(0,O._getProvider)(_,"auth");if(m.isInitialized()){const S=m.getImmediate(),P=m.getOptions();if((0,B.vZ)(P,p??{}))return S;Ze(S,"already-initialized")}return m.initialize({options:p})}(_,{popupRedirectResolver:th,persistence:[yo,Qn,is]}),I=(0,B.Pz)("authTokenSyncURL");if(I){const P=rp(I);(function Wa(_,p,m){(0,B.m9)(_).beforeAuthStateChanged(p,m)})(m,P,()=>P(m.currentUser)),function ku(_,p,m,I){(0,B.m9)(_).onIdTokenChanged(p,m,I)}(m,X=>P(X))}const S=(0,B.q4)("auth");return S&&Ds(m,`http://${S}`),m}!function ll(_){(0,O._registerComponent)(new ge.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:P,authDomain:X}=I.options;return((Ce,et)=>{re(P&&!P.includes(":"),"invalid-api-key",{appName:Ce.name}),re(!X?.includes(":"),"argument-error",{appName:Ce.name});const pt={apiKey:P,authDomain:X,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_n(_)},Ht=new Zs(Ce,et,pt);return function se(_,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(J);p?.errorMap&&_._updateErrorMap(p.errorMap),_._initializeWithPersistence(I,p?.popupRedirectResolver)}(Ht,m),Ht})(I,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ge.wA("auth-internal",p=>{const m=mt(p.getProvider("auth").getImmediate());return new Xf(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Ao,nh,function ep(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,O.registerVersion)(Ao,nh,"esm2017")}("Browser")},2090:(ct,Se,k)=>{k.d(Se,{$s:()=>Je,BH:()=>Ut,G6:()=>we,L:()=>le,LL:()=>Xt,P0:()=>Be,Pz:()=>tn,Sg:()=>We,UG:()=>Ee,US:()=>ge,ZB:()=>G,ZR:()=>mn,aH:()=>gt,b$:()=>fe,eu:()=>re,hl:()=>He,jU:()=>tt,m9:()=>Zt,ne:()=>vn,pd:()=>ws,q4:()=>Ue,r3:()=>Dr,ru:()=>_e,tV:()=>me,uI:()=>Ne,vZ:()=>Ke,w1:()=>Ze,xO:()=>gn,xb:()=>ui,z$:()=>$e,zI:()=>ae,zd:()=>or});const ie=function(z){const j=[];let q=0;for(let U=0;U<z.length;U++){let R=z.charCodeAt(U);R<128?j[q++]=R:R<2048?(j[q++]=R>>6|192,j[q++]=63&R|128):55296==(64512&R)&&U+1<z.length&&56320==(64512&z.charCodeAt(U+1))?(R=65536+((1023&R)<<10)+(1023&z.charCodeAt(++U)),j[q++]=R>>18|240,j[q++]=R>>12&63|128,j[q++]=R>>6&63|128,j[q++]=63&R|128):(j[q++]=R>>12|224,j[q++]=R>>6&63|128,j[q++]=63&R|128)}return j},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,j){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let R=0;R<z.length;R+=3){const L=z[R],ee=R+1<z.length,Pe=ee?z[R+1]:0,nt=R+2<z.length,rt=nt?z[R+2]:0;let Ct=(15&Pe)<<2|rt>>6,cn=63&rt;nt||(cn=64,ee||(Ct=64)),U.push(q[L>>2],q[(3&L)<<4|Pe>>4],q[Ct],q[cn])}return U.join("")},encodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(z):this.encodeByteArray(ie(z),j)},decodeString(z,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(z):function(z){const j=[];let q=0,U=0;for(;q<z.length;){const R=z[q++];if(R<128)j[U++]=String.fromCharCode(R);else if(R>191&&R<224){const L=z[q++];j[U++]=String.fromCharCode((31&R)<<6|63&L)}else if(R>239&&R<365){const nt=((7&R)<<18|(63&z[q++])<<12|(63&z[q++])<<6|63&z[q++])-65536;j[U++]=String.fromCharCode(55296+(nt>>10)),j[U++]=String.fromCharCode(56320+(1023&nt))}else{const L=z[q++],ee=z[q++];j[U++]=String.fromCharCode((15&R)<<12|(63&L)<<6|63&ee)}}return j.join("")}(this.decodeStringToByteArray(z,j))},decodeStringToByteArray(z,j){this.init_();const q=j?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let R=0;R<z.length;){const L=q[z.charAt(R++)],Pe=R<z.length?q[z.charAt(R)]:0;++R;const rt=R<z.length?q[z.charAt(R)]:64;++R;const Le=R<z.length?q[z.charAt(R)]:64;if(++R,null==L||null==Pe||null==rt||null==Le)throw Error();U.push(L<<2|Pe>>4),64!==rt&&(U.push(Pe<<4&240|rt>>2),64!==Le&&U.push(rt<<6&192|Le))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},le=function(z){return function(z){const j=ie(z);return ge.encodeByteArray(j,!0)}(z).replace(/\./g,"")},me=function(z){try{return ge.decodeString(z,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G(z,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return j}for(const q in j)!j.hasOwnProperty(q)||!Q(q)||(z[q]=G(z[q],j[q]));return z}function Q(z){return"__proto__"!==z}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function _e(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const z=$e();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){return"object"==typeof indexedDB}function re(){return new Promise((z,j)=>{try{let q=!0;const U="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(U);R.onsuccess=()=>{R.result.close(),q||self.indexedDB.deleteDatabase(U),z(!0)},R.onupgradeneeded=()=>{q=!1},R.onerror=()=>{var L;j((null===(L=R.error)||void 0===L?void 0:L.message)||"")}}catch(q){j(q)}})}function ae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const se=()=>{try{return function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=z&&me(z[1]);return j&&JSON.parse(j)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},Ue=z=>{var j,q;return null===(q=null===(j=se())||void 0===j?void 0:j.emulatorHosts)||void 0===q?void 0:q[z]},Be=z=>{const j=Ue(z);if(!j)return;const q=j.lastIndexOf(":");if(q<=0||q+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const U=parseInt(j.substring(q+1),10);return"["===j[0]?[j.substring(1,q-1),U]:[j.substring(0,q),U]},gt=()=>{var z;return null===(z=se())||void 0===z?void 0:z.config},tn=z=>{var j;return null===(j=se())||void 0===j?void 0:j[`_${z}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,q)=>{this.resolve=j,this.reject=q})}wrapCallback(j){return(q,U)=>{q?this.reject(q):this.resolve(U),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(q):j(q,U))}}}function We(z,j){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=j||"demo-project",R=z.iat||0,L=z.sub||z.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ee=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:R,exp:R+3600,auth_time:R,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},z);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ee)),""].join(".")}class mn extends Error{constructor(j,q,U){super(q),this.code=j,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor(j,q,U){this.service=j,this.serviceName=q,this.errors=U}create(j,...q){const U=q[0]||{},R=`${this.service}/${j}`,L=this.errors[j],ee=L?function en(z,j){return z.replace($t,(q,U)=>{const R=j[U];return null!=R?String(R):`<${U}?>`})}(L,U):"Error";return new mn(R,`${this.serviceName}: ${ee} (${R}).`,U)}}const $t=/\{\$([^}]+)}/g;function Dr(z,j){return Object.prototype.hasOwnProperty.call(z,j)}function ui(z){for(const j in z)if(Object.prototype.hasOwnProperty.call(z,j))return!1;return!0}function Ke(z,j){if(z===j)return!0;const q=Object.keys(z),U=Object.keys(j);for(const R of q){if(!U.includes(R))return!1;const L=z[R],ee=j[R];if(Wn(L)&&Wn(ee)){if(!Ke(L,ee))return!1}else if(L!==ee)return!1}for(const R of U)if(!q.includes(R))return!1;return!0}function Wn(z){return null!==z&&"object"==typeof z}function gn(z){const j=[];for(const[q,U]of Object.entries(z))Array.isArray(U)?U.forEach(R=>{j.push(encodeURIComponent(q)+"="+encodeURIComponent(R))}):j.push(encodeURIComponent(q)+"="+encodeURIComponent(U));return j.length?"&"+j.join("&"):""}function or(z){const j={};return z.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[R,L]=U.split("=");j[decodeURIComponent(R)]=decodeURIComponent(L)}}),j}function ws(z){const j=z.indexOf("?");if(!j)return"";const q=z.indexOf("#",j);return z.substring(j,q>0?q:void 0)}function vn(z,j){const q=new pn(z,j);return q.subscribe.bind(q)}class pn{constructor(j,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{j(this)}).catch(U=>{this.error(U)})}next(j){this.forEachObserver(q=>{q.next(j)})}error(j){this.forEachObserver(q=>{q.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,q,U){let R;if(void 0===j&&void 0===q&&void 0===U)throw new Error("Missing Observer.");R=function dt(z,j){if("object"!=typeof z||null===z)return!1;for(const q of j)if(q in z&&"function"==typeof z[q])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:q,complete:U},void 0===R.next&&(R.next=Dt),void 0===R.error&&(R.error=Dt),void 0===R.complete&&(R.complete=Dt);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),L}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,j)}sendOne(j,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{q(this.observers[j])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dt(){}function Je(z,j=1e3,q=2){const U=j*Math.pow(q,z),R=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+R)}function Zt(z){return z&&z._delegate?z._delegate:z}},5867:(ct,Se,k)=>{k.d(Se,{C6:()=>l.getApps,KN:()=>l.registerVersion,Mq:()=>l.getApp,ZF:()=>l.initializeApp});var l=k(9681);(0,l.registerVersion)("firebase","9.12.1","app")},127:(ct,Se,k)=>{k.d(Se,{Z:()=>l.Z});var l=k(3942);l.Z.registerVersion("firebase","9.12.1","app-compat")},5881:(ct,Se,k)=>{k.r(Se);var l=k(5861),B=k(3942),O=k(7573),ie=k(2090),de=(k(9681),k(1877),k(4859));function le(){return window}function G(){return(G=(0,l.Z)(function*(U,R,L){var ee;const{BuildInfo:Pe}=le();(0,O.aq)(R.sessionId,"AuthEvent did not contain a session ID");const nt=yield fe(R.sessionId),rt={};return(0,O.ar)()?rt.ibi=Pe.packageName:(0,O.as)()?rt.apn=Pe.packageName:(0,O.at)(U,"operation-not-supported-in-this-environment"),Pe.displayName&&(rt.appDisplayName=Pe.displayName),rt.sessionId=nt,(0,O.au)(U,L,R.type,void 0,null!==(ee=R.eventId)&&void 0!==ee?ee:void 0,rt)})).apply(this,arguments)}function $e(){return($e=(0,l.Z)(function*(U){const{BuildInfo:R}=le(),L={};(0,O.ar)()?L.iosBundleId=R.packageName:(0,O.as)()?L.androidPackageName=R.packageName:(0,O.at)(U,"operation-not-supported-in-this-environment"),yield(0,O.av)(U,L)})).apply(this,arguments)}function tt(){return(tt=(0,l.Z)(function*(U,R,L){const{cordova:ee}=le();let Pe=()=>{};try{yield new Promise((nt,rt)=>{let be=null;function Le(){var xt;nt();const ln=null===(xt=ee.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof ln&&ln(),"function"==typeof L?.close&&L.close()}function Ct(){be||(be=window.setTimeout(()=>{rt((0,O.aw)(U,"redirect-cancelled-by-user"))},2e3))}function cn(){"visible"===document?.visibilityState&&Ct()}R.addPassiveListener(Le),document.addEventListener("resume",Ct,!1),(0,O.as)()&&document.addEventListener("visibilitychange",cn,!1),Pe=()=>{R.removePassiveListener(Le),document.removeEventListener("resume",Ct,!1),document.removeEventListener("visibilitychange",cn,!1),be&&window.clearTimeout(be)}})}finally{Pe()}})).apply(this,arguments)}function fe(U){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,l.Z)(function*(U){const R=Ze(U),L=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(L)).map(Pe=>Pe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(U){if((0,O.aq)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const R=new ArrayBuffer(U.length),L=new Uint8Array(R);for(let ee=0;ee<U.length;ee++)L[ee]=U.charCodeAt(ee);return L}class Re extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(R)),super.onEvent(R)}initialized(){var R=this;return(0,l.Z)(function*(){yield R.initPromise})()}}function re(U){return ae.apply(this,arguments)}function ae(){return(ae=(0,l.Z)(function*(U){const R=yield J()._get(he(U));return R&&(yield J()._remove(he(U))),R})).apply(this,arguments)}function K(){const U=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const ee=Math.floor(Math.random()*R.length);U.push(R.charAt(ee))}return U.join("")}function J(){return(0,O.ay)(O.b)}function he(U){return(0,O.az)("authEvent",U.config.apiKey,U.name)}function Be(U){if(!U?.includes("?"))return{};const[R,...L]=U.split("?");return(0,ie.zd)(L.join("?"))}function We(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function $t(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function hr(U=(0,ie.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()&&"capacitor:"!==$t()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fi(){try{const U=self.localStorage,R=O.aI();if(U)return U.setItem(R,"1"),U.removeItem(R),!function ki(U=(0,ie.z$)()){return function Er(){return(0,ie.w1)()&&11===document?.documentMode}()||function Sn(U=(0,ie.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,ie.hl)()}catch{return Dr()&&(0,ie.hl)()}return!1}function Dr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function Pt(){return"http:"===$t()||"https:"===$t()}()||(0,ie.ru)()||hr())&&!function bi(){return(0,ie.b$)()||(0,ie.UG)()}()&&Fi()&&!Dr()}function ui(){return hr()&&typeof document<"u"}function Ke(){return(Ke=(0,l.Z)(function*(){return!!ui()&&new Promise(U=>{const R=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),U(!0)})})})).apply(this,arguments)}const Bn={LOCAL:"local",NONE:"none",SESSION:"session"},gn=O.ax,or="persistence";function yn(U){return vn.apply(this,arguments)}function vn(){return(vn=(0,l.Z)(function*(U){yield U._initializationPromise;const R=lt(),L=O.az(or,U.config.apiKey,U.name);R&&R.setItem(L,U._getPersistence())})).apply(this,arguments)}function lt(){var U;try{return(null===(U=function Wn(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const dt=O.ax;class Dt{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class tn{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var L=this;return(0,l.Z)(function*(){const ee=R._key();let Pe=L.eventManagers.get(ee);return Pe||(Pe=new Re(R),L.eventManagers.set(ee,Pe),L.attachCallbackListeners(R,Pe)),Pe})()}_openPopup(R){(0,O.at)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,L,ee,Pe){var nt=this;return(0,l.Z)(function*(){!function _e(U){var R,L,ee,Pe,nt,rt,be,Le,Ct,cn;const xt=le();(0,O.ax)("function"==typeof(null===(R=xt?.universalLinks)||void 0===R?void 0:R.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(L=xt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(nt=null===(Pe=null===(ee=xt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Pe?void 0:Pe.browsertab)||void 0===nt?void 0:nt.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Le=null===(be=null===(rt=xt?.cordova)||void 0===rt?void 0:rt.plugins)||void 0===be?void 0:be.browsertab)||void 0===Le?void 0:Le.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(cn=null===(Ct=xt?.cordova)||void 0===Ct?void 0:Ct.InAppBrowser)||void 0===cn?void 0:cn.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const rt=yield nt._initialize(R);yield rt.initialized(),rt.resetRedirect(),(0,O.aD)(),yield nt._originValidation(R);const be=function we(U,R,L=null){return{type:R,eventId:L,urlResponse:null,sessionId:K(),postBody:null,tenantId:U.tenantId,error:(0,O.aw)(U,"no-auth-event")}}(R,ee,Pe);yield function He(U,R){return J()._set(he(U),R)}(R,be);const Le=yield function W(U,R,L){return G.apply(this,arguments)}(R,be,L),Ct=yield function Ne(U){const{cordova:R}=le();return new Promise(L=>{R.plugins.browsertab.isAvailable(ee=>{let Pe=null;ee?R.plugins.browsertab.openUrl(U):Pe=R.InAppBrowser.open(U,(0,O.ap)()?"_blank":"_system","location=yes"),L(Pe)})})}(Le);return function Ee(U,R,L){return tt.apply(this,arguments)}(R,rt,Ct)})()}_isIframeWebStorageSupported(R,L){throw new Error("Method not implemented.")}_originValidation(R){const L=R._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function Q(U){return $e.apply(this,arguments)}(R)),this.originValidationPromises[L]}attachCallbackListeners(R,L){const{universalLinks:ee,handleOpenURL:Pe,BuildInfo:nt}=le(),rt=setTimeout((0,l.Z)(function*(){yield re(R),L.onEvent(We())}),500),be=function(){var cn=(0,l.Z)(function*(xt){clearTimeout(rt);const ln=yield re(R);let Vi=null;ln&&xt?.url&&(Vi=function ye(U,R){var L,ee;const Pe=function Ue(U){const R=Be(U),L=R.link?decodeURIComponent(R.link):void 0,ee=Be(L).link,Pe=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return Be(Pe).link||Pe||ee||L||U}(R);if(Pe.includes("/__/auth/callback")){const nt=Be(Pe),rt=nt.firebaseError?function se(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(nt.firebaseError)):null,be=null===(ee=null===(L=rt?.code)||void 0===L?void 0:L.split("auth/"))||void 0===ee?void 0:ee[1],Le=be?(0,O.aw)(be):null;return Le?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Pe,postBody:null}}return null}(ln,xt.url)),L.onEvent(Vi||We())});return function(ln){return cn.apply(this,arguments)}}();typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,be);const Le=Pe,Ct=`${nt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var cn=(0,l.Z)(function*(xt){if(xt.toLowerCase().startsWith(Ct)&&be({url:xt}),"function"==typeof Le)try{Le(xt)}catch(ln){console.error(ln)}});return function(xt){return cn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var L=this;return(0,l.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,L,ee,Pe){var nt=this;return(0,l.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openPopup(R,L,ee,Pe)})()}_openRedirect(R,L,ee,Pe){var nt=this;return(0,l.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openRedirect(R,L,ee,Pe)})()}_isIframeWebStorageSupported(R,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,L)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return ui()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,l.Z)(function*(){if(R.underlyingResolver)return;const L=yield function Li(){return Ke.apply(this,arguments)}();R.underlyingResolver=L?R.cordovaResolver:R.browserResolver})()}}function kr(U){return U.unwrap()}function fr(U){return Cr(U)}function Cr(U){const{_tokenResponse:R}=U instanceof ie.ZR?U.customData:U;if(!R)return null;if(!(U instanceof ie.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return O.P.credentialFromResult(U);const L=R.providerId;if(!L||L===O.o.PASSWORD)return null;let ee;switch(L){case O.o.GOOGLE:ee=O.Q;break;case O.o.FACEBOOK:ee=O.N;break;case O.o.GITHUB:ee=O.T;break;case O.o.TWITTER:ee=O.W;break;default:const{oauthIdToken:Pe,oauthAccessToken:nt,oauthTokenSecret:rt,pendingToken:be,nonce:Le}=R;return nt||rt||Pe||be?be?L.startsWith("saml.")?O.aL._create(L,be):O.J._fromParams({providerId:L,signInMethod:L,pendingToken:be,idToken:Pe,accessToken:nt}):new O.U(L).credential({idToken:Pe,accessToken:nt,rawNonce:Le}):null}return U instanceof ie.ZR?ee.credentialFromError(U):ee.credentialFromResult(U)}function Ot(U,R){return R.catch(L=>{throw L instanceof ie.ZR&&function Et(U,R){var L,ee;const Pe=null===(L=R.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ee=R)||void 0===ee?void 0:ee.code))R.resolver=new rr(U,O.an(U,R));else if(Pe){const nt=Cr(R),rt=R;nt&&(rt.credential=nt,rt.tenantId=Pe.tenantId||void 0,rt.email=Pe.email||void 0,rt.phoneNumber=Pe.phoneNumber||void 0)}}(U,L),L}).then(L=>{const Pe=L.user;return{operationType:L.operationType,credential:fr(L),additionalUserInfo:O.al(L),user:En.getOrCreate(Pe)}})}function zr(U,R){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,l.Z)(function*(U,R){const L=yield R;return{verificationId:L.verificationId,confirm:ee=>Ot(U,L.confirm(ee))}})).apply(this,arguments)}class rr{constructor(R,L){this.resolver=L,this.auth=function qn(U){return U.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Ot(kr(this.auth),this.resolver.resolveSignIn(R))}}class En{constructor(R){this._delegate=R,this.multiFactor=O.ao(R)}static getOrCreate(R){return En.USER_MAP.has(R)||En.USER_MAP.set(R,new En(R)),En.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var L=this;return(0,l.Z)(function*(){return Ot(L.auth,O.Z(L._delegate,R))})()}linkWithPhoneNumber(R,L){var ee=this;return(0,l.Z)(function*(){return zr(ee.auth,O.l(ee._delegate,R,L))})()}linkWithPopup(R){var L=this;return(0,l.Z)(function*(){return Ot(L.auth,O.d(L._delegate,R,Dt))})()}linkWithRedirect(R){var L=this;return(0,l.Z)(function*(){return yield yn(O.aE(L.auth)),O.g(L._delegate,R,Dt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var L=this;return(0,l.Z)(function*(){return Ot(L.auth,O._(L._delegate,R))})()}reauthenticateWithPhoneNumber(R,L){return zr(this.auth,O.r(this._delegate,R,L))}reauthenticateWithPopup(R){return Ot(this.auth,O.e(this._delegate,R,Dt))}reauthenticateWithRedirect(R){var L=this;return(0,l.Z)(function*(){return yield yn(O.aE(L.auth)),O.h(L._delegate,R,Dt)})()}sendEmailVerification(R){return O.ab(this._delegate,R)}unlink(R){var L=this;return(0,l.Z)(function*(){return yield O.ak(L._delegate,R),L})()}updateEmail(R){return O.ag(this._delegate,R)}updatePassword(R){return O.ah(this._delegate,R)}updatePhoneNumber(R){return O.u(this._delegate,R)}updateProfile(R){return O.af(this._delegate,R)}verifyBeforeUpdateEmail(R,L){return O.ac(this._delegate,R,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}En.USER_MAP=new WeakMap;const Xe=O.ax;let De=(()=>{class U{constructor(L,ee){if(this.app=L,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Pe}=L.options;Xe(Pe,"invalid-api-key",{appName:L.name}),Xe(Pe,"invalid-api-key",{appName:L.name});const nt=typeof window<"u"?Dt:void 0;this._delegate=ee.initialize({options:{persistence:vt(Pe,L.name),popupRedirectResolver:nt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?En.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,ee){O.G(this._delegate,L,ee)}applyActionCode(L){return O.a2(this._delegate,L)}checkActionCode(L){return O.a3(this._delegate,L)}confirmPasswordReset(L,ee){return O.a1(this._delegate,L,ee)}createUserWithEmailAndPassword(L,ee){var Pe=this;return(0,l.Z)(function*(){return Ot(Pe._delegate,O.a5(Pe._delegate,L,ee))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return O.aa(this._delegate,L)}isSignInWithEmailLink(L){return O.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,l.Z)(function*(){Xe(Un(),L._delegate,"operation-not-supported-in-this-environment");const ee=yield O.j(L._delegate,Dt);return ee?Ot(L._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function un(U,R){(0,O.aE)(U)._logFramework(R)}(this._delegate,L)}onAuthStateChanged(L,ee,Pe){const{next:nt,error:rt,complete:be}=Je(L,ee,Pe);return this._delegate.onAuthStateChanged(nt,rt,be)}onIdTokenChanged(L,ee,Pe){const{next:nt,error:rt,complete:be}=Je(L,ee,Pe);return this._delegate.onIdTokenChanged(nt,rt,be)}sendSignInLinkToEmail(L,ee){return O.a7(this._delegate,L,ee)}sendPasswordResetEmail(L,ee){return O.a0(this._delegate,L,ee||void 0)}setPersistence(L){var ee=this;return(0,l.Z)(function*(){let Pe;switch(function ws(U,R){gn(Object.values(Bn).includes(R),U,"invalid-persistence-type"),(0,ie.b$)()?gn(R!==Bn.SESSION,U,"unsupported-persistence-type"):(0,ie.UG)()?gn(R===Bn.NONE,U,"unsupported-persistence-type"):Dr()?gn(R===Bn.NONE||R===Bn.LOCAL&&(0,ie.hl)(),U,"unsupported-persistence-type"):gn(R===Bn.NONE||Fi(),U,"unsupported-persistence-type")}(ee._delegate,L),L){case Bn.SESSION:Pe=O.a;break;case Bn.LOCAL:Pe=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case Bn.NONE:Pe=O.L;break;default:return O.at("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(Pe)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Ot(this._delegate,O.X(this._delegate))}signInWithCredential(L){return Ot(this._delegate,O.Y(this._delegate,L))}signInWithCustomToken(L){return Ot(this._delegate,O.$(this._delegate,L))}signInWithEmailAndPassword(L,ee){return Ot(this._delegate,O.a6(this._delegate,L,ee))}signInWithEmailLink(L,ee){return Ot(this._delegate,O.a9(this._delegate,L,ee))}signInWithPhoneNumber(L,ee){return zr(this._delegate,O.s(this._delegate,L,ee))}signInWithPopup(L){var ee=this;return(0,l.Z)(function*(){return Xe(Un(),ee._delegate,"operation-not-supported-in-this-environment"),Ot(ee._delegate,O.c(ee._delegate,L,Dt))})()}signInWithRedirect(L){var ee=this;return(0,l.Z)(function*(){return Xe(Un(),ee._delegate,"operation-not-supported-in-this-environment"),yield yn(ee._delegate),O.f(ee._delegate,L,Dt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return O.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=Bn,U})();function Je(U,R,L){let ee=U;"function"!=typeof U&&({next:ee,error:R,complete:L}=U);const Pe=ee;return{next:rt=>Pe(rt&&En.getOrCreate(rt)),error:R,complete:L}}function vt(U,R){const L=function pn(U,R){const L=lt();if(!L)return[];const ee=O.az(or,U,R);switch(L.getItem(ee)){case Bn.NONE:return[O.L];case Bn.LOCAL:return[O.i,O.a];case Bn.SESSION:return[O.a];default:return[]}}(U,R);if(typeof self<"u"&&!L.includes(O.i)&&L.push(O.i),typeof window<"u")for(const ee of[O.b,O.a])L.includes(ee)||L.push(ee);return L.includes(O.L)||L.push(O.L),L}class _t{constructor(){this.providerId="phone",this._delegate=new O.P(kr(B.Z.auth()))}static credential(R,L){return O.P.credential(R,L)}verifyPhoneNumber(R,L){return this._delegate.verifyPhoneNumber(R,L)}unwrap(){return this._delegate}}_t.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,_t.PROVIDER_ID=O.P.PROVIDER_ID;const Zt=O.ax;class z{constructor(R,L,ee=B.Z.app()){var Pe;Zt(null===(Pe=ee.options)||void 0===Pe?void 0:Pe.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new O.R(R,L,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function q(U){U.INTERNAL.registerComponent(new de.wA("auth-compat",R=>{const L=R.getProvider("app-compat").getImmediate(),ee=R.getProvider("auth");return new De(L,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:_t,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:z,TwitterAuthProvider:O.W,Auth:De,AuthCredential:O.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.2.23")}(B.Z)},9751:(ct,Se,k)=>{k.d(Se,{y:()=>le});var l=k(2961),B=k(727),O=k(8822),ie=k(9635),oe=k(2416),ge=k(576),de=k(2806);let le=(()=>{class Q{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Ee=new Q;return Ee.source=this,Ee.operator=Ne,Ee}subscribe(Ne,Ee,tt){const _e=function G(Q){return Q&&Q instanceof l.Lv||function W(Q){return Q&&(0,ge.m)(Q.next)&&(0,ge.m)(Q.error)&&(0,ge.m)(Q.complete)}(Q)&&(0,B.Nn)(Q)}(Ne)?Ne:new l.Hp(Ne,Ee,tt);return(0,de.x)(()=>{const{operator:fe,source:Qe}=this;_e.add(fe?fe.call(_e,Qe):Qe?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ee){Ne.error(Ee)}}forEach(Ne,Ee){return new(Ee=me(Ee))((tt,_e)=>{const fe=new l.Hp({next:Qe=>{try{Ne(Qe)}catch(Ze){_e(Ze),fe.unsubscribe()}},error:_e,complete:tt});this.subscribe(fe)})}_subscribe(Ne){var Ee;return null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(Ne)}[O.L](){return this}pipe(...Ne){return(0,ie.U)(Ne)(this)}toPromise(Ne){return new(Ne=me(Ne))((Ee,tt)=>{let _e;this.subscribe(fe=>_e=fe,fe=>tt(fe),()=>Ee(_e))})}}return Q.create=$e=>new Q($e),Q})();function me(Q){var $e;return null!==($e=Q??oe.v.Promise)&&void 0!==$e?$e:Promise}},7579:(ct,Se,k)=>{k.d(Se,{x:()=>de});var l=k(9751),B=k(727);const ie=(0,k(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=k(8737),ge=k(2806);let de=(()=>{class me extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new le(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new ie}next(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:$e,observers:Ne}=this;return Q||$e?B.Lc:(this.currentObservers=null,Ne.push(G),new B.w0(()=>{this.currentObservers=null,(0,oe.P)(Ne,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:$e,isStopped:Ne}=this;Q?G.error($e):Ne&&G.complete()}asObservable(){const G=new l.y;return G.source=this,G}}return me.create=(W,G)=>new le(W,G),me})();class le extends de{constructor(W,G){super(),this.destination=W,this.source=G}next(W){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,W)}error(W){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,W)}complete(){var W,G;null===(G=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===G||G.call(W)}_subscribe(W){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe(W))&&void 0!==Q?Q:B.Lc}}},2961:(ct,Se,k)=>{k.d(Se,{Hp:()=>tt,Lv:()=>Q});var l=k(576),B=k(727),O=k(2416),ie=k(7849);function oe(){}const ge=me("C",void 0,void 0);function me(ke,Re,we){return{kind:ke,value:Re,error:we}}var W=k(3410),G=k(2806);class Q extends B.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,B.Nn)(Re)&&Re.add(this)):this.destination=Ze}static create(Re,we,He){return new tt(Re,we,He)}next(Re){this.isStopped?Qe(function le(ke){return me("N",ke,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?Qe(function de(ke){return me("E",void 0,ke)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?Qe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Ne(ke,Re){return $e.call(ke,Re)}class Ee{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:we}=this;if(we.next)try{we.next(Re)}catch(He){_e(He)}}error(Re){const{partialObserver:we}=this;if(we.error)try{we.error(Re)}catch(He){_e(He)}else _e(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(we){_e(we)}}}class tt extends Q{constructor(Re,we,He){let re;if(super(),(0,l.m)(Re)||!Re)re={next:Re??void 0,error:we??void 0,complete:He??void 0};else{let ae;this&&O.v.useDeprecatedNextContext?(ae=Object.create(Re),ae.unsubscribe=()=>this.unsubscribe(),re={next:Re.next&&Ne(Re.next,ae),error:Re.error&&Ne(Re.error,ae),complete:Re.complete&&Ne(Re.complete,ae)}):re=Re}this.destination=new Ee(re)}}function _e(ke){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(ke):(0,ie.h)(ke)}function Qe(ke,Re){const{onStoppedNotification:we}=O.v;we&&W.z.setTimeout(()=>we(ke,Re))}const Ze={closed:!0,next:oe,error:function fe(ke){throw ke},complete:oe}},727:(ct,Se,k)=>{k.d(Se,{Lc:()=>ge,w0:()=>oe,Nn:()=>de});var l=k(576);const O=(0,k(3888).d)(me=>function(G){me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,$e)=>`${$e+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ie=k(8737);class oe{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ne of G)Ne.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,l.m)(Q))try{Q()}catch(Ne){W=Ne instanceof O?Ne.errors:[Ne]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Ne of $e)try{le(Ne)}catch(Ee){W=W??[],Ee instanceof O?W=[...W,...Ee.errors]:W.push(Ee)}}if(W)throw new O(W)}}add(W){var G;if(W&&W!==this)if(this.closed)le(W);else{if(W instanceof oe){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(W)}}_hasParent(W){const{_parentage:G}=this;return G===W||Array.isArray(G)&&G.includes(W)}_addParent(W){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(W),G):G?[G,W]:W}_removeParent(W){const{_parentage:G}=this;G===W?this._parentage=null:Array.isArray(G)&&(0,ie.P)(G,W)}remove(W){const{_finalizers:G}=this;G&&(0,ie.P)(G,W),W instanceof oe&&W._removeParent(this)}}oe.EMPTY=(()=>{const me=new oe;return me.closed=!0,me})();const ge=oe.EMPTY;function de(me){return me instanceof oe||me&&"closed"in me&&(0,l.m)(me.remove)&&(0,l.m)(me.add)&&(0,l.m)(me.unsubscribe)}function le(me){(0,l.m)(me)?me():me.unsubscribe()}},2416:(ct,Se,k)=>{k.d(Se,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Se,k)=>{k.d(Se,{E:()=>B});const B=new(k(9751).y)(oe=>oe.complete())},8996:(ct,Se,k)=>{k.d(Se,{D:()=>Re});var l=k(8421),B=k(5363),O=k(9468),ge=k(9751),le=k(2202),me=k(576),W=k(9672);function Q(we,He){if(!we)throw new Error("Iterable cannot be null");return new ge.y(re=>{(0,W.f)(re,He,()=>{const ae=we[Symbol.asyncIterator]();(0,W.f)(re,He,()=>{ae.next().then(ye=>{ye.done?re.complete():re.next(ye.value)})},0,!0)})})}var $e=k(3670),Ne=k(8239),Ee=k(1144),tt=k(6495),_e=k(2206),fe=k(4532),Qe=k(3260);function Re(we,He){return He?function ke(we,He){if(null!=we){if((0,$e.c)(we))return function ie(we,He){return(0,l.Xf)(we).pipe((0,O.R)(He),(0,B.Q)(He))}(we,He);if((0,Ee.z)(we))return function de(we,He){return new ge.y(re=>{let ae=0;return He.schedule(function(){ae===we.length?re.complete():(re.next(we[ae++]),re.closed||this.schedule())})})}(we,He);if((0,Ne.t)(we))return function oe(we,He){return(0,l.Xf)(we).pipe((0,O.R)(He),(0,B.Q)(He))}(we,He);if((0,_e.D)(we))return Q(we,He);if((0,tt.T)(we))return function G(we,He){return new ge.y(re=>{let ae;return(0,W.f)(re,He,()=>{ae=we[le.h](),(0,W.f)(re,He,()=>{let ye,K;try{({value:ye,done:K}=ae.next())}catch(J){return void re.error(J)}K?re.complete():re.next(ye)},0,!0)}),()=>(0,me.m)(ae?.return)&&ae.return()})}(we,He);if((0,Qe.L)(we))return function Ze(we,He){return Q((0,Qe.Q)(we),He)}(we,He)}throw(0,fe.z)(we)}(we,He):(0,l.Xf)(we)}},8421:(ct,Se,k)=>{k.d(Se,{Xf:()=>$e});var l=k(655),B=k(1144),O=k(8239),ie=k(9751),oe=k(3670),ge=k(2206),de=k(4532),le=k(6495),me=k(3260),W=k(576),G=k(7849),Q=k(8822);function $e(ke){if(ke instanceof ie.y)return ke;if(null!=ke){if((0,oe.c)(ke))return function Ne(ke){return new ie.y(Re=>{const we=ke[Q.L]();if((0,W.m)(we.subscribe))return we.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,B.z)(ke))return function Ee(ke){return new ie.y(Re=>{for(let we=0;we<ke.length&&!Re.closed;we++)Re.next(ke[we]);Re.complete()})}(ke);if((0,O.t)(ke))return function tt(ke){return new ie.y(Re=>{ke.then(we=>{Re.closed||(Re.next(we),Re.complete())},we=>Re.error(we)).then(null,G.h)})}(ke);if((0,ge.D)(ke))return fe(ke);if((0,le.T)(ke))return function _e(ke){return new ie.y(Re=>{for(const we of ke)if(Re.next(we),Re.closed)return;Re.complete()})}(ke);if((0,me.L)(ke))return function Qe(ke){return fe((0,me.Q)(ke))}(ke)}throw(0,de.z)(ke)}function fe(ke){return new ie.y(Re=>{(function Ze(ke,Re){var we,He,re,ae;return(0,l.mG)(this,void 0,void 0,function*(){try{for(we=(0,l.KL)(ke);!(He=yield we.next()).done;)if(Re.next(He.value),Re.closed)return}catch(ye){re={error:ye}}finally{try{He&&!He.done&&(ae=we.return)&&(yield ae.call(we))}finally{if(re)throw re.error}}Re.complete()})})(ke,Re).catch(we=>Re.error(we))})}},6451:(ct,Se,k)=>{k.d(Se,{T:()=>ge});var l=k(8189),B=k(8421),O=k(515),ie=k(7669),oe=k(8996);function ge(...de){const le=(0,ie.yG)(de),me=(0,ie._6)(de,1/0),W=de;return W.length?1===W.length?(0,B.Xf)(W[0]):(0,l.J)(me)((0,oe.D)(W,le)):O.E}},5403:(ct,Se,k)=>{k.d(Se,{x:()=>B});var l=k(2961);function B(ie,oe,ge,de,le){return new O(ie,oe,ge,de,le)}class O extends l.Lv{constructor(oe,ge,de,le,me,W){super(oe),this.onFinalize=me,this.shouldUnsubscribe=W,this._next=ge?function(G){try{ge(G)}catch(Q){oe.error(Q)}}:super._next,this._error=le?function(G){try{le(G)}catch(Q){oe.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(G){oe.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ct,Se,k)=>{k.d(Se,{U:()=>O});var l=k(4482),B=k(5403);function O(ie,oe){return(0,l.e)((ge,de)=>{let le=0;ge.subscribe((0,B.x)(de,me=>{de.next(ie.call(oe,me,le++))}))})}},8189:(ct,Se,k)=>{k.d(Se,{J:()=>O});var l=k(5577),B=k(4671);function O(ie=1/0){return(0,l.z)(B.y,ie)}},5577:(ct,Se,k)=>{k.d(Se,{z:()=>le});var l=k(4004),B=k(8421),O=k(4482),ie=k(9672),oe=k(5403),de=k(576);function le(me,W,G=1/0){return(0,de.m)(W)?le((Q,$e)=>(0,l.U)((Ne,Ee)=>W(Q,Ne,$e,Ee))((0,B.Xf)(me(Q,$e))),G):("number"==typeof W&&(G=W),(0,O.e)((Q,$e)=>function ge(me,W,G,Q,$e,Ne,Ee,tt){const _e=[];let fe=0,Qe=0,Ze=!1;const ke=()=>{Ze&&!_e.length&&!fe&&W.complete()},Re=He=>fe<Q?we(He):_e.push(He),we=He=>{Ne&&W.next(He),fe++;let re=!1;(0,B.Xf)(G(He,Qe++)).subscribe((0,oe.x)(W,ae=>{$e?.(ae),Ne?Re(ae):W.next(ae)},()=>{re=!0},void 0,()=>{if(re)try{for(fe--;_e.length&&fe<Q;){const ae=_e.shift();Ee?(0,ie.f)(W,Ee,()=>we(ae)):we(ae)}ke()}catch(ae){W.error(ae)}}))};return me.subscribe((0,oe.x)(W,Re,()=>{Ze=!0,ke()})),()=>{tt?.()}}(Q,$e,me,G)))}},5363:(ct,Se,k)=>{k.d(Se,{Q:()=>ie});var l=k(9672),B=k(4482),O=k(5403);function ie(oe,ge=0){return(0,B.e)((de,le)=>{de.subscribe((0,O.x)(le,me=>(0,l.f)(le,oe,()=>le.next(me),ge),()=>(0,l.f)(le,oe,()=>le.complete(),ge),me=>(0,l.f)(le,oe,()=>le.error(me),ge)))})}},3099:(ct,Se,k)=>{k.d(Se,{B:()=>oe});var l=k(8421),B=k(7579),O=k(2961),ie=k(4482);function oe(de={}){const{connector:le=(()=>new B.x),resetOnError:me=!0,resetOnComplete:W=!0,resetOnRefCountZero:G=!0}=de;return Q=>{let $e,Ne,Ee,tt=0,_e=!1,fe=!1;const Qe=()=>{Ne?.unsubscribe(),Ne=void 0},Ze=()=>{Qe(),$e=Ee=void 0,_e=fe=!1},ke=()=>{const Re=$e;Ze(),Re?.unsubscribe()};return(0,ie.e)((Re,we)=>{tt++,!fe&&!_e&&Qe();const He=Ee=Ee??le();we.add(()=>{tt--,0===tt&&!fe&&!_e&&(Ne=ge(ke,G))}),He.subscribe(we),!$e&&tt>0&&($e=new O.Hp({next:re=>He.next(re),error:re=>{fe=!0,Qe(),Ne=ge(Ze,me,re),He.error(re)},complete:()=>{_e=!0,Qe(),Ne=ge(Ze,W),He.complete()}}),(0,l.Xf)(Re).subscribe($e))})(Q)}}function ge(de,le,...me){if(!0===le)return void de();if(!1===le)return;const W=new O.Hp({next:()=>{W.unsubscribe(),de()}});return le(...me).subscribe(W)}},9468:(ct,Se,k)=>{k.d(Se,{R:()=>B});var l=k(4482);function B(O,ie=0){return(0,l.e)((oe,ge)=>{ge.add(O.schedule(()=>oe.subscribe(ge),ie))})}},8505:(ct,Se,k)=>{k.d(Se,{b:()=>oe});var l=k(576),B=k(4482),O=k(5403),ie=k(4671);function oe(ge,de,le){const me=(0,l.m)(ge)||de||le?{next:ge,error:de,complete:le}:ge;return me?(0,B.e)((W,G)=>{var Q;null===(Q=me.subscribe)||void 0===Q||Q.call(me);let $e=!0;W.subscribe((0,O.x)(G,Ne=>{var Ee;null===(Ee=me.next)||void 0===Ee||Ee.call(me,Ne),G.next(Ne)},()=>{var Ne;$e=!1,null===(Ne=me.complete)||void 0===Ne||Ne.call(me),G.complete()},Ne=>{var Ee;$e=!1,null===(Ee=me.error)||void 0===Ee||Ee.call(me,Ne),G.error(Ne)},()=>{var Ne,Ee;$e&&(null===(Ne=me.unsubscribe)||void 0===Ne||Ne.call(me)),null===(Ee=me.finalize)||void 0===Ee||Ee.call(me)}))}):ie.y}},4408:(ct,Se,k)=>{k.d(Se,{o:()=>oe});var l=k(727);class B extends l.w0{constructor(de,le){super()}schedule(de,le=0){return this}}const O={setInterval(ge,de,...le){const{delegate:me}=O;return me?.setInterval?me.setInterval(ge,de,...le):setInterval(ge,de,...le)},clearInterval(ge){const{delegate:de}=O;return(de?.clearInterval||clearInterval)(ge)},delegate:void 0};var ie=k(8737);class oe extends B{constructor(de,le){super(de,le),this.scheduler=de,this.work=le,this.pending=!1}schedule(de,le=0){var me;if(this.closed)return this;this.state=de;const W=this.id,G=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(G,W,le)),this.pending=!0,this.delay=le,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(G,this.id,le),this}requestAsyncId(de,le,me=0){return O.setInterval(de.flush.bind(de,this),me)}recycleAsyncId(de,le,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return le;null!=le&&O.clearInterval(le)}execute(de,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(de,le);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,le){let W,me=!1;try{this.work(de)}catch(G){me=!0,W=G||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:de,scheduler:le}=this,{actions:me}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(me,this),null!=de&&(this.id=this.recycleAsyncId(le,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Se,k)=>{k.d(Se,{v:()=>O});var l=k(6063);class B{constructor(oe,ge=B.now){this.schedulerActionCtor=oe,this.now=ge}schedule(oe,ge=0,de){return new this.schedulerActionCtor(this,oe).schedule(de,ge)}}B.now=l.l.now;class O extends B{constructor(oe,ge=B.now){super(oe,ge),this.actions=[],this._active=!1}flush(oe){const{actions:ge}=this;if(this._active)return void ge.push(oe);let de;this._active=!0;do{if(de=oe.execute(oe.state,oe.delay))break}while(oe=ge.shift());if(this._active=!1,de){for(;oe=ge.shift();)oe.unsubscribe();throw de}}}},4986:(ct,Se,k)=>{k.d(Se,{z:()=>O});var l=k(4408);const O=new(k(7565).v)(l.o)},6063:(ct,Se,k)=>{k.d(Se,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(ct,Se,k)=>{k.d(Se,{z:()=>l});const l={setTimeout(B,O,...ie){const{delegate:oe}=l;return oe?.setTimeout?oe.setTimeout(B,O,...ie):setTimeout(B,O,...ie)},clearTimeout(B){const{delegate:O}=l;return(O?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(ct,Se,k)=>{k.d(Se,{h:()=>B});const B=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Se,k)=>{k.d(Se,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ct,Se,k)=>{k.d(Se,{_6:()=>ge,jO:()=>ie,yG:()=>oe});var l=k(576);function O(de){return de[de.length-1]}function ie(de){return(0,l.m)(O(de))?de.pop():void 0}function oe(de){return function B(de){return de&&(0,l.m)(de.schedule)}(O(de))?de.pop():void 0}function ge(de,le){return"number"==typeof O(de)?de.pop():le}},8737:(ct,Se,k)=>{function l(B,O){if(B){const ie=B.indexOf(O);0<=ie&&B.splice(ie,1)}}k.d(Se,{P:()=>l})},3888:(ct,Se,k)=>{function l(B){const ie=B(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Se,{d:()=>l})},2806:(ct,Se,k)=>{k.d(Se,{O:()=>ie,x:()=>O});var l=k(2416);let B=null;function O(oe){if(l.v.useDeprecatedSynchronousErrorHandling){const ge=!B;if(ge&&(B={errorThrown:!1,error:null}),oe(),ge){const{errorThrown:de,error:le}=B;if(B=null,de)throw le}}else oe()}function ie(oe){l.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=oe)}},9672:(ct,Se,k)=>{function l(B,O,ie,oe=0,ge=!1){const de=O.schedule(function(){ie(),ge?B.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(B.add(de),!ge)return de}k.d(Se,{f:()=>l})},4671:(ct,Se,k)=>{function l(B){return B}k.d(Se,{y:()=>l})},1144:(ct,Se,k)=>{k.d(Se,{z:()=>l});const l=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ct,Se,k)=>{k.d(Se,{D:()=>B});var l=k(576);function B(O){return Symbol.asyncIterator&&(0,l.m)(O?.[Symbol.asyncIterator])}},576:(ct,Se,k)=>{function l(B){return"function"==typeof B}k.d(Se,{m:()=>l})},3670:(ct,Se,k)=>{k.d(Se,{c:()=>O});var l=k(8822),B=k(576);function O(ie){return(0,B.m)(ie[l.L])}},6495:(ct,Se,k)=>{k.d(Se,{T:()=>O});var l=k(2202),B=k(576);function O(ie){return(0,B.m)(ie?.[l.h])}},8239:(ct,Se,k)=>{k.d(Se,{t:()=>B});var l=k(576);function B(O){return(0,l.m)(O?.then)}},3260:(ct,Se,k)=>{k.d(Se,{L:()=>ie,Q:()=>O});var l=k(655),B=k(576);function O(oe){return(0,l.FC)(this,arguments,function*(){const de=oe.getReader();try{for(;;){const{value:le,done:me}=yield(0,l.qq)(de.read());if(me)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(le)}}finally{de.releaseLock()}})}function ie(oe){return(0,B.m)(oe?.getReader)}},4482:(ct,Se,k)=>{k.d(Se,{A:()=>B,e:()=>O});var l=k(576);function B(ie){return(0,l.m)(ie?.lift)}function O(ie){return oe=>{if(B(oe))return oe.lift(function(ge){try{return ie(ge,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ct,Se,k)=>{k.d(Se,{U:()=>O,z:()=>B});var l=k(4671);function B(...ie){return O(ie)}function O(ie){return 0===ie.length?l.y:1===ie.length?ie[0]:function(ge){return ie.reduce((de,le)=>le(de),ge)}}},7849:(ct,Se,k)=>{k.d(Se,{h:()=>O});var l=k(2416),B=k(3410);function O(ie){B.z.setTimeout(()=>{const{onUnhandledError:oe}=l.v;if(!oe)throw ie;oe(ie)})}},4532:(ct,Se,k)=>{function l(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Se,{z:()=>l})},655:(ct,Se,k)=>{function ie(K,J){var he={};for(var se in K)Object.prototype.hasOwnProperty.call(K,se)&&J.indexOf(se)<0&&(he[se]=K[se]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(se=Object.getOwnPropertySymbols(K);Ue<se.length;Ue++)J.indexOf(se[Ue])<0&&Object.prototype.propertyIsEnumerable.call(K,se[Ue])&&(he[se[Ue]]=K[se[Ue]])}return he}function le(K,J,he,se){return new(he||(he=Promise))(function(Be,gt){function tn(un){try{We(se.next(un))}catch(mn){gt(mn)}}function Ut(un){try{We(se.throw(un))}catch(mn){gt(mn)}}function We(un){un.done?Be(un.value):function Ue(Be){return Be instanceof he?Be:new he(function(gt){gt(Be)})}(un.value).then(tn,Ut)}We((se=se.apply(K,J||[])).next())})}function _e(K){return this instanceof _e?(this.v=K,this):new _e(K)}function fe(K,J,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,se=he.apply(K,J||[]),Be=[];return Ue={},gt("next"),gt("throw"),gt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function gt(Xt){se[Xt]&&(Ue[Xt]=function(en){return new Promise(function($t,Pt){Be.push([Xt,en,$t,Pt])>1||tn(Xt,en)})})}function tn(Xt,en){try{!function Ut(Xt){Xt.value instanceof _e?Promise.resolve(Xt.value.v).then(We,un):mn(Be[0][2],Xt)}(se[Xt](en))}catch($t){mn(Be[0][3],$t)}}function We(Xt){tn("next",Xt)}function un(Xt){tn("throw",Xt)}function mn(Xt,en){Xt(en),Be.shift(),Be.length&&tn(Be[0][0],Be[0][1])}}function Ze(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,J=K[Symbol.asyncIterator];return J?J.call(K):(K=function Q(K){var J="function"==typeof Symbol&&Symbol.iterator,he=J&&K[J],se=0;if(he)return he.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&se>=K.length&&(K=void 0),{value:K&&K[se++],done:!K}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),he={},se("next"),se("throw"),se("return"),he[Symbol.asyncIterator]=function(){return this},he);function se(Be){he[Be]=K[Be]&&function(gt){return new Promise(function(tn,Ut){!function Ue(Be,gt,tn,Ut){Promise.resolve(Ut).then(function(We){Be({value:We,done:tn})},gt)}(tn,Ut,(gt=K[Be](gt)).done,gt.value)})}}}k.d(Se,{FC:()=>fe,KL:()=>Ze,_T:()=>ie,mG:()=>le,qq:()=>_e})},4650:(ct,Se,k)=>{k.d(Se,{$8M:()=>eu,$Z:()=>wy,AFp:()=>u_,ALo:()=>jh,AaK:()=>le,B6R:()=>Je,BQk:()=>pc,CHM:()=>Od,CRH:()=>e_,CZH:()=>Ng,CqO:()=>nv,D6c:()=>b_,DdM:()=>UI,Dn7:()=>$h,EJc:()=>Fg,EiD:()=>pl,EpF:()=>ev,F4k:()=>qw,FYo:()=>$m,FiY:()=>Te,G48:()=>pd,GfV:()=>Hm,Gpc:()=>G,JOm:()=>Ro,JVY:()=>Xf,KtG:()=>ro,L6k:()=>ep,LAX:()=>tp,LFG:()=>Hn,LSH:()=>m0,Lbi:()=>c_,Lck:()=>zb,MMx:()=>_r,NdJ:()=>rv,OlP:()=>wn,Oqu:()=>lv,PXZ:()=>IE,Q6J:()=>$p,QGY:()=>tv,QP$:()=>Pe,Qsj:()=>_l,R0b:()=>Ei,RDi:()=>Qf,Rgc:()=>ud,SBq:()=>Ca,Sil:()=>uf,Suo:()=>Xv,TTD:()=>es,TgZ:()=>Hp,Tol:()=>sI,Udp:()=>sv,X6Q:()=>Or,XFs:()=>Ke,Xpm:()=>De,Xts:()=>Yu,Y36:()=>oc,YKP:()=>cg,YNc:()=>jp,Yjl:()=>U,Yz7:()=>en,Z0I:()=>bi,ZZ4:()=>gd,_Bn:()=>id,_UZ:()=>zp,_Vd:()=>sh,_c5:()=>UE,_uU:()=>cI,aQg:()=>Wg,c2e:()=>pT,cJS:()=>Pt,cg1:()=>Dv,d8E:()=>ed,dDg:()=>Ug,dqk:()=>Dt,eBb:()=>ll,eFA:()=>__,ekj:()=>ov,eoX:()=>yE,f3M:()=>qd,g9A:()=>Pg,h0i:()=>sd,hGG:()=>fu,hij:()=>Qp,iGM:()=>YI,ifc:()=>dt,ip1:()=>oE,jDz:()=>FI,kL8:()=>Cv,lG2:()=>q,lqb:()=>xo,lri:()=>df,mCW:()=>m,n5z:()=>ss,oAB:()=>Zt,oJD:()=>Nm,oxw:()=>Qw,pB0:()=>np,q3G:()=>Gn,q4F:()=>$D,qLn:()=>ah,qOj:()=>zy,qZA:()=>Gp,qzn:()=>Ao,rWj:()=>g_,sBO:()=>je,sIi:()=>Ah,s_b:()=>ld,soG:()=>kg,tb:()=>l_,tp0:()=>ht,uIk:()=>Yy,vHH:()=>Ee,vpe:()=>Hs,wAp:()=>It,xi3:()=>Gv,xp6:()=>vp,ynx:()=>Xy,z2F:()=>Hg,z3N:()=>cs,zSh:()=>Lm,zs3:()=>sc});var l=k(7579),B=k(727),O=k(9751),ie=k(6451),oe=k(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function de(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function me(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const W=ge({__forward_ref__:ge});function G(i){return i.__forward_ref__=G,i.toString=function(){return le(this())},i}function Q(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(W)&&i.__forward_ref__===G}class Ee extends Error{constructor(s,a){super(function tt(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function _e(i){return"string"==typeof i?i:null==i?"":String(i)}function Re(i,s){throw new Ee(-201,!1)}function Ut(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Pt(i){return{providers:i.providers||[],imports:i.imports||[]}}function hr(i){return Er(i,Dr)||Er(i,ui)}function bi(i){return null!==hr(i)}function Er(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fi(i){return i&&(i.hasOwnProperty(Un)||i.hasOwnProperty(Li))?i[Un]:null}const Dr=ge({\u0275prov:ge}),Un=ge({\u0275inj:ge}),ui=ge({ngInjectableDef:ge}),Li=ge({ngInjectorDef:ge});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Wn;function gn(i){const s=Wn;return Wn=i,s}function or(i,s,a){const c=hr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==s?s:void Re(le(i))}function yn(i){return{toString:i}.toString()}var vn=(()=>((vn=vn||{})[vn.OnPush=0]="OnPush",vn[vn.Default=1]="Default",vn))(),dt=(()=>{return(i=dt||(dt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",dt;var i})();const Dt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fr={},Et=[],Cr=ge({\u0275cmp:ge}),Ot=ge({\u0275dir:ge}),zr=ge({\u0275pipe:ge}),Wt=ge({\u0275mod:ge}),rr=ge({\u0275fac:ge}),En=ge({__NG_ELEMENT_ID__:ge});let Xe=0;function De(i){return yn(()=>{const a=!0===i.standalone,c={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===vn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||dt.Emulated,id:"c"+Xe++,styles:i.styles||Et,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return h.inputs=j(i.inputs,c),h.outputs=j(i.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(vt).filter(_t):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(ee).filter(_t):null,h})}function Je(i,s,a){const c=i.\u0275cmp;c.directiveDefs=()=>("function"==typeof s?s():s).map(vt),c.pipeDefs=()=>("function"==typeof a?a():a).map(ee)}function vt(i){return R(i)||L(i)}function _t(i){return null!==i}function Zt(i){return yn(()=>({type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function j(i,s){if(null==i)return fr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=c,s&&(s[h]=f)}return a}const q=De;function U(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function R(i){return i[Cr]||null}function L(i){return i[Ot]||null}function ee(i){return i[zr]||null}function Pe(i){const s=R(i)||L(i)||ee(i);return null!==s&&s.standalone}function nt(i,s){const a=i[Wt]||null;if(!a&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Zn(i){return Array.isArray(i)&&"object"==typeof i[1]}function qr(i){return Array.isArray(i)&&!0===i[1]}function Ks(i){return 0!=(8&i.flags)}function Iu(i){return 2==(2&i.flags)}function Ko(i){return 1==(1&i.flags)}function Lr(i){return null!==i.template}function Eu(i){return 0!=(256&i[2])}function lr(i,s){return i.hasOwnProperty(rr)?i[rr]:null}class Xs{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function es(){return Jo}function Jo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Cu),$a}function $a(){const i=eo(this),s=i?.current;if(s){const a=i.previous;if(a===fr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Cu(i,s,a,c){const h=eo(i)||function Rd(i,s){return i[bu]=s}(i,{previous:fr,current:null}),f=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[a],E=y[w];f[w]=new Xs(E&&E.currentValue,s,y===fr),i[c]=s}es.ngInherit=!0;const bu="__ngSimpleChanges__";function eo(i){return i[bu]||null}function xn(i){for(;Array.isArray(i);)i=i[0];return i}function li(i,s){return xn(s[i])}function dr(i,s){return xn(s[i.index])}function xs(i,s){return i.data[s]}function Ti(i,s){return i[s]}function nn(i,s){const a=s[i];return Zn(a)?a:a[0]}function ts(i){return 64==(64&i[2])}function Yr(i,s){return null==s?null:i[s]}function Xo(i){i[18]=0}function Rn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const At={lFrame:ca(null),bindingsEnabled:!0};function Ms(){return At.bindingsEnabled}function Me(){return At.lFrame.lView}function zt(){return At.lFrame.tView}function Od(i){return At.lFrame.contextLView=i,i[8]}function ro(i){return At.lFrame.contextLView=null,i}function Kn(){let i=io();for(;null!==i&&64===i.type;)i=i.parent;return i}function io(){return At.lFrame.currentTNode}function br(i,s){const a=At.lFrame;a.currentTNode=i,a.isParent=s}function za(){return At.lFrame.isParent}function so(){At.lFrame.isParent=!1}function Yn(){const i=At.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function oa(){return At.lFrame.bindingIndex++}function Gi(i){const s=At.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function zc(i,s){const a=At.lFrame;a.bindingIndex=a.bindingRootIndex=i,oo(s)}function oo(i){At.lFrame.currentDirectiveIndex=i}function Mu(i){const s=At.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}function aa(){return At.lFrame.currentQueryIndex}function Ru(i){At.lFrame.currentQueryIndex=i}function ua(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Wc(i,s,a){if(a&Ke.SkipSelf){let h=s,f=i;for(;!(h=h.parent,null!==h||a&Ke.Host||(h=ua(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;s=h,i=f}const c=At.lFrame=Fd();return c.currentTNode=s,c.lView=i,!0}function ao(i){const s=Fd(),a=i[1];At.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Fd(){const i=At.lFrame,s=null===i?null:i.child;return null===s?ca(i):s}function ca(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ld(){const i=At.lFrame;return At.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const qc=Ld;function ns(){const i=Ld();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function bn(){return At.lFrame.selectedIndex}function zi(i){At.lFrame.selectedIndex=i}function Tn(){const i=At.lFrame;return xs(i.tView,i.selectedIndex)}function Wa(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function uo(i,s,a){Ns(i,s,3,a)}function co(i,s,a,c){(3&i[2])===a&&Ns(i,s,a,c)}function Yc(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Ns(i,s,a,c){const f=c??-1,y=s.length-1;let w=0;for(let E=void 0!==c?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=c&&w>=c)break}else s[E]<0&&(i[18]+=65536),(w<f||-1==f)&&(Qc(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Qc(i,s,a,c){const h=a[c]<0,f=a[c+1],w=i[h?-a[c]:a[c]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Qr{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Wi(i,s,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,f)}else{const f=h,y=a[++c];Lu(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function la(i){return 3===i||4===i||6===i}function Lu(i){return 64===i.charCodeAt(0)}function da(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const h=s[c];"number"==typeof h?a=h:0===a||Xc(i,a,h,null,-1===a||2===a?s[++c]:null)}}return i}function Xc(i,s,a,c,h){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==h&&(i[f+1]=h));if(c===i[f+1])return void(i[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==h&&i.splice(f++,0,h)}function Bd(i){return-1!==i}function Qn(i){return 32767&i}function is(i,s){let a=function jd(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Vu=!0;function ha(i){const s=Vu;return Vu=i,s}let el=0;const Ur={};function qi(i,s){const a=Qa(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Uu(c.data,i),Uu(s,null),Uu(c.blueprint,null));const h=fa(i,s),f=i.injectorIndex;if(Bd(h)){const y=Qn(h),w=is(h,s),E=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|E[y+T]}return s[f+8]=h,f}function Uu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Qa(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function fa(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=s;for(;null!==h;){if(c=vo(h),null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Os(i,s,a){!function tl(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(En)&&(c=a[En]),null==c&&(c=a[En]=el++);const h=255&c;s.data[i+(h>>5)]|=1<<h}(i,s,a)}function ho(i,s,a){if(a&Ke.Optional||void 0!==i)return i;Re()}function fo(i,s,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),0==(a&(Ke.Self|Ke.Host))){const h=i[9],f=gn(void 0);try{return h?h.get(s,c,a&Ke.Optional):or(s,c,a&Ke.Optional)}finally{gn(f)}}return ho(c,0,a)}function po(i,s,a,c=Ke.Default,h){if(null!==i){if(1024&s[2]){const y=function Gd(i,s,a,c,h){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=nl(f,y,a,c|Ke.Self,Ur);if(w!==Ur)return w;let E=f.parent;if(!E){const T=y[21];if(T){const M=T.get(a,Ur,c);if(M!==Ur)return M}E=vo(y),y=y[15]}f=E}return h}(i,s,a,c,Ur);if(y!==Ur)return y}const f=nl(i,s,a,c,Ur);if(f!==Ur)return f}return fo(s,a,c,h)}function nl(i,s,a,c,h){const f=function Hd(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(En)?i[En]:void 0;return"number"==typeof s?s>=0?255&s:Bu:s}(a);if("function"==typeof f){if(!Wc(s,i,c))return c&Ke.Host?ho(h,0,c):fo(s,a,c,h);try{const y=f(c);if(null!=y||c&Ke.Optional)return y;Re()}finally{qc()}}else if("number"==typeof f){let y=null,w=Qa(i,s),E=-1,T=c&Ke.Host?s[16][6]:null;for((-1===w||c&Ke.SkipSelf)&&(E=-1===w?fa(i,s):s[w+8],-1!==E&&Xa(c,!1)?(y=s[1],w=Qn(E),s=is(E,s)):w=-1);-1!==w;){const M=s[1];if(go(f,w,M.data)){const F=Ja(w,s,a,y,c,T);if(F!==Ur)return F}E=s[w+8],-1!==E&&Xa(c,s[1].data[w+8]===T)&&go(f,w,s)?(y=M,w=Qn(E),s=is(E,s)):w=-1}}return h}function Ja(i,s,a,c,h,f){const y=s[1],w=y.data[i+8],M=ga(w,y,a,null==c?Iu(w)&&Vu:c!=y&&0!=(3&w.type),h&Ke.Host&&f===w);return null!==M?Si(s,y,M,w):Ur}function ga(i,s,a,c,h){const f=i.providerIndexes,y=s.data,w=1048575&f,E=i.directiveStart,M=f>>20,$=h?w+M:i.directiveEnd;for(let ne=c?w:w+M;ne<$;ne++){const ve=y[ne];if(ne<E&&a===ve||ne>=E&&ve.type===a)return ne}if(h){const ne=y[E];if(ne&&Lr(ne)&&ne.type===a)return E}return null}function Si(i,s,a,c){let h=i[a];const f=s.data;if(function Fu(i){return i instanceof Qr}(h)){const y=h;y.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():_e(i)}(f[a]));const w=ha(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?gn(y.injectImpl):null;Wc(i,c,Ke.Default);try{h=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function ku(i,s,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=s.type.prototype;if(c){const y=Jo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&gn(E),ha(w),y.resolving=!1,qc()}}return h}function go(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Xa(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class mo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return po(this._tNode,this._lView,s,c,a)}}function Bu(){return new mo(Kn(),Me())}function ss(i){return yn(()=>{const s=i.prototype.constructor,a=s[rr]||yo(s),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const f=h[rr]||yo(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function yo(i){return $e(i)?()=>{const s=yo(Q(i));return s&&s()}:lr(i)}function vo(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function eu(i){return function pa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const f=a[h];if(la(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(f===s)return a[h+1];h+=2}}}return null}(Kn(),i)}const _o="__parameters__";function Io(i,s,a){return yn(()=>{const c=function ju(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(s);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return w.annotation=y,w;function w(E,T,M){const F=E.hasOwnProperty(_o)?E[_o]:Object.defineProperty(E,_o,{value:[]})[_o];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),E}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class wn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function an(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),an(c,s)):s!==i&&s.push(c)}return s}function hi(i,s){i.forEach(a=>Array.isArray(a)?hi(a,s):s(a))}function fi(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Pn(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Tr(i,s,a){let c=Ni(i,s);return c>=0?i[1|c]=a:(c=~c,function il(i,s,a,c){let h=i.length;if(h==s)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>s;)i[h]=i[h-2],h--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function $u(i,s){const a=Ni(i,s);if(a>=0)return i[1|a]}function Ni(i,s){return function ma(i,s,a){let c=0,h=i.length>>a;for(;h!==c;){const f=c+(h-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?h=f:c=f+1}return~(h<<a)}(i,s,1)}const Ar={},An="__NG_DI_FLAG__",as="ngTempTokenPath",ei=/\n/gm,pi="__source";let Ia;function ks(i){const s=Ia;return Ia=i,s}function zu(i,s=Ke.Default){if(void 0===Ia)throw new Ee(-203,!1);return null===Ia?or(i,void 0,s):Ia.get(i,s&Ke.Optional?null:void 0,s)}function Hn(i,s=Ke.Default){return(function Bn(){return Wn}()||zu)(Q(i),s)}function qd(i,s=Ke.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Hn(i,s)}function D(i){const s=[];for(let a=0;a<i.length;a++){const c=Q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Ee(900,!1);let h,f=Ke.Default;for(let y=0;y<c.length;y++){const w=c[y],E=x(w);"number"==typeof E?-1===E?h=w.token:f|=E:h=w}s.push(Hn(h,f))}else s.push(Hn(c))}return s}function b(i,s){return i[An]=s,i.prototype[An]=s,i}function x(i){return i[An]}const Te=b(Io("Optional"),8),ht=b(Io("SkipSelf"),4);let Yd,mi,To;function Qf(i){Yd=i}function Da(i){return function Qd(){if(void 0===mi&&(mi=null,Dt.trustedTypes))try{mi=Dt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return mi}()?.createHTML(i)||i}function Us(i){return function Jd(){if(void 0===To&&(To=null,Dt.trustedTypes))try{To=Dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return To}()?.createHTML(i)||i}class ti{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class eh extends ti{getTypeName(){return"HTML"}}class g0 extends ti{getTypeName(){return"Style"}}class th extends ti{getTypeName(){return"Script"}}class Jf extends ti{getTypeName(){return"URL"}}class cl extends ti{getTypeName(){return"ResourceURL"}}function cs(i){return i instanceof ti?i.changingThisBreaksApplicationSecurity:i}function Ao(i,s){const a=function nh(i){return i instanceof ti&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Xf(i){return new eh(i)}function ep(i){return new g0(i)}function ll(i){return new th(i)}function tp(i){return new Jf(i)}function np(i){return new cl(i)}class rp{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Da(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch{return null}}}class xm{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Da(s),a;const c=this.inertDocument.createElement("body");return c.innerHTML=Da(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(s){const a=s.attributes;for(let h=a.length-1;0<h;h--){const y=a.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&s.removeAttribute(y)}let c=s.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function m(i){return(i=String(i)).match(p)?i:"unsafe:"+i}function I(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function S(...i){const s={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(s[c]=!0);return s}const P=I("area,br,col,hr,img,wbr"),X=I("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ce=I("rp,rt"),In=S(P,S(X,I("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),S(Ce,I("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),S(Ce,X)),yi=I("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hl=S(yi,I("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),I("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ip=I("script,style,template");class Mm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!In.hasOwnProperty(a))return this.sanitizedSomething=!0,!ip.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=s.attributes;for(let h=0;h<c.length;h++){const f=c.item(h),y=f.name,w=y.toLowerCase();if(!hl.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let E=f.value;yi[w]&&(E=m(E)),this.buf.push(" ",y,'="',Zu(E),'"')}return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();In.hasOwnProperty(a)&&!P.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(Zu(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const fl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ru=/([^\#-~ |!])/g;function Zu(i){return i.replace(/&/g,"&amp;").replace(fl,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(ru,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let So;function pl(i,s){let a=null;try{So=So||function dl(i){const s=new xm(i);return function _(){try{return!!(new window.DOMParser).parseFromString(Da(""),"text/html")}catch{return!1}}()?new rp(s):s}(i);let c=s?String(s):"";a=So.getInertBodyElement(c);let h=5,f=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=f,f=a.innerHTML,a=So.getInertBodyElement(c)}while(c!==f);return Da((new Mm).sanitizeChildren(iu(a)||a))}finally{if(a){const c=iu(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function iu(i){return"content"in i&&function Rm(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function Nm(i){const s=Ku();return s?Us(s.sanitize(Gn.HTML,i)||""):Ao(i,"HTML")?Us(cs(i)):pl(function us(){return void 0!==Yd?Yd:typeof document<"u"?document:void 0}(),_e(i))}function m0(i){const s=Ku();return s?s.sanitize(Gn.URL,i)||"":Ao(i,"URL")?cs(i):m(_e(i))}function Ku(){const i=Me();return i&&i[12]}const Yu=new wn("ENVIRONMENT_INITIALIZER"),rh=new wn("INJECTOR",-1),Qu=new wn("INJECTOR_DEF_TYPES");class gl{get(s,a=Ar){if(a===Ar){const c=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw c.name="NullInjectorError",c}return a}}function Om(...i){return{\u0275providers:Pm(0,i)}}function Pm(i,...s){const a=[],c=new Set;let h;return hi(s,f=>{const y=f;op(y,a,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&sp(h,a),a}function sp(i,s){for(let a=0;a<i.length;a++){const{providers:h}=i[a];hi(h,f=>{s.push(f)})}}function op(i,s,a,c){if(!(i=Q(i)))return!1;let h=null,f=Fi(i);const y=!f&&R(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const E=i.ngModule;if(f=Fi(E),!f)return!1;h=E}const w=c.has(h);if(y){if(w)return!1;if(c.add(h),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)op(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;c.add(h);try{hi(f.imports,M=>{op(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&sp(T,s)}if(!w){const T=lr(h)||(()=>new h);s.push({provide:h,useFactory:T,deps:Et},{provide:Qu,useValue:h,multi:!0},{provide:Yu,useValue:()=>Hn(h),multi:!0})}const E=f.providers;null==E||w||hi(E,M=>{s.push(M)})}}return h!==i&&void 0!==i.providers}const v0=ge({provide:String,useValue:ge});function ap(i){return null!==i&&"object"==typeof i&&v0 in i}function yl(i){return"function"==typeof i}const Lm=new wn("Set Injector scope."),Vm={},up={};let Ju;function Xu(){return void 0===Ju&&(Ju=new gl),Ju}class xo{}class _0 extends xo{constructor(s,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Um(s,y=>this.processProvider(y)),this.records.set(rh,ec(void 0,this)),h.has("environment")&&this.records.set(xo,ec(void 0,this));const f=this.records.get(Lm);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Qu.multi,Et,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=ks(this),c=gn(void 0);try{return s()}finally{ks(a),gn(c)}}get(s,a=Ar,c=Ke.Default){this.assertNotDestroyed();const h=ks(this),f=gn(void 0);try{if(!(c&Ke.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=function LD(i){return"function"==typeof i||"object"==typeof i&&i instanceof wn}(s)&&hr(s);w=E&&this.injectableDefInScope(E)?ec(ih(s),Vm):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&Ke.Self?Xu():this.parent).get(s,a=c&Ke.Optional&&a===Ar?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[as]=y[as]||[]).unshift(le(s)),h)throw y;return function V(i,s,a,c){const h=i[as];throw s[pi]&&h.unshift(s[pi]),i.message=function Y(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=le(s);if(Array.isArray(s))h=s.map(le).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):le(w)))}h=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(ei,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[as]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{gn(f),ks(h)}}resolveInjectorInitializers(){const s=ks(this),a=gn(void 0);try{const c=this.get(Yu.multi,Et,Ke.Self);for(const h of c)h()}finally{ks(s),gn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(le(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(s){let a=yl(s=Q(s))?s:Q(s&&s.provide);const c=function kD(i){return ap(i)?ec(void 0,i.useValue):ec(w0(i),Vm)}(s);if(yl(s)||!0!==s.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=ec(void 0,Vm,!0),h.factory=()=>D(h.multi),this.records.set(a,h)),a=s,h.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Vm&&(a.value=up,a.value=a.factory()),"object"==typeof a.value&&a.value&&function I0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function ih(i){const s=hr(i),a=null!==s?s.factory:lr(i);if(null!==a)return a;if(i instanceof wn)throw new Ee(204,!1);if(i instanceof Function)return function cp(i){const s=i.length;if(s>0)throw function Mn(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Ee(204,!1);const a=function Sn(i){const s=i&&(i[Dr]||i[ui]);if(s){const a=function ki(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ee(204,!1)}function w0(i,s,a){let c;if(yl(i)){const h=Q(i);return lr(h)||ih(h)}if(ap(i))c=()=>Q(i.useValue);else if(function ml(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...D(i.deps||[]));else if(function Fm(i){return!(!i||!i.useExisting)}(i))c=()=>Hn(Q(i.useExisting));else{const h=Q(i&&(i.useClass||i.provide));if(!function FD(i){return!!i.deps}(i))return lr(h)||ih(h);c=()=>new h(...D(i.deps))}return c}function ec(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function $S(i){return!!i.\u0275providers}function Um(i,s){for(const a of i)Array.isArray(a)?Um(a,s):$S(a)?Um(a.\u0275providers,s):s(a)}class VD{}class jm{resolveComponentFactory(s){throw function Bm(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let sh=(()=>{class i{}return i.NULL=new jm,i})();function HS(){return vl(Kn(),Me())}function vl(i,s){return new Ca(dr(i,s))}let Ca=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=HS,i})();function lp(i){return i instanceof Ca?i.nativeElement:i}class $m{}let _l=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function GS(){const i=Me(),a=nn(Kn().index,i);return(Zn(a)?a:i)[11]}(),i})(),jD=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class Hm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const $D=new Hm("14.2.6"),C0={};function hp(i){return i.ngOriginalError}class ah{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&hp(s);for(;a&&hp(a);)a=hp(a);return a||null}}const Jm=new Map;let S0=0;const ey="__ngContext__";function jr(i,s){Zn(s)?(i[ey]=s[20],function Xm(i){Jm.set(i[20],i)}(s)):i[ey]=s}function Mo(i){return i instanceof Function?i():i}var Ro=(()=>((Ro=Ro||{})[Ro.Important=1]="Important",Ro[Ro.DashCase=2]="DashCase",Ro))();function ny(i,s){return undefined(i,s)}function gp(i){const s=i[3];return qr(s)?s[3]:s}function B0(i){return ds(i[13])}function mr(i){return ds(i[4])}function ds(i){for(;null!==i&&!qr(i);)i=i[4];return i}function ba(i,s,a,c,h){if(null!=c){let f,y=!1;qr(c)?f=c:Zn(c)&&(y=!0,c=c[0]);const w=xn(c);0===i&&null!==a?null==h?oy(s,a,w):No(s,a,w,h||null,!0):1===i&&null!==a?No(s,a,w,h||null,!0):2===i?function nc(i,s,a){const c=Bs(i,s);c&&function Aa(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function Z0(i,s,a,c,h){const f=a[7];f!==xn(a)&&ba(s,i,c,f,h);for(let w=10;w<a.length;w++){const E=a[w];hh(E[1],E,i,s,c,f)}}(s,i,f,a,h)}}function ry(i,s,a){return i.createElement(s,a)}function Dl(i,s){const a=i[9],c=a.indexOf(s),h=s[3];512&s[2]&&(s[2]&=-513,Rn(h,-1)),a.splice(c,1)}function Ta(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const h=c[17];null!==h&&h!==i&&Dl(h,c),s>0&&(i[a-1][4]=c[4]);const f=Pn(i,10+s);!function H0(i,s){hh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function sy(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&hh(i,s,a,3,null,null),function iy(i){let s=i[13];if(!s)return lh(i[1],i);for(;s;){let a=null;if(Zn(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Zn(s)&&lh(s[1],s),s=s[3];null===s&&(s=i),Zn(s)&&lh(s[1],s),a=s&&s[4]}s=a}}(s)}}function lh(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Sr(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=s[a[c]];if(!(h instanceof Qr)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=h[f[y]],E=f[y+1];try{E.call(w)}finally{}}else try{f.call(h)}finally{}}}}(i,s),function z0(i,s){const a=i.cleanup,c=s[7];let h=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(s):xn(s[y]),E=c[h=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],E,T):T>=0?c[h=T]():c[h=-T].unsubscribe(),f+=2}else{const y=c[h=a[f+1]];a[f].call(y)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&qr(s[3])){a!==s[3]&&Dl(a,s);const c=s[19];null!==c&&c.detachView(i)}!function YD(i){Jm.delete(i[20])}(s)}}function Cl(i,s,a){return function dh(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const h=i.data[c.directiveStart].encapsulation;if(h===dt.None||h===dt.Emulated)return null}return dr(c,a)}(i,s.parent,a)}function No(i,s,a,c,h){i.insertBefore(s,a,c,h)}function oy(i,s,a){i.appendChild(s,a)}function W0(i,s,a,c,h){null!==c?No(i,s,a,c,h):oy(i,s,a)}function Bs(i,s){return i.parentNode(s)}let ay=function mp(i,s,a){return 40&i.type?dr(i,a):null};function Tl(i,s,a,c){const h=Cl(i,c,s),f=s[11],w=function bl(i,s,a){return ay(i,s,a)}(c.parent||s[6],c,s);if(null!=h)if(Array.isArray(a))for(let E=0;E<a.length;E++)W0(f,h,a[E],w,!1);else W0(f,h,a,w,!1)}function Gt(i,s){if(null!==s){const a=s.type;if(3&a)return dr(s,i);if(4&a)return cy(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Gt(i,c);{const h=i[s.index];return qr(h)?cy(-1,h):xn(h)}}if(32&a)return ny(s,i)()||xn(i[s.index]);{const c=Al(i,s);return null!==c?Array.isArray(c)?c[0]:Gt(gp(i[16]),c):Gt(i,s.next)}}return null}function Al(i,s){return null!==s?i[16][6].projection[s.projection]:null}function cy(i,s){const a=10+i+1;if(a<s.length){const c=s[a],h=c[1].firstChild;if(null!==h)return Gt(c,h)}return s[7]}function ly(i,s,a,c,h,f,y){for(;null!=a;){const w=c[a.index],E=a.type;if(y&&0===s&&(w&&jr(xn(w),c),a.flags|=4),64!=(64&a.flags))if(8&E)ly(i,s,a.child,c,h,f,!1),ba(s,i,h,w,f);else if(32&E){const T=ny(a,c);let M;for(;M=T();)ba(s,i,h,M,f);ba(s,i,h,w,f)}else 16&E?dy(i,s,c,a,h,f):ba(s,i,h,w,f);a=y?a.projectionNext:a.next}}function hh(i,s,a,c,h,f){ly(a,c,i.firstChild,s,h,f,!1)}function dy(i,s,a,c,h,f){const y=a[16],E=y[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)ba(s,i,h,E[T],f);else ly(i,s,E,y[3],h,f,!0)}function uC(i,s,a){i.setAttribute(s,"style",a)}function yr(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Sa(i,s,a){let c=i.length;for(;;){const h=i.indexOf(s,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=s.length;if(h+f===c||i.charCodeAt(h+f)<=32)return h}a=h+1}}const Q0="ng-template";function cC(i,s,a){let c=0;for(;c<i.length;){let h=i[c++];if(a&&"class"===h){if(h=i[c],-1!==Sa(h.toLowerCase(),s,0))return!0}else if(1===h){for(;c<i.length&&"string"==typeof(h=i[c++]);)if(h.toLowerCase()===s)return!0;return!1}}return!1}function hy(i){return 4===i.type&&i.value!==Q0}function J0(i,s,a){return s===(4!==i.type||a?i.value:Q0)}function lC(i,s,a){let c=4;const h=i.attrs||[],f=function yp(i){for(let s=0;s<i.length;s++)if(la(i[s]))return s;return i.length}(h);let y=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!y)if(4&c){if(c=2|1&c,""!==E&&!J0(i,E,a)||""===E&&1===s.length){if(hs(c))return!1;y=!0}}else{const T=8&c?E:s[++w];if(8&c&&null!==i.attrs){if(!cC(i.attrs,T,a)){if(hs(c))return!1;y=!0}continue}const F=dC(8&c?"class":E,h,hy(i),a);if(-1===F){if(hs(c))return!1;y=!0;continue}if(""!==T){let $;$=F>f?"":h[F+1].toLowerCase();const ne=8&c?$:null;if(ne&&-1!==Sa(ne,T,0)||2&c&&T!==$){if(hs(c))return!1;y=!0}}}}else{if(!y&&!hs(c)&&!hs(E))return!1;if(y&&hs(E))continue;y=!1,c=E|1&c}}return hs(c)||y}function hs(i){return 0==(1&i)}function dC(i,s,a,c){if(null===s)return-1;let h=0;if(c||!a){let f=!1;for(;h<s.length;){const y=s[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++h];for(;"string"==typeof w;)w=s[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function rc(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function fy(i,s,a=!1){for(let c=0;c<s.length;c++)if(lC(i,s[c],a))return!0;return!1}function Sl(i,s){return i?":not("+s.trim()+")":s}function hC(i){let s=i[0],a=1,c=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!hs(y)&&(s+=Sl(f,h),h=""),c=y,f=f||!hs(c);a++}return""!==h&&(s+=Sl(f,h)),s}const kt={};function vp(i){ew(zt(),Me(),bn()+i,!1)}function ew(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&uo(s,f,a)}else{const f=i.preOrderHooks;null!==f&&co(s,f,0,a)}zi(a)}function rw(i,s=null,a=null,c){const h=iw(i,s,a,c);return h.resolveInjectorInitializers(),h}function iw(i,s=null,a=null,c,h=new Set){const f=[a||Et,Om(i)];return c=c||("object"==typeof i?void 0:le(i)),new _0(f,s||Xu(),c||null,h)}let sc=(()=>{class i{static create(a,c){if(Array.isArray(a))return rw({name:""},c,a,"");{const h=a.name??"";return rw({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Ar,i.NULL=new gl,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>Hn(rh)}),i.__NG_ELEMENT_ID__=-1,i})();function oc(i,s=Ke.Default){const a=Me();return null===a?Hn(i,s):po(Kn(),a,Q(i),s)}function wy(){throw new Error("invalid")}function Ol(i,s){return i<<17|s<<2}function $r(i){return i>>17&32767}function Iy(i){return 2|i}function xa(i){return(131068&i)>>2}function Ey(i,s){return-131069&i|s<<2}function Dy(i){return 1|i}function bC(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],f=a[c+1];if(-1!==f){const y=i.data[f];Ru(h),y.contentQueries(2,s[f],f)}}}function Fl(i,s,a,c,h,f,y,w,E,T,M){const F=s.blueprint.slice();return F[0]=h,F[2]=76|c,(null!==M||i&&1024&i[2])&&(F[2]|=1024),Xo(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=E||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function KD(){return S0++}(),F[21]=M,F[16]=2==s.type?i[16]:F,F}function Ll(i,s,a,c,h){let f=i.data[s];if(null===f)f=function My(i,s,a,c,h){const f=io(),y=za(),E=i.data[s]=function AC(i,s,a,c,h,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,h);return null===i.firstChild&&(i.firstChild=E),null!==f&&(y?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,h),function Gc(){return At.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=h;const y=function Ga(){const i=At.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return br(f,!0),f}function Vl(i,s,a,c){if(0===a)return-1;const h=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return h}function Eh(i,s,a){ao(s);try{const c=i.viewQuery;null!==c&&Gl(1,c,a);const h=i.template;null!==h&&Ry(i,s,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&bC(i,s),i.staticViewQueries&&Gl(2,i.viewQuery,a);const f=i.components;null!==f&&function hx(i,s){for(let a=0;a<s.length;a++)VC(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,ns()}}function wi(i,s,a,c){const h=s[2];if(128!=(128&h)){ao(s);try{Xo(s),function sa(i){return At.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ry(i,s,a,2,c);const y=3==(3&h);if(y){const T=i.preOrderCheckHooks;null!==T&&uo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&co(s,T,0,null),Yc(s,0)}if(function Pp(i){for(let s=B0(i);null!==s;s=mr(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const h=a[c],f=h[3];0==(512&h[2])&&Rn(f,1),h[2]|=512}}}(s),function Uy(i){for(let s=B0(i);null!==s;s=mr(s))for(let a=10;a<s.length;a++){const c=s[a],h=c[1];ts(c)&&wi(h,c,h.template,c[8])}}(s),null!==i.contentQueries&&bC(i,s),y){const T=i.contentCheckHooks;null!==T&&uo(s,T)}else{const T=i.contentHooks;null!==T&&co(s,T,1),Yc(s,1)}!function lx(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)zi(~h);else{const f=h,y=a[++c],w=a[++c];zc(y,f),w(2,s[f])}}}finally{zi(-1)}}(i,s);const w=i.components;null!==w&&function dx(i,s){for(let a=0;a<s.length;a++)LC(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&Gl(2,E,c),y){const T=i.viewCheckHooks;null!==T&&uo(s,T)}else{const T=i.viewHooks;null!==T&&co(s,T,2),Yc(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Rn(s[3],-1))}finally{ns()}}}function Ry(i,s,a,c,h){const f=bn(),y=2&c;try{zi(-1),y&&s.length>22&&ew(i,s,22,!1),a(c,h)}finally{zi(f)}}function Ul(i,s,a){if(Ks(s)){const h=s.directiveEnd;for(let f=s.directiveStart;f<h;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function Ny(i,s,a){!Ms()||(function Fy(i,s,a,c){const h=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||qi(a,s),jr(c,s);const y=a.initialInputs;for(let w=h;w<f;w++){const E=i.data[w],T=Lr(E);T&&kC(s,a,E);const M=Si(s,i,w,a);jr(M,s),null!==y&&xw(0,w-h,M,E,0,y),T&&(nn(a.index,s)[8]=M)}}(i,s,a,dr(a,s)),128==(128&a.flags)&&function Op(i,s,a){const c=a.directiveStart,h=a.directiveEnd,f=a.index,y=function kd(){return At.lFrame.currentDirectiveIndex}();try{zi(f);for(let w=c;w<h;w++){const E=i.data[w],T=s[w];oo(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&uc(E,T)}}finally{zi(-1),oo(y)}}(i,s,a))}function Oy(i,s,a=dr){const c=s.localNames;if(null!==c){let h=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(s,i):i[y];i[h++]=w}}}function Py(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Bl(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Bl(i,s,a,c,h,f,y,w,E,T){const M=22+c,F=M+h,$=function TC(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:kt);return a}(M,F),ne="function"==typeof T?T():T;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:w,declTNode:s,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:ne,incompleteFirstPass:!1}}function $l(i,s,a,c){const h=zl(s);null===a?h.push(c):(h.push(a),i.firstCreatePass&&$y(i).push(c,h.length-1))}function Cw(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const h=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,h):a[c]=[s,h]}return a}function Hl(i,s){const c=s.directiveEnd,h=i.data,f=s.attrs,y=[];let w=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=h[T],F=M.inputs,$=null===f||hy(s)?null:FC(F,f);y.push($),w=Cw(F,T,w),E=Cw(M.outputs,T,E)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=E}function Zi(i,s,a,c,h,f,y,w){const E=dr(s,a);let M,T=s.inputs;!w&&null!=T&&(M=T[c])?(Hy(i,a,M,c,h),Iu(s)&&bw(a,s.index)):3&s.type&&(c=function Dh(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=y?y(h,s.value||"",c):h,f.setProperty(E,c,h))}function bw(i,s){const a=nn(s,i);16&a[2]||(a[2]|=32)}function ky(i,s,a,c){let h=!1;if(Ms()){const f=function NC(i,s,a){const c=i.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];fy(a,y.selectors,!1)&&(h||(h=[]),Os(qi(a,s),i,y.type),Lr(y)?(Tw(i,a),h.unshift(y)):h.push(y))}return h}(i,s,a),y=null===c?null:{"":-1};if(null!==f){h=!0,Aw(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const F=f[M];F.providersResolver&&F.providersResolver(F)}let w=!1,E=!1,T=Vl(i,s,f.length,null);for(let M=0;M<f.length;M++){const F=f[M];a.mergedAttrs=da(a.mergedAttrs,F.hostAttrs),Sw(i,a,s,T,F),PC(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const $=F.type.prototype;!w&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}Hl(i,a)}y&&function OC(i,s,a){if(s){const c=i.localNames=[];for(let h=0;h<s.length;h+=2){const f=a[s[h+1]];if(null==f)throw new Ee(-301,!1);c.push(s[h],f)}}}(a,c,y)}return a.mergedAttrs=da(a.mergedAttrs,a.attrs),h}function MC(i,s,a,c,h,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~s.index;(function RC(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(c,h,y)}}function uc(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Tw(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function PC(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Lr(s)&&(a[""]=i)}}function Aw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Sw(i,s,a,c,h){i.data[c]=h;const f=h.factory||(h.factory=lr(h.type)),y=new Qr(f,Lr(h),oc);i.blueprint[c]=y,a[c]=y,MC(i,s,0,c,Vl(i,a,h.hostVars,kt),h)}function kC(i,s,a){const c=dr(s,i),h=Py(a),f=i[10],y=cc(i,Fl(i,h,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=y}function ko(i,s,a,c,h,f){const y=dr(i,s);!function Ly(i,s,a,c,h,f,y){if(null==f)i.removeAttribute(s,h,a);else{const w=null==y?_e(f):y(f,c||"",h);i.setAttribute(s,h,w,a)}}(s[11],y,f,i.value,a,c,h)}function xw(i,s,a,c,h,f){const y=f[s];if(null!==y){const w=c.setInput;for(let E=0;E<y.length;){const T=y[E++],M=y[E++],F=y[E++];null!==w?c.setInput(a,F,T,M):a[M]=F}}}function FC(i,s){let a=null,c=0;for(;c<s.length;){const h=s[c];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Vy(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function LC(i,s){const a=nn(s,i);if(ts(a)){const c=a[1];48&a[2]?wi(c,a,c.template,a[8]):a[5]>0&&By(a)}}function By(i){for(let c=B0(i);null!==c;c=mr(c))for(let h=10;h<c.length;h++){const f=c[h];if(ts(f))if(512&f[2]){const y=f[1];wi(y,f,y.template,f[8])}else f[5]>0&&By(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=nn(a[c],i);ts(h)&&h[5]>0&&By(h)}}function VC(i,s){const a=nn(s,i),c=a[1];(function UC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Eh(c,a,a[8])}function cc(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function kp(i){for(;i;){i[2]|=32;const s=gp(i);if(Eu(i)&&!s)return i;i=s}return null}function Ch(i,s,a,c=!0){const h=s[10];h.begin&&h.begin();try{wi(i,s,i.template,a)}catch(y){throw c&&Nw(s,y),y}finally{h.end&&h.end()}}function Gl(i,s,a){Ru(0),s(i,a)}function zl(i){return i[7]||(i[7]=[])}function $y(i){return i.cleanup||(i.cleanup=[])}function Nw(i,s){const a=i[9],c=a?a.get(ah,null):null;c&&c.handleError(s)}function Hy(i,s,a,c,h){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],E=s[y],T=i.data[y];null!==T.setInput?T.setInput(E,h,c,w):E[w]=h}}function Fp(i,s,a){let c=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?h=me(h,w):2==f&&(c=me(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function lc(i,s,a,c,h=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(xn(f)),qr(f))for(let w=10;w<f.length;w++){const E=f[w],T=E[1].firstChild;null!==T&&lc(E[1],E,T,c)}const y=a.type;if(8&y)lc(i,s,a.child,c);else if(32&y){const w=ny(a,s);let E;for(;E=w();)c.push(E)}else if(16&y){const w=Al(s,a);if(Array.isArray(w))c.push(...w);else{const E=gp(s[16]);lc(E[1],E,w,c,!0)}}a=h?a.projectionNext:a.next}return c}class bh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return lc(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(qr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Ta(s,c),Pn(a,c))}this._attachedToViewContainer=!1}sy(this._lView[1],this._lView)}onDestroy(s){$l(this._lView[1],this._lView,null,s)}markForCheck(){kp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ch(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sC(i,s){hh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=s}}class jC extends bh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ch(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Gy extends sh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=R(s);return new Th(a,this.ngModule)}}function Ow(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class HC{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const h=this.injector.get(s,C0,c);return h!==C0||a===C0?h:this.parentInjector.get(s,a,c)}}class Th extends VD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ic(i){return i.map(hC).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ow(this.componentDef.inputs)}get outputs(){return Ow(this.componentDef.outputs)}create(s,a,c,h){let f=(h=h||this.ngModule)instanceof xo?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new HC(s,f):s,w=y.get($m,null);if(null===w)throw new Ee(407,!1);const E=y.get(jD,null),T=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=c?function jl(i,s,a){return i.selectRootElement(s,a===dt.ShadowDom)}(T,c,this.componentDef.encapsulation):ry(w.createRenderer(null,this.componentDef),M,function $C(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),$=this.componentDef.onPush?288:272,ne=Bl(0,null,null,1,0,null,null,null,null,null),ve=Fl(null,ne,null,$,null,null,w,T,E,y,null);let Ae,Ge;ao(ve);try{const it=function Fw(i,s,a,c,h,f){const y=a[1];a[22]=i;const E=Ll(y,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(Fp(E,T,!0),null!==i&&(Wi(h,i,T),null!==E.classes&&yr(h,i,E.classes),null!==E.styles&&uC(h,i,E.styles)));const M=c.createRenderer(i,s),F=Fl(a,Py(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return y.firstCreatePass&&(Os(qi(E,a),y,s.type),Tw(y,E),Aw(E,a.length,1)),cc(a,F),a[22]=F}(F,this.componentDef,ve,w,T);if(F)if(c)Wi(T,F,["ng-version",$D.full]);else{const{attrs:wt,classes:xe}=function fC(i){const s=[],a=[];let c=1,h=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===h?""!==f&&s.push(f,i[++c]):8===h&&a.push(f);else{if(!hs(h))break;h=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);wt&&Wi(T,F,wt),xe&&xe.length>0&&yr(T,F,xe.join(" "))}if(Ge=xs(ne,22),void 0!==a){const wt=Ge.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const Tt=a[xe];wt.push(null!=Tt?Array.from(Tt):null)}}Ae=function Lw(i,s,a,c){const h=a[1],f=function xC(i,s,a){const c=Kn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Sw(i,c,s,Vl(i,s,1,null),a),Hl(i,c));const h=Si(s,i,c.directiveStart,c);jr(h,s);const f=dr(c,s);return f&&jr(f,s),h}(h,a,s);if(i[8]=a[8]=f,null!==c)for(const w of c)w(f,s);if(s.contentQueries){const w=Kn();s.contentQueries(1,f,w.directiveStart)}const y=Kn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(zi(y.index),MC(a[1],y,0,y.directiveStart,y.directiveEnd,s),uc(s,f)),f}(it,this.componentDef,ve,[Vw]),Eh(ne,ve,null)}finally{ns()}return new kw(this.componentType,Ae,vl(Ge,ve),ve,Ge)}}class kw extends class E0{}{constructor(s,a,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new jC(h),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[s])){const f=this._rootLView;Hy(f[1],f,h,s,a),bw(f,this._tNode.index)}}get injector(){return new mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Vw(){const i=Kn();Wa(Me()[1],i)}function zy(i){let s=function Uw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let h;if(Lr(i))h=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ee(903,!1);h=s.\u0275dir}if(h){if(a){c.push(h);const y=i;y.inputs=Wy(i.inputs),y.declaredInputs=Wy(i.declaredInputs),y.outputs=Wy(i.outputs);const w=h.hostBindings;w&&Bw(i,w);const E=h.viewQuery,T=h.contentQueries;if(E&&WC(i,E),T&&qC(i,T),de(i.inputs,h.inputs),de(i.declaredInputs,h.declaredInputs),de(i.outputs,h.outputs),Lr(h)&&h.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===zy&&(a=!1)}}s=Object.getPrototypeOf(s)}!function zC(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=s+=h.hostVars,h.hostAttrs=da(h.hostAttrs,a=da(a,h.hostAttrs))}}(c)}function Wy(i){return i===fr?{}:i===Et?[]:i}function WC(i,s){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{s(c,h),a(c,h)}:s}function qC(i,s){const a=i.contentQueries;i.contentQueries=a?(c,h,f)=>{s(c,h,f),a(c,h,f)}:s}function Bw(i,s){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{s(c,h),a(c,h)}:s}let Zy=null;function dc(){if(!Zy){const i=Dt.Symbol;if(i&&i.iterator)Zy=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Zy=c)}}}return Zy}function Ah(i){return!!Vp(i)&&(Array.isArray(i)||!(i instanceof Map)&&dc()in i)}function Vp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function fs(i,s,a){return i[s]=a}function ni(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Fo(i,s,a,c){const h=ni(i,s,a);return ni(i,s+1,c)||h}function Yy(i,s,a,c){const h=Me();return ni(h,oa(),s)&&(zt(),ko(Tn(),h,i,s,a,c)),Yy}function jp(i,s,a,c,h,f,y,w){const E=Me(),T=zt(),M=i+22,F=T.firstCreatePass?function Yl(i,s,a,c,h,f,y,w,E){const T=s.consts,M=Ll(s,i,4,y||null,Yr(T,w));ky(s,a,M,Yr(T,E)),Wa(s,M);const F=M.tViews=Bl(2,M,c,h,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),F.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,h,f,y):T.data[M];br(F,!1);const $=E[11].createComment("");Tl(T,E,$,F),jr($,E),cc(E,E[M]=Vy($,E,$,F)),Ko(F)&&Ny(T,E,F),null!=y&&Oy(E,F,w)}function $p(i,s,a){const c=Me();return ni(c,oa(),s)&&Zi(zt(),Tn(),c,i,s,c[11],a,!1),$p}function Mh(i,s,a,c,h){const y=h?"class":"style";Hy(i,a,s.inputs[y],y,c)}function Hp(i,s,a,c){const h=Me(),f=zt(),y=22+i,w=h[11],E=h[y]=ry(w,s,function Pu(){return At.lFrame.currentNamespace}()),T=f.firstCreatePass?function JC(i,s,a,c,h,f,y){const w=s.consts,T=Ll(s,i,2,h,Yr(w,f));return ky(s,a,T,Yr(w,y)),null!==T.attrs&&Fp(T,T.attrs,!1),null!==T.mergedAttrs&&Fp(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,f,h,0,s,a,c):f.data[y];br(T,!0);const M=T.mergedAttrs;null!==M&&Wi(w,E,M);const F=T.classes;null!==F&&yr(w,E,F);const $=T.styles;return null!==$&&uC(w,E,$),64!=(64&T.flags)&&Tl(f,h,E,T),0===function ta(){return At.lFrame.elementDepthCount}()&&jr(E,h),function Hc(){At.lFrame.elementDepthCount++}(),Ko(T)&&(Ny(f,h,T),Ul(f,T,h)),null!==c&&Oy(h,T),Hp}function Gp(){let i=Kn();za()?so():(i=i.parent,br(i,!1));const s=i;!function na(){At.lFrame.elementDepthCount--}();const a=zt();return a.firstCreatePass&&(Wa(a,i),Ks(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Za(i){return 0!=(16&i.flags)}(s)&&Mh(a,s,Me(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ka(i){return 0!=(32&i.flags)}(s)&&Mh(a,s,Me(),s.stylesWithoutHost,!1),Gp}function zp(i,s,a,c){return Hp(i,s,a,c),Gp(),zp}function Xy(i,s,a){const c=Me(),h=zt(),f=i+22,y=h.firstCreatePass?function XC(i,s,a,c,h){const f=s.consts,y=Yr(f,c),w=Ll(s,i,8,"ng-container",y);return null!==y&&Fp(w,y,!0),ky(s,a,w,Yr(f,h)),null!==s.queries&&s.queries.elementStart(s,w),w}(f,h,c,s,a):h.data[f];br(y,!0);const w=c[f]=c[11].createComment("");return Tl(h,c,w,y),jr(w,c),Ko(y)&&(Ny(h,c,y),Ul(h,y,c)),null!=a&&Oy(c,y),Xy}function pc(){let i=Kn();const s=zt();return za()?so():(i=i.parent,br(i,!1)),s.firstCreatePass&&(Wa(s,i),Ks(i)&&s.queries.elementEnd(i)),pc}function ev(){return Me()}function tv(i){return!!i&&"function"==typeof i.then}function qw(i){return!!i&&"function"==typeof i.subscribe}const nv=qw;function rv(i,s,a,c){const h=Me(),f=zt(),y=Kn();return function Kw(i,s,a,c,h,f,y,w){const E=Ko(c),M=i.firstCreatePass&&$y(i),F=s[8],$=zl(s);let ne=!0;if(3&c.type||w){const Ge=dr(c,s),it=w?w(Ge):Ge,wt=$.length,xe=w?Qt=>w(xn(Qt[c.index])):c.index;let Tt=null;if(!w&&E&&(Tt=function tb(i,s,a,c){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===c){const w=s[7],E=h[f+2];return w.length>E?w[E]:null}"string"==typeof y&&(f+=2)}return null}(i,s,h,c.index)),null!==Tt)(Tt.__ngLastListenerFn__||Tt).__ngNextListenerFn__=f,Tt.__ngLastListenerFn__=f,ne=!1;else{f=iv(c,s,F,f,!1);const Qt=a.listen(it,h,f);$.push(f,Qt),M&&M.push(h,xe,wt,wt+1)}}else f=iv(c,s,F,f,!1);const ve=c.outputs;let Ae;if(ne&&null!==ve&&(Ae=ve[h])){const Ge=Ae.length;if(Ge)for(let it=0;it<Ge;it+=2){const Cn=s[Ae[it]][Ae[it+1]].subscribe(f),qs=$.length;$.push(f,Cn),M&&M.push(h,c.index,qs,-(qs+1))}}}(f,h,h[11],y,i,s,0,c),rv}function Yw(i,s,a,c){try{return!1!==a(c)}catch(h){return Nw(i,h),!1}}function iv(i,s,a,c,h){return function f(y){if(y===Function)return c;kp(2&i.flags?nn(i.index,s):s);let E=Yw(s,0,c,y),T=f.__ngNextListenerFn__;for(;T;)E=Yw(s,0,T,y)&&E,T=T.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function Qw(i=1){return function rs(i){return(At.lFrame.contextLView=function Zc(i,s){for(;i>0;)s=s[15],i--;return s}(i,At.lFrame.contextLView))[8]}(i)}function ib(i,s,a,c,h){const f=i[a+1],y=null===s;let w=c?$r(f):xa(f),E=!1;for(;0!==w&&(!1===E||y);){const M=i[w+1];sb(i[w],s)&&(E=!0,i[w+1]=c?Dy(M):Iy(M)),w=c?$r(M):xa(M)}E&&(i[a+1]=c?Iy(f):Dy(f))}function sb(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ni(i,s)>=0}const xr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ob(i){return i.substring(xr.key,xr.keyEnd)}function Vo(i,s){const a=xr.textEnd;return a===s?-1:(s=xr.keyEnd=function ab(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,xr.key=s,a),gc(i,s,a))}function gc(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function sv(i,s,a){return js(i,s,a,!1),sv}function ov(i,s){return js(i,s,null,!0),ov}function sI(i){!function $s(i,s,a,c){const h=zt(),f=Gi(2);h.firstUpdatePass&&Nh(h,null,f,c);const y=Me();if(a!==kt&&ni(y,f,a)){const w=h.data[bn()];if(cv(w,c)&&!ri(h,f)){let E=c?w.classesWithoutHost:w.stylesWithoutHost;null!==E&&(a=me(E,a||"")),Mh(h,w,y,a,c)}else!function lb(i,s,a,c,h,f,y,w){h===kt&&(h=Et);let E=0,T=0,M=0<h.length?h[0]:null,F=0<f.length?f[0]:null;for(;null!==M||null!==F;){const $=E<h.length?h[E+1]:void 0,ne=T<f.length?f[T+1]:void 0;let Ae,ve=null;M===F?(E+=2,T+=2,$!==ne&&(ve=F,Ae=ne)):null===F||null!==M&&M<F?(E+=2,ve=M):(T+=2,ve=F,Ae=ne),null!==ve&&uI(i,s,a,c,ve,Ae,y,w),M=E<h.length?h[E]:null,F=T<f.length?f[T]:null}}(h,w,y,y[11],y[f+1],y[f+1]=function cb(i,s,a){if(null==a||""===a)return Et;const c=[],h=cs(a);if(Array.isArray(h))for(let f=0;f<h.length;f++)i(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&i(c,f,h[f]);else"string"==typeof h&&s(c,h);return c}(i,s,a),c,f)}}(Tr,Bo,i,!0)}function Bo(i,s){for(let a=function Ie(i){return function Pa(i){xr.key=0,xr.keyEnd=0,xr.value=0,xr.valueEnd=0,xr.textEnd=i.length}(i),Vo(i,gc(i,0,xr.textEnd))}(s);a>=0;a=Vo(s,a))Tr(i,ob(s),!0)}function js(i,s,a,c){const h=Me(),f=zt(),y=Gi(2);f.firstUpdatePass&&Nh(f,i,y,c),s!==kt&&ni(h,y,s)&&uI(f,f.data[bn()],h,h[11],i,h[y+1]=function Yp(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(cs(i)))),i}(s,a),c,y)}function ri(i,s){return s>=i.expandoStartIndex}function Nh(i,s,a,c){const h=i.data;if(null===h[a+1]){const f=h[bn()],y=ri(i,a);cv(f,c)&&null===s&&!y&&(s=!1),s=function oI(i,s,a,c){const h=Mu(i);let f=c?s.residualClasses:s.residualStyles;if(null===h)0===(c?s.classBindings:s.styleBindings)&&(a=Ph(a=Oh(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==h)if(a=Oh(h,i,s,a,c),null===f){let E=function av(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==xa(c))return i[$r(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Oh(null,i,s,E[1],c),E=Ph(E,s.attrs,c),function Kp(i,s,a,c){i[$r(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function uv(i,s,a){let c;const h=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<h;f++)c=Ph(c,i[f].hostAttrs,a);return Ph(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(h,f,s,c),function wx(i,s,a,c,h,f){let y=f?s.classBindings:s.styleBindings,w=$r(y),E=xa(y);i[c]=a;let M,T=!1;if(Array.isArray(a)){const F=a;M=F[1],(null===M||Ni(F,M)>0)&&(T=!0)}else M=a;if(h)if(0!==E){const $=$r(i[w+1]);i[c+1]=Ol($,w),0!==$&&(i[$+1]=Ey(i[$+1],c)),i[w+1]=function fw(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Ol(w,0),0!==w&&(i[w+1]=Ey(i[w+1],c)),w=c;else i[c+1]=Ol(E,0),0===w?w=c:i[E+1]=Ey(i[E+1],c),E=c;T&&(i[c+1]=Iy(i[c+1])),ib(i,M,c,!0),ib(i,M,c,!1),function Ix(i,s,a,c,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Ni(f,s)>=0&&(a[c+1]=Dy(a[c+1]))}(s,M,i,c,f),y=Ol(w,E),f?s.classBindings=y:s.styleBindings=y}(h,f,s,a,y,c)}}function Oh(i,s,a,c,h){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=s[w],c=Ph(c,f.hostAttrs,h),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function Ph(i,s,a){const c=a?1:2;let h=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?h=y:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Tr(i,y,!!a||s[++f]))}return void 0===i?null:i}function uI(i,s,a,c,h,f,y,w){if(!(3&s.type))return;const E=i.data,T=E[w+1];kh(function pw(i){return 1==(1&i)}(T)?Ql(E,s,a,h,xa(T),y):void 0)||(kh(f)||function _h(i){return 2==(2&i)}(T)&&(f=Ql(E,null,a,h,w,y)),function K0(i,s,a,c,h){if(s)h?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Ro.DashCase;null==h?i.removeStyle(a,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=Ro.Important),i.setStyle(a,c,h,f))}}(c,y,li(bn(),a),h,f))}function Ql(i,s,a,c,h,f){const y=null===s;let w;for(;h>0;){const E=i[h],T=Array.isArray(E),M=T?E[1]:E,F=null===M;let $=a[h+1];$===kt&&($=F?Et:void 0);let ne=F?$u($,c):M===c?$:void 0;if(T&&!kh(ne)&&(ne=$u(E,c)),kh(ne)&&(w=ne,y))return w;const ve=i[h+1];h=y?$r(ve):xa(ve)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(w=$u(E,c))}return w}function kh(i){return void 0!==i}function cv(i,s){return 0!=(i.flags&(s?16:32))}function cI(i,s=""){const a=Me(),c=zt(),h=i+22,f=c.firstCreatePass?Ll(c,h,1,s,null):c.data[h],y=a[h]=function tc(i,s){return i.createText(s)}(a[11],s);Tl(c,a,y,f),br(f,!1)}function lv(i){return Qp("",i,""),lv}function Qp(i,s,a){const c=Me(),h=function ql(i,s,a,c){return ni(i,oa(),a)?s+_e(a)+c:kt}(c,i,s,a);return h!==kt&&function Na(i,s,a){const c=li(s,i);!function j0(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,bn(),h),Qp}function ed(i,s,a){const c=Me();if(ni(c,oa(),s)){const f=zt(),y=Tn();Zi(f,y,c,i,s,function Rw(i,s,a){return(null===i||Lr(i))&&(a=function $c(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(a[s.index])),a[11]}(Mu(f.data),y,c),a,!0)}return ed}const cu=void 0;var Ev=["en",[["a","p"],["AM","PM"],cu],[["AM","PM"],cu,cu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cu,"{1} 'at' {0}",cu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let td={};function Dv(i){const s=function Cx(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=bv(s);if(a)return a;const c=s.split("-")[0];if(a=bv(c),a)return a;if("en"===c)return Ev;throw new Ee(701,!1)}function Cv(i){return Dv(i)[It.PluralCase]}function bv(i){return i in td||(td[i]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[i]),td[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Fh="en-US";let Sv=Fh;function PI(i,s,a,c,h){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)PI(i[f],s,a,c,h);else{const f=zt(),y=Me();let w=yl(i)?i:Q(i.provide),E=w0(i);const T=Kn(),M=1048575&T.providerIndexes,F=T.directiveStart,$=T.providerIndexes>>20;if(yl(i)||!i.multi){const ne=new Qr(E,h,oc),ve=at(w,s,h?M:M+$,F);-1===ve?(Os(qi(T,y),f,w),Nv(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(ne),y.push(ne)):(a[ve]=ne,y[ve]=ne)}else{const ne=at(w,s,M+$,F),ve=at(w,s,M,M+$),Ae=ne>=0&&a[ne],Ge=ve>=0&&a[ve];if(h&&!Ge||!h&&!Ae){Os(qi(T,y),f,w);const it=function ug(i,s,a,c,h){const f=new Qr(i,a,oc);return f.multi=[],f.index=s,f.componentProviders=0,jo(f,h,c&&!a),f}(h?Ft:Ov,a.length,h,c,E);!h&&Ge&&(a[ve].providerFactory=it),Nv(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(it),y.push(it)}else Nv(f,i,ne>-1?ne:ve,jo(a[h?ve:ne],E,!h&&c));!h&&c&&Ge&&a[ve].componentProviders++}}}function Nv(i,s,a,c){const h=yl(s),f=function jS(i){return!!i.useClass}(s);if(h||f){const E=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!h&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function jo(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function at(i,s,a,c){for(let h=a;h<c;h++)if(s[h]===i)return h;return-1}function Ov(i,s,a,c){return rd(this.multi,[])}function Ft(i,s,a,c){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Si(a,a[1],this.providerFactory.index,c);f=w.slice(0,y),rd(h,f);for(let E=y;E<w.length;E++)f.push(w[E])}else f=[],rd(h,f);return f}function rd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function id(i,s=[]){return a=>{a.providersResolver=(c,h)=>function iM(i,s,a){const c=zt();if(c.firstCreatePass){const h=Lr(i);PI(a,c.data,c.blueprint,h,!0),PI(s,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,s)}}class sd{}class cg{}function zb(i,s){return new kI(i,s??null)}class kI extends sd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gy(this);const c=nt(s);this._bootstrapComponents=Mo(c.bootstrap),this._r3Injector=iw(s,a,[{provide:sd,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Mr extends cg{constructor(s){super(),this.moduleType=s}create(s){return new kI(this.moduleType,s)}}class lg extends sd{constructor(s,a,c){super(),this.componentFactoryResolver=new Gy(this),this.instance=null;const h=new _0([...s,{provide:sd,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],a||Xu(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function _r(i,s,a=null){return new lg(i,s,a).injector}let du=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Pm(0,a.type),h=c.length>0?_r([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=en({token:i,providedIn:"environment",factory:()=>new i(Hn(xo))}),i})();function FI(i){i.getStandaloneInjector=s=>s.get(du).getOrCreateStandaloneInjector(i)}function UI(i,s,a){const c=Yn()+i,h=Me();return h[c]===kt?fs(h,c,a?s.call(a):s()):function Sh(i,s){return i[s]}(h,c)}function Bh(i,s){const a=i[s];return a===kt?void 0:a}function ad(i,s,a,c,h,f,y,w){const E=s+a;return function Up(i,s,a,c,h){const f=Fo(i,s,a,c);return ni(i,s+2,h)||f}(i,E,h,f,y)?fs(i,E+3,w?c.call(w,h,f,y):c(h,f,y)):Bh(i,E+3)}function jh(i,s){const a=zt();let c;const h=i+22;a.firstCreatePass?(c=function Hv(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,c.onDestroy)):c=a.data[h];const f=c.factory||(c.factory=lr(c.type)),y=gn(oc);try{const w=ha(!1),E=f();return ha(w),function yx(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Me(),h,E),E}finally{gn(y)}}function Gv(i,s,a,c){const h=i+22,f=Me(),y=Ti(f,h);return mc(f,h)?function $I(i,s,a,c,h,f,y){const w=s+a;return Fo(i,w,h,f)?fs(i,w+2,y?c.call(y,h,f):c(h,f)):Bh(i,w+2)}(f,Yn(),s,y.transform,a,c,y):y.transform(a,c)}function $h(i,s,a,c,h){const f=i+22,y=Me(),w=Ti(y,f);return mc(y,f)?ad(y,Yn(),s,w.transform,a,c,h,w):w.transform(a,c,h)}function mc(i,s){return i[1].data[s].pure}function gg(i){return s=>{setTimeout(i,void 0,s)}}const Hs=class qv extends l.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let h=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const E=s;h=E.next?.bind(E),f=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(f=gg(f),h&&(h=gg(h)),y&&(y=gg(y)));const w=super.subscribe({next:h,error:f,complete:y});return s instanceof B.w0&&s.add(w),w}};function Xb(){return this._results[dc()]()}class mg{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=dc(),c=mg.prototype;c[a]||(c[a]=Xb)}get changes(){return this._changes||(this._changes=new Hs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const h=an(s);(this._changesDetected=!function Jr(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],f=s[c];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ud=(()=>{class i{}return i.__NG_ELEMENT_ID__=eT,i})();const Zv=ud,WI=class extends Zv{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,h=Fl(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),Eh(c,h,s),new bh(h)}};function eT(){return cd(Kn(),Me())}function cd(i,s){return 4&i.type?new WI(s,i,vl(i,s)):null}let ld=(()=>{class i{}return i.__NG_ELEMENT_ID__=Kv,i})();function Kv(){return qI(Kn(),Me())}const Rr=ld,Nr=class extends Rr{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return vl(this._hostTNode,this._hostLView)}get injector(){return new mo(this._hostTNode,this._hostLView)}get parentInjector(){const s=fa(this._hostTNode,this._hostLView);if(Bd(s)){const a=is(s,this._hostLView),c=Qn(s);return new mo(a[1].data[c+8],a)}return new mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Hh(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const y=s.createEmbeddedView(a||{},f);return this.insert(y,h),y}createComponent(s,a,c,h,f){const y=s&&!function hn(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const F=a||{};w=F.index,c=F.injector,h=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const E=y?s:new Th(R(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const $=(y?T:this.parentInjector).get(xo,null);$&&(f=$)}const M=E.create(T,h,void 0,f);return this.insert(M.hostView,w),M}insert(s,a){const c=s._lView,h=c[1];if(function Su(i){return qr(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const F=c[3],$=new Nr(F,F[6],F[3]);$.detach($.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function G0(i,s,a,c){const h=10+c,f=a.length;c>0&&(a[h-1][4]=s),c<f-10?(s[4]=a[h],fi(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function oC(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(h,c,y,f);const w=cy(f,y),E=c[11],T=Bs(E,y[7]);return null!==T&&function ch(i,s,a,c,h,f){c[0]=h,c[6]=s,hh(i,c,a,1,h,f)}(h,y[6],E,c,T,w),s.attachToViewContainerRef(),fi(Gh(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Hh(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Ta(this._lContainer,a);c&&(Pn(Gh(this._lContainer),a),sy(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Ta(this._lContainer,a);return c&&null!=Pn(Gh(this._lContainer),a)?new bh(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Hh(i){return i[8]}function Gh(i){return i[8]||(i[8]=[])}function qI(i,s){let a;const c=s[i.index];if(qr(c))a=c;else{let h;if(8&i.type)h=xn(c);else{const f=s[11];h=f.createComment("");const y=dr(i,s);No(f,Bs(f,y),h,function aC(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=a=Vy(c,s,h,i),cc(s,a)}return new Nr(a,i,s)}class Yv{constructor(s){this.queryList=s,this.matches=null}clone(){return new Yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class yg{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,h=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new yg(h)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==yc(s,a).matches&&this.queries[a].setDirty()}}class vg{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Qv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,h);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Qv(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class zh{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new zh(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(s,a,KI(a,f)),this.matchTNodeWithReadOption(s,a,ga(a,s,f,!1,!1))}else c===ud?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ga(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Ca||h===ld||h===ud&&4&a.type)this.addMatch(a.index,-2);else{const f=ga(a,s,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function KI(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function _g(i,s,a,c){return-1===a?function nT(i,s){return 11&i.type?vl(i,s):4&i.type?cd(i,s):null}(s,i):-2===a?function Jv(i,s,a){return a===Ca?vl(s,i):a===ud?cd(s,i):a===ld?qI(s,i):void 0}(i,s,c):Si(i,i[1],a,s)}function wg(i,s,a,c){const h=s[19].queries[c];if(null===h.matches){const f=i.data,y=a.matches,w=[];for(let E=0;E<y.length;E+=2){const T=y[E];w.push(T<0?null:_g(s,f[T],y[E+1],a.metadata.read))}h.matches=w}return h.matches}function Ig(i,s,a,c){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=wg(i,s,h,a);for(let w=0;w<f.length;w+=2){const E=f[w];if(E>0)c.push(y[w/2]);else{const T=f[w+1],M=s[-E];for(let F=10;F<M.length;F++){const $=M[F];$[17]===$[3]&&Ig($[1],$,T,c)}if(null!==M[9]){const F=M[9];for(let $=0;$<F.length;$++){const ne=F[$];Ig(ne[1],ne,T,c)}}}}}return c}function YI(i){const s=Me(),a=zt(),c=aa();Ru(c+1);const h=yc(a,c);if(i.dirty&&function Au(i){return 4==(4&i[2])}(s)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?Ig(a,s,c,[]):wg(a,s,h,c);i.reset(f,lp),i.notifyOnChanges()}return!0}return!1}function Xv(i,s,a,c){const h=zt();if(h.firstCreatePass){const f=Kn();(function JI(i,s,a){null===i.queries&&(i.queries=new Qv),i.queries.track(new zh(s,a))})(h,new vg(s,a,c),f.index),function rT(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function qh(i,s,a){const c=new mg(4==(4&a));$l(i,s,c,c.destroy),null===s[19]&&(s[19]=new yg),s[19].queries.push(new Yv(c))}(h,Me(),a)}function e_(){return function QI(i,s){return i[19].queries[s].queryList}(Me(),aa())}function yc(i,s){return i.queries.getByIndex(s)}function sf(...i){}const oE=new wn("Application Initializer");let Ng=(()=>{class i{constructor(a){this.appInits=a,this.resolve=sf,this.reject=sf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(tv(f))a.push(f);else if(nv(f)){const y=new Promise((w,E)=>{f.subscribe({complete:w,error:E})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Hn(oE,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const u_=new wn("AppId",{providedIn:"root",factory:function aE(){return`${Og()}${Og()}${Og()}`}});function Og(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pg=new wn("Platform Initializer"),c_=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),l_=new wn("appBootstrapListener");let pT=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const kg=new wn("LocaleId",{providedIn:"root",factory:()=>qd(kg,Ke.Optional|Ke.SkipSelf)||function gT(){return typeof $localize<"u"&&$localize.locale||Fh}()}),Fg=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class lE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let uf=(()=>{class i{compileModuleSync(a){return new Mr(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Mo(nt(a).declarations).reduce((y,w)=>{const E=R(w);return E&&y.push(new Th(E)),y},[]);return new lE(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hE=(()=>Promise.resolve(0))();function Vg(i){typeof Zone>"u"?hE.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ei{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hs(!1),this.onMicrotaskEmpty=new Hs(!1),this.onStable=new Hs(!1),this.onError=new Hs(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function fE(){let i=Dt.requestAnimationFrame,s=Dt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function mE(i){const s=()=>{!function gE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Dt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,lf(i),i.isCheckStableRunning=!0,zs(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),lf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,f,y,w)=>{try{return fd(i),a.invokeTask(h,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),f_(i)}},onInvoke:(a,c,h,f,y,w,E)=>{try{return fd(i),a.invoke(h,f,y,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),f_(i)}},onHasTask:(a,c,h,f)=>{a.hasTask(h,f),c===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,lf(i),zs(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ei.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Ei.isInAngularZone())throw new Ee(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,s,pE,sf,sf);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const pE={};function zs(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function lf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function fd(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function f_(i){i._nesting--,zs(i)}class p_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hs,this.onMicrotaskEmpty=new Hs,this.onStable=new Hs,this.onError=new Hs}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,h){return s.apply(a,c)}}const df=new wn(""),g_=new wn("");let Dc,Ug=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Dc||(function vE(i){Dc=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ei.assertNotInAngularZone(),Vg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vg(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Hn(Ei),Hn(yE),Hn(g_))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),yE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Dc?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Fa=null;const m_=new wn("AllowMultipleToken"),hf=new wn("PlatformDestroyListeners");class IE{constructor(s,a){this.name=s,this.token=a}}function __(i,s,a=[]){const c=`Platform: ${s}`,h=new wn(c);return(f=[])=>{let y=jg();if(!y||y.injector.get(m_,!1)){const w=[...a,...f,{provide:h,useValue:!0}];i?i(w):function Cc(i){if(Fa&&!Fa.get(m_,!1))throw new Ee(400,!1);Fa=i;const s=i.get(bc);(function v_(i){const s=i.get(Pg,null);s&&s.forEach(a=>a())})(i)}(function Oi(i=[],s){return sc.create({name:s,providers:[{provide:Lm,useValue:"platform"},{provide:hf,useValue:new Set([()=>Fa=null])},...i]})}(w,c))}return function Bg(i){const s=jg();if(!s)throw new Ee(401,!1);return s}()}}function jg(){return Fa?.get(bc)??null}let bc=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function CE(i,s){let a;return a="noop"===i?new p_:("zone.js"===i?void 0:i)||new Ei(s),a}(c?.ngZone,function DE(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Ei,useValue:h}];return h.run(()=>{const y=sc.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),E=w.injector.get(ah,null);if(!E)throw new Ee(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:M=>{E.handleError(M)}});w.onDestroy(()=>{ff(this._modules,w),T.unsubscribe()})}),function $g(i,s,a){try{const c=a();return tv(c)?c.catch(h=>{throw s.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,h,()=>{const T=w.injector.get(Ng);return T.runInitializers(),T.donePromise.then(()=>(function ng(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(Sv=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(kg,Fh)||Fh),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const h=bE({},c);return function _E(i,s,a){const c=new Mr(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const c=a.injector.get(Hg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ee(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(hf,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Hn(sc))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function bE(i,s){return Array.isArray(s)?s.reduce(bE,i):{...i,...s}}let Hg=(()=>{class i{constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new O.y(w=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ei.assertNotInAngularZone(),Vg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ei.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(f,y.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof VD;if(!this._injector.get(Ng).done)throw!h&&Pe(a),new Ee(405,false);let y;y=h?a:this._injector.get(sh).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function wE(i){return i.isBoundToModule}(y)?void 0:this._injector.get(sd),T=y.create(sc.NULL,[],c||y.selector,w),M=T.location.nativeElement,F=T.injector.get(df,null);return F?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),ff(this.components,T),F?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ff(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(l_,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ff(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Hn(Ei),Hn(xo),Hn(ah))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ff(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let AE=!0,w_=!1;function Or(){return w_=!0,AE}function pd(){if(w_)throw new Error("Cannot enable prod mode after platform setup.");AE=!1}let je=(()=>{class i{}return i.__NG_ELEMENT_ID__=cr,i})();function cr(i){return function Ac(i,s,a){if(Iu(i)&&!a){const c=nn(i.index,s);return new bh(c,c)}return 47&i.type?new bh(s[16],s):null}(Kn(),Me(),16==(16&i))}class Vn{constructor(){}supports(s){return Ah(s)}create(s){return new gf(s)}}const bt=(i,s)=>s;class gf{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||bt}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,h=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<qe(c,h,f)?a:c,w=qe(y,h,f),E=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const T=w-h,M=E-h;if(T!=M){for(let $=0;$<T;$++){const ne=$<f.length?f[$]:f[$]=0,ve=ne+$;M<=ve&&ve<T&&(f[$]=ne+1)}f[y.previousIndex]=M-T}}w!==E&&s(y,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ah(s))throw new Ee(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let h,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else h=0,function Lp(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[dc()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(h,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,h)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,h){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,h)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,h)):s=this._addAfter(new sn(a,c),f,h),s}_verifyReinsertion(s,a,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,h):s.currentIndex!=h&&(s.currentIndex=h,this._addToMoves(s,h)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const h=s._prevRemoved,f=s._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const h=null===a?this._itHead:a._next;return s._next=h,s._prev=a,null===h?this._itTail=s:h._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new er),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new er),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class sn{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class er{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new wT,this.map.set(a,c)),c.add(s)}get(s,a){const h=this.map.get(s);return h?h.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qe(i,s,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+s+h}class mf{constructor(){}supports(s){return s instanceof Map||Vp(s)}create(){return new C_}}class C_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Vp(s)))throw new Ee(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const h=this._records.get(s);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new xc(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class xc{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FE(){return new gd([new Vn])}let gd=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||FE()),deps:[[i,new ht,new Te]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new Ee(901,!1)}}return i.\u0275prov=en({token:i,providedIn:"root",factory:FE}),i})();function md(){return new Wg([new mf])}let Wg=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||md()),deps:[[i,new ht,new Te]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new Ee(901,!1)}}return i.\u0275prov=en({token:i,providedIn:"root",factory:md}),i})();const UE=__(null,"core",[]);let fu=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Hn(Hg))},i.\u0275mod=Zt({type:i}),i.\u0275inj=Pt({}),i})();function b_(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ct,Se,k)=>{k.d(Se,{Z:()=>Ee});var l=k(2090),B=k(4859),O=k(9681),ie=k(1877);class oe{constructor(_e,fe){this._delegate=_e,this.firebase=fe,(0,O._addComponent)(_e,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,fe=O._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(_e);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Qe=Ze.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:fe})}_removeServiceInstance(_e,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(fe)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function me(){const tt=function le(tt){const _e={},fe={__esModule:!0,initializeApp:function ke(re,ae={}){const ye=O.initializeApp(re,ae);if((0,l.r3)(_e,ye.name))return _e[ye.name];const K=new tt(ye,fe);return _e[ye.name]=K,K},app:Ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(re){const ae=re.name,ye=ae.replace("-compat","");if(O._registerComponent(re)&&"PUBLIC"===re.type){const K=(J=Ze())=>{if("function"!=typeof J[ye])throw de.create("invalid-app-argument",{appName:ae});return J[ye]()};void 0!==re.serviceProps&&(0,l.ZB)(K,re.serviceProps),fe[ye]=K,tt.prototype[ye]=function(...J){return this._getService.bind(this,ae).apply(this,re.multipleInstances?J:[])}}return"PUBLIC"===re.type?fe[ye]:null},removeApp:function Qe(re){delete _e[re]},useAsService:function He(re,ae){return"serverAuth"===ae?null:ae},modularAPIs:O}};function Ze(re){if(!(0,l.r3)(_e,re=re||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:re});return _e[re]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function Re(){return Object.keys(_e).map(re=>_e[re])}}),Ze.App=tt,fe}(oe);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(fe){(0,l.ZB)(tt,fe)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),tt}(),G=new ie.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ee=W;!function Ne(tt){(0,O.registerVersion)("@firebase/app-compat","0.1.37",tt)}()},9681:(ct,Se,k)=>{k.r(Se),k.d(Se,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Fi,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>en,_apps:()=>un,_clearComponents:()=>bi,_components:()=>mn,_getProvider:()=>Pt,_registerComponent:()=>$t,_removeServiceInstance:()=>hr,deleteApp:()=>Li,getApp:()=>Un,getApps:()=>ui,initializeApp:()=>Dr,onLog:()=>Bn,registerVersion:()=>Wn,setLogLevel:()=>gn});var l=k(5861),B=k(4859),O=k(1877),ie=k(2090),oe=k(8766);class ge{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function de(Xe){return"VERSION"===Xe.getComponent()?.type}(Je)){const vt=Je.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(Je=>Je).join(" ")}}const le="@firebase/app",W=new O.Yd("@firebase/app"),Ut="[DEFAULT]",We={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,mn=new Map;function Xt(Xe,De){try{Xe.container.addComponent(De)}catch(Je){W.debug(`Component ${De.name} failed to register with FirebaseApp ${Xe.name}`,Je)}}function en(Xe,De){Xe.container.addOrOverwriteComponent(De)}function $t(Xe){const De=Xe.name;if(mn.has(De))return W.debug(`There were multiple attempts to register component ${De}.`),!1;mn.set(De,Xe);for(const Je of un.values())Xt(Je,Xe);return!0}function Pt(Xe,De){const Je=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Xe.container.getProvider(De)}function hr(Xe,De,Je=Ut){Pt(Xe,De).clearInstance(Je)}function bi(){mn.clear()}const Sn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ki{constructor(De,Je,vt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const Fi="9.12.1";function Dr(Xe,De={}){let Je=Xe;"object"!=typeof De&&(De={name:De});const vt=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},De),_t=vt.name;if("string"!=typeof _t||!_t)throw Sn.create("bad-app-name",{appName:String(_t)});if(Je||(Je=(0,ie.aH)()),!Je)throw Sn.create("no-options");const Zt=un.get(_t);if(Zt){if((0,ie.vZ)(Je,Zt.options)&&(0,ie.vZ)(vt,Zt.config))return Zt;throw Sn.create("duplicate-app",{appName:_t})}const z=new B.H0(_t);for(const q of mn.values())z.addComponent(q);const j=new ki(Je,vt,z);return un.set(_t,j),j}function Un(Xe=Ut){const De=un.get(Xe);if(!De&&Xe===Ut)return Dr();if(!De)throw Sn.create("no-app",{appName:Xe});return De}function ui(){return Array.from(un.values())}function Li(Xe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,l.Z)(function*(Xe){const De=Xe.name;un.has(De)&&(un.delete(De),yield Promise.all(Xe.container.getProviders().map(Je=>Je.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function Wn(Xe,De,Je){var vt;let _t=null!==(vt=We[Xe])&&void 0!==vt?vt:Xe;Je&&(_t+=`-${Je}`);const Zt=_t.match(/\s|\//),z=De.match(/\s|\//);if(Zt||z){const j=[`Unable to register library "${_t}" with version "${De}":`];return Zt&&j.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),Zt&&z&&j.push("and"),z&&j.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void W.warn(j.join(" "))}$t(new B.wA(`${_t}-version`,()=>({library:_t,version:De}),"VERSION"))}function Bn(Xe,De){if(null!==Xe&&"function"!=typeof Xe)throw Sn.create("invalid-log-argument");(0,O.Am)(Xe,De)}function gn(Xe){(0,O.Ub)(Xe)}const yn="firebase-heartbeat-store";let vn=null;function pn(){return vn||(vn=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,De)=>{0===De&&Xe.createObjectStore(yn)}}).catch(Xe=>{throw Sn.create("idb-open",{originalErrorMessage:Xe.message})})),vn}function dt(){return(dt=(0,l.Z)(function*(Xe){var De;try{return(yield pn()).transaction(yn).objectStore(yn).get(qn(Xe))}catch(Je){if(Je instanceof ie.ZR)W.warn(Je.message);else{const vt=Sn.create("idb-get",{originalErrorMessage:null===(De=Je)||void 0===De?void 0:De.message});W.warn(vt.message)}}})).apply(this,arguments)}function Dt(Xe,De){return kr.apply(this,arguments)}function kr(){return(kr=(0,l.Z)(function*(Xe,De){var Je;try{const _t=(yield pn()).transaction(yn,"readwrite");return yield _t.objectStore(yn).put(De,qn(Xe)),_t.done}catch(vt){if(vt instanceof ie.ZR)W.warn(vt.message);else{const _t=Sn.create("idb-set",{originalErrorMessage:null===(Je=vt)||void 0===Je?void 0:Je.message});W.warn(_t.message)}}})).apply(this,arguments)}function qn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Cr{constructor(De){this.container=De,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Wt(Je),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var De=this;return(0,l.Z)(function*(){const vt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Ot();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==_t&&!De._heartbeatsCache.heartbeats.some(Zt=>Zt.date===_t))return De._heartbeatsCache.heartbeats.push({date:_t,agent:vt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Zt=>{const z=new Date(Zt.date).valueOf();return Date.now()-z<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,l.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Je=Ot(),{heartbeatsToSend:vt,unsentEntries:_t}=function zr(Xe,De=1024){const Je=[];let vt=Xe.slice();for(const _t of Xe){const Zt=Je.find(z=>z.agent===_t.agent);if(Zt){if(Zt.dates.push(_t.date),rr(Je)>De){Zt.dates.pop();break}}else if(Je.push({agent:_t.agent,dates:[_t.date]}),rr(Je)>De){Je.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:vt}}(De._heartbeatsCache.heartbeats),Zt=(0,ie.L)(JSON.stringify({version:2,heartbeats:vt}));return De._heartbeatsCache.lastSentHeartbeatDate=Je,_t.length>0?(De._heartbeatsCache.heartbeats=_t,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Zt})()}}function Ot(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,l.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function lt(Xe){return dt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Je=this;return(0,l.Z)(function*(){var vt;if(yield Je._canUseIndexedDBPromise){const Zt=yield Je.read();return Dt(Je.app,{lastSentHeartbeatDate:null!==(vt=De.lastSentHeartbeatDate)&&void 0!==vt?vt:Zt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Je=this;return(0,l.Z)(function*(){var vt;if(yield Je._canUseIndexedDBPromise){const Zt=yield Je.read();return Dt(Je.app,{lastSentHeartbeatDate:null!==(vt=De.lastSentHeartbeatDate)&&void 0!==vt?vt:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,...De.heartbeats]})}})()}}function rr(Xe){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function En(Xe){$t(new B.wA("platform-logger",De=>new ge(De),"PRIVATE")),$t(new B.wA("heartbeat",De=>new Cr(De),"PRIVATE")),Wn(le,"0.8.2",Xe),Wn(le,"0.8.2","esm2017"),Wn("fire-js","")}("")},4859:(ct,Se,k)=>{k.d(Se,{H0:()=>le,wA:()=>O});var l=k(5861),B=k(2090);class O{constructor(W,G,Q){this.name=W,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ie="[DEFAULT]";class oe{constructor(W,G){this.name=W,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const G=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(G)){const Q=new B.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&Q.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(W){var G;const Q=this.normalizeInstanceIdentifier(W?.identifier),$e=null!==(G=W?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ne){if($e)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function de(me){return"EAGER"===me.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Ne=this.getOrInitializeService({instanceIdentifier:$e});Q.resolve(Ne)}catch{}}}}clearInstance(W=ie){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,l.Z)(function*(){const G=Array.from(W.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ie){return this.instances.has(W)}getOptions(W=ie){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:G={}}=W,Q=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[Ne,Ee]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ne)&&Ee.resolve($e);return $e}onInit(W,G){var Q;const $e=this.normalizeInstanceIdentifier(G),Ne=null!==(Q=this.onInitCallbacks.get($e))&&void 0!==Q?Q:new Set;Ne.add(W),this.onInitCallbacks.set($e,Ne);const Ee=this.instances.get($e);return Ee&&W(Ee,$e),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const $e of Q)try{$e(W,G)}catch{}}getOrInitializeService({instanceIdentifier:W,options:G={}}){let Q=this.instances.get(W);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(me=W,me===ie?void 0:me),options:G}),this.instances.set(W,Q),this.instancesOptions.set(W,G),this.invokeOnInitCallbacks(Q,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,Q)}catch{}var me;return Q||null}normalizeInstanceIdentifier(W=ie){return this.component?this.component.multipleInstances?W:ie:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const G=this.getProvider(W.name);if(G.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);G.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const G=new oe(W,this);return this.providers.set(W,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Se,k)=>{k.d(Se,{Am:()=>me,Ub:()=>le,Yd:()=>de,in:()=>B});const l=[];var B=(()=>{return(W=B||(B={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",B;var W})();const O={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ie=B.INFO,oe={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ge=(W,G,...Q)=>{if(G<W.logLevel)return;const $e=(new Date).toISOString(),Ne=oe[G];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ne](`[${$e}]  ${W.name}:`,...Q)};class de{constructor(G){this.name=G,this._logLevel=ie,this._logHandler=ge,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function le(W){l.forEach(G=>{G.setLogLevel(W)})}function me(W,G){for(const Q of l){let $e=null;G&&G.level&&($e=O[G.level]),Q.userLogHandler=null===W?null:(Ne,Ee,...tt)=>{const _e=tt.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");Ee>=($e??Ne.logLevel)&&W({level:B[Ee].toLowerCase(),message:_e,args:tt,type:Ne.name})}}}},8766:(ct,Se,k)=>{k.d(Se,{Lj:()=>ke,X3:()=>Ze});var l=k(5861);let O,ie;const de=new WeakMap,le=new WeakMap,me=new WeakMap,W=new WeakMap,G=new WeakMap;let Ne={get(ae,ye,K){if(ae instanceof IDBTransaction){if("done"===ye)return le.get(ae);if("objectStoreNames"===ye)return ae.objectStoreNames||me.get(ae);if("store"===ye)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return fe(ae[ye])},set:(ae,ye,K)=>(ae[ye]=K,!0),has:(ae,ye)=>ae instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in ae};function _e(ae){return"function"==typeof ae?function tt(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...ye){return ae.apply(Qe(this),ye),fe(de.get(this))}:function(...ye){return fe(ae.apply(Qe(this),ye))}:function(ye,...K){const J=ae.call(Qe(this),ye,...K);return me.set(J,ye.sort?ye.sort():[ye]),fe(J)}}(ae):(ae instanceof IDBTransaction&&function $e(ae){if(le.has(ae))return;const ye=new Promise((K,J)=>{const he=()=>{ae.removeEventListener("complete",se),ae.removeEventListener("error",Ue),ae.removeEventListener("abort",Ue)},se=()=>{K(),he()},Ue=()=>{J(ae.error||new DOMException("AbortError","AbortError")),he()};ae.addEventListener("complete",se),ae.addEventListener("error",Ue),ae.addEventListener("abort",Ue)});le.set(ae,ye)}(ae),((ae,ye)=>ye.some(K=>ae instanceof K))(ae,function oe(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,Ne):ae)}function fe(ae){if(ae instanceof IDBRequest)return function Q(ae){const ye=new Promise((K,J)=>{const he=()=>{ae.removeEventListener("success",se),ae.removeEventListener("error",Ue)},se=()=>{K(fe(ae.result)),he()},Ue=()=>{J(ae.error),he()};ae.addEventListener("success",se),ae.addEventListener("error",Ue)});return ye.then(K=>{K instanceof IDBCursor&&de.set(K,ae)}).catch(()=>{}),G.set(ye,ae),ye}(ae);if(W.has(ae))return W.get(ae);const ye=_e(ae);return ye!==ae&&(W.set(ae,ye),G.set(ye,ae)),ye}const Qe=ae=>G.get(ae);function Ze(ae,ye,{blocked:K,upgrade:J,blocking:he,terminated:se}={}){const Ue=indexedDB.open(ae,ye),Be=fe(Ue);return J&&Ue.addEventListener("upgradeneeded",gt=>{J(fe(Ue.result),gt.oldVersion,gt.newVersion,fe(Ue.transaction))}),K&&Ue.addEventListener("blocked",()=>K()),Be.then(gt=>{se&&gt.addEventListener("close",()=>se()),he&&gt.addEventListener("versionchange",()=>he())}).catch(()=>{}),Be}function ke(ae,{blocked:ye}={}){const K=indexedDB.deleteDatabase(ae);return ye&&K.addEventListener("blocked",()=>ye()),fe(K).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],He=new Map;function re(ae,ye){if(!(ae instanceof IDBDatabase)||ye in ae||"string"!=typeof ye)return;if(He.get(ye))return He.get(ye);const K=ye.replace(/FromIndex$/,""),J=ye!==K,he=we.includes(K);if(!(K in(J?IDBIndex:IDBObjectStore).prototype)||!he&&!Re.includes(K))return;const se=function(){var Ue=(0,l.Z)(function*(Be,...gt){const tn=this.transaction(Be,he?"readwrite":"readonly");let Ut=tn.store;return J&&(Ut=Ut.index(gt.shift())),(yield Promise.all([Ut[K](...gt),he&&tn.done]))[0]});return function(gt){return Ue.apply(this,arguments)}}();return He.set(ye,se),se}!function Ee(ae){Ne=ae(Ne)}(ae=>({...ae,get:(ye,K,J)=>re(ye,K)||ae.get(ye,K,J),has:(ye,K)=>!!re(ye,K)||ae.has(ye,K)}))},5861:(ct,Se,k)=>{function l(O,ie,oe,ge,de,le,me){try{var W=O[le](me),G=W.value}catch(Q){return void oe(Q)}W.done?ie(G):Promise.resolve(G).then(ge,de)}function B(O){return function(){var ie=this,oe=arguments;return new Promise(function(ge,de){var le=O.apply(ie,oe);function me(G){l(le,ge,de,me,W,"next",G)}function W(G){l(le,ge,de,me,W,"throw",G)}me(void 0)})}}k.d(Se,{Z:()=>B})}},ct=>{ct(ct.s=323)}]);